"use strict";(self.webpackChunknrug_arrival_form_frontend=self.webpackChunknrug_arrival_form_frontend||[]).push([[317],{7661:function(e,t,r){r.d(t,{o:function(){return v}});var n=r(2982),a=r(5671),i=r(3144),o=r(7326),s=r(136),u=r(9388),c=r(3197),l=r(3114),d=r(2041),h=r(8464),f=r(9471),v=function(e){(0,s.Z)(r,e);var t=(0,u.Z)(r);function r(e,n,i){var s,u;return(0,a.Z)(this,r),(u=t.call(this,i)).endpoint=e,u.opts=n||{},u.started=!1,u.timeoutHandle=null,u.aborted=!1,u.harvest=new d.M(u.sharedContext),(0,h.L)(u.unload.bind((0,o.Z)(u))),null===(s=u.sharedContext)||void 0===s||s.ee.on(f.wO.RESET,(function(){return u.runHarvest({forceNoRetry:!0})})),u}return(0,i.Z)(r,[{key:"unload",value:function(){this.aborted||(this.opts.onUnload&&this.opts.onUnload(),this.runHarvest({unload:!0}))}},{key:"startTimer",value:function(e,t){this.interval=e,this.started=!0,this.scheduleHarvest(null!=t?t:this.interval)}},{key:"stopTimer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.aborted=e,this.started=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)}},{key:"scheduleHarvest",value:function(e,t){var r=this;this.timeoutHandle||(null==e&&(e=this.interval),this.timeoutHandle=setTimeout((function(){r.timeoutHandle=null,r.runHarvest(t)}),1e3*e))}},{key:"runHarvest",value:function(e){var t=this;if(!this.aborted){var r,a,i=function(r){null!==e&&void 0!==e&&e.forceNoRetry&&(r.retry=!1),t.onHarvestFinished(e,r)},o=[];if(this.opts.getPayload){if(!(r=c.qD({isFinalHarvest:null===e||void 0===e?void 0:e.unload})))return!1;var s=!(null!==e&&void 0!==e&&e.unload)&&r===c.Be;if(!(a=this.opts.getPayload({retry:s})))return void(this.started&&this.scheduleHarvest());a="[object Array]"===Object.prototype.toString.call(a)?a:[a],o.push.apply(o,(0,n.Z)(a))}var u=function(e){return t.harvest.sendX(e)};o.length?u=this.opts.raw?function(e){return t.harvest._send(e)}:function(e){return t.harvest.send(e)}:o.push(void 0),o.forEach((function(n){u({endpoint:t.endpoint,payload:n,opts:e,submitMethod:r,cbFinished:i,customUrl:t.opts.customUrl,raw:t.opts.raw})})),this.started&&this.scheduleHarvest()}}},{key:"onHarvestFinished",value:function(e,t){if(this.opts.onFinished&&this.opts.onFinished(t),t.sent&&t.retry){var r=t.delay||this.opts.retryDelay;this.started&&r?(clearTimeout(this.timeoutHandle),this.timeoutHandle=null,this.scheduleHarvest(r,e)):!this.started&&r&&this.scheduleHarvest(r,e)}}}]),r}(l.w)},8464:function(e,t,r){r.d(t,{L:function(){return u}});var n=r(7762),a=r(1997),i=r(3980),o=r(536);if(i.v6){i._A.cleanupTasks=[];var s=i._A.close;i._A.close=function(){var e,t=(0,n.Z)(i._A.cleanupTasks);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(r){t.e(r)}finally{t.f()}s()}}function u(e){i.il?((0,o.N)(e,!0),(0,a.bP)("pagehide",e)):i.v6&&i._A.cleanupTasks.push(e)}},1645:function(e,t,r){r.r(t),r.d(t,{Aggregate:function(){return F}});var n=r(5671),a=r(3144),i=r(7326),o=r(136),s=r(9388),u=r(4942),c=/([a-z0-9]+)$/i;function l(e){if(e){var t=e.match(c);return t?t[1]:void 0}}var d=/^\n+|\n+$/g;function h(e){return function(e){var t;if(e.length>100){var r=e.length-100;t=e.slice(0,50).join("\n"),t+="\n< ...truncated "+r+" lines... >\n",t+=e.slice(-50).join("\n")}else t=e.join("\n");return t}(e).replace(d,"")}var f=r(3980),v=r(8575);function m(e){if("string"!==typeof e)return"";var t=(0,v.f)(e);return t===(0,v.f)(f.FN)?"<inline>":t}var p=!1,g=/function (.+?)\s*\(/,y=/^\s*at (?:((?:\[object object\])?(?:[^(]*\([^)]*\))*[^()]*(?: \[as \S+\])?) )?\(?((?:file|http|https|chrome-extension):.*?)?:(\d+)(?::(\d+))?\)?\s*$/i,k=/^\s*(?:(\S*|global code)(?:\(.*?\))?@)?((?:file|http|https|chrome|safari-extension).*?):(\d+)(?::(\d+))?\s*$/i,b=/^\s*at .+ \(eval at \S+ \((?:(?:file|http|https):[^)]+)?\)(?:, [^:]*:\d+:\d+)?\)$/i,_=/^\s*at Function code \(Function code:\d+:\d+\)\s*/i;function S(e){var t=null;try{if(t=function(e){if(!e.stack)return null;var t=e.stack.split("\n").reduce(H,{frames:[],stackLines:[],wrapperSeen:!1});return t.frames.length?{mode:"stack",name:e.name||I(e),message:e.message,stackString:h(t.stackLines),frames:t.frames}:null}(e),t)return t}catch(r){p}try{if(t=function(e){if(!("line"in e))return null;var t=e.name||I(e);if(!e.sourceURL)return{mode:"sourceline",name:t,message:e.message,stackString:t+": "+e.message+"\n    in evaluated code",frames:[{func:"evaluated code"}]};var r=m(e.sourceURL),n=t+": "+e.message+"\n    at "+r;e.line&&(n+=":"+e.line,e.column&&(n+=":"+e.column));return{mode:"sourceline",name:t,message:e.message,stackString:n,frames:[{url:r,line:e.line,column:e.column}]}}(e),t)return t}catch(r){p}try{if(t=function(e){var t=e.name||I(e);return t?{mode:"nameonly",name:t,message:e.message,stackString:t+": "+e.message,frames:[]}:null}(e),t)return t}catch(r){p}return{mode:"failed",stackString:"",frames:[]}}function H(e,t){var r,n=function(e){var t=e.match(k);t||(t=e.match(y));if(t)return{url:t[2],func:"Anonymous function"!==t[1]&&"global code"!==t[1]&&t[1]||null,line:+t[3],column:t[4]?+t[4]:null};if(e.match(b)||e.match(_)||"anonymous"===e)return{func:"evaluated code"}}(t);if(!n)return e.stackLines.push(t),e;if((r=n.func)&&r.indexOf("nrWrapper")>=0&&(e.wrapperSeen=!0),!e.wrapperSeen){var a=m(n.url);a!==n.url&&(t=t.replace(n.url,a),n.url=a),e.stackLines.push(t),e.frames.push(n)}return e}function I(e){var t=g.exec(String(e.constructor));return t&&t.length>1?t[1]:"unknown"}function w(e){var t=0;if(!e||!e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}var A=r(4613),C=r(7661),P=r(8038),D=r(5894),N=r(3973),Z=r(8958),j=r(6276),T=r(7685),R=r(9025),F=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(e,a){var o,s;(0,n.Z)(this,r),o=t.call(this,e,a,T.t),s=(0,i.Z)(o),o.stackReported={},o.observedAt={},o.pageviewReported={},o.errorCache={},o.currentBody=void 0,o.errorOnPage=!1,o.ee.on("interactionSaved",(function(e){return o.onInteractionSaved(e)})),o.ee.on("interactionDiscarded",(function(e){return o.onInteractionDiscarded(e)})),(0,A.X)("err",(function(){var e;return(e=s).storeError.apply(e,arguments)}),o.featureName,o.ee),(0,A.X)("ierr",(function(){var e;return(e=s).storeError.apply(e,arguments)}),o.featureName,o.ee);var u=(0,Z.Mt)(o.agentIdentifier,"jserrors.harvestTimeSeconds")||10,c=new C.o("jserrors",{onFinished:function(){var e;return(e=s).onHarvestFinished.apply(e,arguments)}},(0,i.Z)(o));return c.harvest.on("jserrors",(function(){var e;return(e=s).onHarvestStarted.apply(e,arguments)})),o.ee.on("drain-".concat(o.featureName),(function(){o.blocked||c.startTimer(u)})),(0,A.X)("block-err",(function(){o.blocked=!0,c.stopTimer(!0)}),o.featureName,o.ee),o.drain(),o}return(0,a.Z)(r,[{key:"onHarvestStarted",value:function(e){var t=this.aggregator.take(["err","ierr","xhr"]);e.retry&&(this.currentBody=t);var r={body:t,qs:{}},n=(0,P.P)((0,Z.OP)(this.agentIdentifier).releaseIds);return"{}"!==n&&(r.qs.ri=n),t&&t.err&&t.err.length&&!this.errorOnPage&&(r.qs.pve="1",this.errorOnPage=!0),r}},{key:"onHarvestFinished",value:function(e){var t=this;e.retry&&this.currentBody&&((0,N.D)(this.currentBody,(function(e,r){for(var n=0;n<r.length;n++){var a=r[n],i=t.getBucketName(e,a.params,a.custom);t.aggregator.merge(e,i,a.metrics,a.params,a.custom)}})),this.currentBody=null)}},{key:"nameHash",value:function(e){return w("".concat(e.exceptionClass,"_").concat(e.message,"_").concat(e.stack_trace||e.browser_stack_hash))}},{key:"getBucketName",value:function(e,t,r){return"xhr"===e?w((0,P.P)(t))+":"+w((0,P.P)(r)):this.nameHash(t)+":"+w((0,P.P)(r))}},{key:"buildCanonicalStackString",value:function(e){for(var t="",r=0;r<e.frames.length;r++){var n=e.frames[r],a=l(n.func);t&&(t+="\n"),a&&(t+=a+"@"),"string"===typeof n.url&&(t+=n.url),n.line&&(t+=":"+n.line)}return t}},{key:"storeError",value:function(e,t,r,n){var a,i;t=t||(0,j.z)();var o,s=(0,Z.OP)(this.agentIdentifier);if(r||!s.onerror||!(o=s.onerror(e))||"string"===typeof o.group&&o.group.length){var u=S(e),c={stackHash:w(this.buildCanonicalStackString(u)),exceptionClass:u.name,request_uri:null===f._A||void 0===f._A?void 0:f._A.location.pathname};u.message&&(c.message=""+u.message),null!==(a=o)&&void 0!==a&&a.group&&(c.errorGroup=o.group);var l,d=w("".concat(u.name,"_").concat(u.message,"_").concat(u.stackString));this.stackReported[d]?c.browser_stack_hash=w(u.stackString):(this.stackReported[d]=!0,c.stack_trace=(l=u.stackString).length>65530?l.substr(0,65530):l,this.observedAt[d]=s.offset+t),c.releaseIds=(0,P.P)(s.releaseIds),this.pageviewReported[d]||(c.pageview=1,this.pageviewReported[d]=!0),null!==s&&void 0!==s&&null!==(i=s.session)&&void 0!==i&&null!==(i=i.state)&&void 0!==i&&i.sessionReplayMode&&(c.hasReplay=!0),c.firstOccurrenceTimestamp=this.observedAt[d];var h=r?"ierr":"err",v={time:t},m=[h,d,c,v];if((0,D.p)("errorAgg",m,void 0,R.D.sessionTrace,this.ee),(0,D.p)("errorAgg",m,void 0,R.D.spa,this.ee),(0,D.p)("errorAgg",m,void 0,R.D.sessionReplay,this.ee),!this.blocked){var p=(0,Z.C5)(this.agentIdentifier).jsAttributes;if(null!=c._interactionId)this.errorCache[c._interactionId]=this.errorCache[c._interactionId]||[],this.errorCache[c._interactionId].push([h,d,c,v,p,n]);else{var g={};(0,N.D)(p,k),n&&(0,N.D)(n,k);var y=d+":"+w((0,P.P)(g));this.aggregator.store(h,y,c,v,g)}}}function k(e,t){g[e]=t&&"object"===typeof t?(0,P.P)(t):t}}},{key:"onInteractionSaved",value:function(e){var t=this;this.errorCache[e.id]&&!this.blocked&&(this.errorCache[e.id].forEach((function(r){var n={},a=r[4],i=r[5];(0,N.D)(a,u),(0,N.D)(e.root.attrs.custom,u),(0,N.D)(i,u);var o=r[2];o.browserInteractionId=e.root.attrs.id,delete o._interactionId,o._interactionNodeId&&(o.parentNodeId=o._interactionNodeId.toString(),delete o._interactionNodeId);var s=r[1]+e.root.attrs.id+":"+w((0,P.P)(n));function u(e,t){n[e]=t&&"object"===typeof t?(0,P.P)(t):t}t.aggregator.store(r[0],s,o,r[3],n)})),delete this.errorCache[e.id])}},{key:"onInteractionDiscarded",value:function(e){var t=this;this.errorCache&&this.errorCache[e.id]&&!this.blocked&&(this.errorCache[e.id].forEach((function(r){var n={},a=r[4],i=r[5];(0,N.D)(a,u),(0,N.D)(e.root.attrs.custom,u),(0,N.D)(i,u);var o=r[2];delete o._interactionId,delete o._interactionNodeId;var s=r[1]+":"+w((0,P.P)(n));function u(e,t){n[e]=t&&"object"===typeof t?(0,P.P)(t):t}t.aggregator.store(r[0],s,r[2],r[3],n)})),delete this.errorCache[e.id])}}]),r}(r(1527).m);(0,u.Z)(F,"featureName",T.t)},7762:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(181);function a(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=(0,n.Z)(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}}}]);
//# sourceMappingURL=jserrors-aggregate.29807ae1.chunk.js.map