{"version":3,"file":"static/js/jserrors-aggregate.29807ae1.chunk.js","mappings":"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","sources":["../node_modules/@newrelic/browser-agent/dist/esm/common/harvest/harvest-scheduler.js","../node_modules/@newrelic/browser-agent/dist/esm/common/unload/eol.js","../node_modules/@newrelic/browser-agent/dist/esm/features/jserrors/aggregate/canonical-function-name.js","../node_modules/@newrelic/browser-agent/dist/esm/features/jserrors/aggregate/format-stack-trace.js","../node_modules/@newrelic/browser-agent/dist/esm/common/url/canonicalize-url.js","../node_modules/@newrelic/browser-agent/dist/esm/features/jserrors/aggregate/compute-stack-trace.js","../node_modules/@newrelic/browser-agent/dist/esm/features/jserrors/aggregate/string-hash-code.js","../node_modules/@newrelic/browser-agent/dist/esm/features/jserrors/aggregate/index.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js"],"sourcesContent":["/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as submitData from '../util/submit-data';\nimport { SharedContext } from '../context/shared-context';\nimport { Harvest } from './harvest';\nimport { subscribeToEOL } from '../unload/eol';\nimport { SESSION_EVENTS } from '../session/session-entity';\n\n/**\n * Periodically invokes harvest calls and handles retries\n */\nexport class HarvestScheduler extends SharedContext {\n  /**\n     * Create a HarvestScheduler\n     * @param {string} endpoint - The base BAM endpoint name -- ex. 'events'\n     * @param {object} opts - The options used to configure the HarvestScheduler\n     * @param {Function} opts.onFinished - The callback to be fired when a harvest has finished\n     * @param {Function} opts.getPayload - A callback which can be triggered to return a payload for harvesting\n     * @param {number} opts.retryDelay - The number of seconds to wait before retrying after a network failure\n     * @param {boolean} opts.raw - Use a prefabricated payload shape as the harvest payload without the need for formatting\n     * @param {string} opts.customUrl - A custom url that falls outside of the shape of the standard BAM harvester url pattern.  Will use directly instead of concatenating various pieces\n     * @param {*} parent - The parent object, whose state can be passed into SharedContext\n     */\n  constructor(endpoint, opts, parent) {\n    super(parent); // gets any allowed properties from the parent and stores them in `sharedContext`\n    this.endpoint = endpoint;\n    this.opts = opts || {};\n    this.started = false;\n    this.timeoutHandle = null;\n    this.aborted = false; // this controls the per-interval and final harvests for the scheduler (currently per feature specific!)\n\n    this.harvest = new Harvest(this.sharedContext);\n\n    // unload if EOL mechanism fires\n    subscribeToEOL(this.unload.bind(this));\n\n    /* Flush all buffered data if session resets and give up retries. This should be synchronous to ensure that the correct `session` value is sent.\n      Since session-reset generates a new session ID and the ID is grabbed at send-time, any delays or retries would cause the payload to be sent under\n      the wrong session ID. */\n    this.sharedContext?.ee.on(SESSION_EVENTS.RESET, () => this.runHarvest({\n      forceNoRetry: true\n    }));\n  }\n\n  /**\n   * This function is only meant for the last outgoing harvest cycle of a page. It trickles down to using sendBeacon, which should not be used\n   * to send payloads while the page is still active, due to limitations on how much data can be buffered in the API at any one time.\n   */\n  unload() {\n    if (this.aborted) return;\n    // If opts.onUnload is defined, these are special actions to execute before attempting to send the final payload.\n    if (this.opts.onUnload) this.opts.onUnload();\n    this.runHarvest({\n      unload: true\n    });\n  }\n  startTimer(interval, initialDelay) {\n    this.interval = interval;\n    this.started = true;\n    this.scheduleHarvest(initialDelay != null ? initialDelay : this.interval);\n  }\n  stopTimer() {\n    let permanently = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    this.aborted = permanently; // stopping permanently is same as aborting, but this function also cleans up the setTimeout loop\n    this.started = false;\n    if (this.timeoutHandle) {\n      clearTimeout(this.timeoutHandle);\n    }\n  }\n  scheduleHarvest(delay, opts) {\n    if (this.timeoutHandle) return;\n    if (delay == null) {\n      delay = this.interval;\n    }\n    this.timeoutHandle = setTimeout(() => {\n      this.timeoutHandle = null;\n      this.runHarvest(opts);\n    }, delay * 1000);\n  }\n  runHarvest(opts) {\n    if (this.aborted) return;\n\n    /**\n     * This is executed immediately after harvest sends the data via XHR, or if there's nothing to send. Note that this excludes on unloading / sendBeacon.\n     * @param {Object} result\n     */\n    const cbRanAfterSend = result => {\n      if (opts?.forceNoRetry) result.retry = false; // discard unsent data rather than re-queuing for next harvest attempt\n      this.onHarvestFinished(opts, result);\n    };\n    let harvests = [];\n    let submitMethod;\n    let payload;\n    if (this.opts.getPayload) {\n      // Ajax & PVT & SR features provide a callback function to get data for harvesting\n      submitMethod = submitData.getSubmitMethod({\n        isFinalHarvest: opts?.unload\n      });\n      if (!submitMethod) return false;\n      const retry = !opts?.unload && submitMethod === submitData.xhr;\n      payload = this.opts.getPayload({\n        retry\n      });\n      if (!payload) {\n        if (this.started) {\n          this.scheduleHarvest();\n        }\n        return;\n      }\n      payload = Object.prototype.toString.call(payload) === '[object Array]' ? payload : [payload];\n      harvests.push(...payload);\n    }\n\n    /** sendX is used for features that do not supply a preformatted payload via \"getPayload\" */\n    let send = args => this.harvest.sendX(args);\n    if (harvests.length) {\n      /** _send is the underlying method for sending in the harvest, if sending raw we can bypass the other helpers completely which format the payloads */\n      if (this.opts.raw) send = args => this.harvest._send(args);\n      /** send is used to formated the payloads from \"getPayload\" and obfuscate before sending */else send = args => this.harvest.send(args);\n    } else {\n      // force it to run at least once in sendX mode\n      harvests.push(undefined);\n    }\n    harvests.forEach(payload => {\n      send({\n        endpoint: this.endpoint,\n        payload,\n        opts,\n        submitMethod,\n        cbFinished: cbRanAfterSend,\n        customUrl: this.opts.customUrl,\n        raw: this.opts.raw\n      });\n    });\n    if (this.started) {\n      this.scheduleHarvest();\n    }\n  }\n  onHarvestFinished(opts, result) {\n    if (this.opts.onFinished) {\n      this.opts.onFinished(result);\n    }\n    if (result.sent && result.retry) {\n      const delay = result.delay || this.opts.retryDelay;\n      // reschedule next harvest if should be delayed longer\n      if (this.started && delay) {\n        clearTimeout(this.timeoutHandle);\n        this.timeoutHandle = null;\n        this.scheduleHarvest(delay, opts);\n      } else if (!this.started && delay) {\n        // if not running on a timer, schedule a single retry\n        this.scheduleHarvest(delay, opts);\n      }\n    }\n  }\n}","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { windowAddEventListener } from '../event-listener/event-listener-opts';\nimport { globalScope, isWorkerScope, isBrowserScope } from '../constants/runtime';\nimport { subscribeToVisibilityChange } from '../window/page-visibility';\nif (isWorkerScope) {\n  globalScope.cleanupTasks = []; // create new list on WorkerGlobalScope to track funcs to run before exiting thread\n\n  const origClose = globalScope.close;\n  globalScope.close = () => {\n    // on worker's EoL signal, execute all \"listeners\", e.g. final harvests\n    for (let task of globalScope.cleanupTasks) {\n      task();\n    }\n    origClose();\n  };\n}\n\n/**\n * Subscribes a provided callback to the time/event when the agent should treat it as end-of-life.\n * This is used, for example, to submit a final harvest and send all remaining data on best-effort.\n * @param {function} cb - func to run before or during the last reliable event or time of an env's life span\n */\nexport function subscribeToEOL(cb) {\n  if (isBrowserScope) {\n    subscribeToVisibilityChange(cb, true); // when user switches tab or hides window, esp. mobile scenario\n    windowAddEventListener('pagehide', cb); // when user navigates away, and because safari iOS v14.4- doesn't fully support vis change\n    // --this ought to be removed once support for version below 14.5 phases out\n  } else if (isWorkerScope) {\n    globalScope.cleanupTasks.push(cb); // close() should run these tasks before quitting thread\n  }\n  // By default (for other env), this fn has no effect.\n}","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nconst canonicalFunctionNameRe = /([a-z0-9]+)$/i;\n\n/**\n * Given a function name string, extracts only an alphanumeric segment at the end of the string (if one exists).\n * This is useful for stack traces, where functions might not be named (e.g., anonymous, computed).\n *\n * @param {string} functionNameString - The original function name string.\n * @returns {string|undefined} The canonical function name, or undefined if the input is falsy or no alphanumeric segments are found.\n */\nexport function canonicalFunctionName(functionNameString) {\n  if (!functionNameString) return;\n  const match = functionNameString.match(canonicalFunctionNameRe);\n  if (match) return match[1];\n}","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar stripNewlinesRegex = /^\\n+|\\n+$/g;\nvar MAX_STACK_TRACE_LENGTH = 65530;\nexport function formatStackTrace(stackLines) {\n  return truncateStackLines(stackLines).replace(stripNewlinesRegex, '');\n}\n\n// takes array of stack lines and returns string with top 50 and buttom 50 lines\nfunction truncateStackLines(stackLines) {\n  var stackString;\n  if (stackLines.length > 100) {\n    var truncatedLines = stackLines.length - 100;\n    stackString = stackLines.slice(0, 50).join('\\n');\n    stackString += '\\n< ...truncated ' + truncatedLines + ' lines... >\\n';\n    stackString += stackLines.slice(-50).join('\\n');\n  } else {\n    stackString = stackLines.join('\\n');\n  }\n  return stackString;\n}\n\n// truncates stack string to limit what is sent to backend\nexport function truncateSize(stackString) {\n  return stackString.length > MAX_STACK_TRACE_LENGTH ? stackString.substr(0, MAX_STACK_TRACE_LENGTH) : stackString;\n}","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { initialLocation } from '../constants/runtime';\nimport { cleanURL } from './clean-url';\n\n/**\n * Converts a URL to its basic form without a query string or fragment. If the resulting URL is the same as the\n * loader's origin URL, returns '<inline>'.\n * @param {string} url - The URL to be canonicalized.\n * @param {string} loaderOriginUrl - The origin URL of the agent loader, used for inline detection.\n * @returns {string} The canonicalized URL, or '<inline>' if the URL matches the loader origin URL.\n */\nexport function canonicalizeUrl(url) {\n  if (typeof url !== 'string') return '';\n  const cleanedUrl = cleanURL(url);\n  const cleanedGlobalScopeUrl = cleanURL(initialLocation);\n\n  // If the URL matches the origin URL of the loader, we assume it originated within an inline script.\n  if (cleanedUrl === cleanedGlobalScopeUrl) {\n    return '<inline>';\n  } else {\n    return cleanedUrl;\n  }\n}","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/* eslint-disable no-useless-escape */\n\n// computeStackTrace: cross-browser stack traces in JavaScript\n//\n// Syntax:\n//   s = computeStackTrace(exception) // consider using TraceKit.report instead\n// Returns:\n//   s.name              - exception name\n//   s.message           - exception message\n//   s.stack[i].url      - JavaScript or HTML file URL\n//   s.stack[i].func     - function name, or empty for anonymous functions\n//   s.stack[i].line     - line number, if known\n//   s.stack[i].column   - column number, if known\n//   s.stack[i].context  - an array of source code lines; the middle element corresponds to the correct line#\n//   s.mode              - 'stack', 'stacktrace', 'multiline', 'callers', 'onerror', or 'failed' -- method used to collect the stack trace\n//\n// Supports:\n//   - Firefox:  full stack trace with line numbers and unreliable column\n//               number on top frame\n//   - Chrome:   full stack trace with line and column numbers\n//   - Safari:   line and column number for the topmost stacktrace element\n//               only\n//   - IE:       no line numbers whatsoever\n\n// Contents of Exception in various browsers.\n//\n// SAFARI:\n// ex.message = Can't find variable: qq\n// ex.line = 59\n// ex.sourceId = 580238192\n// ex.sourceURL = http://...\n// ex.expressionBeginOffset = 96\n// ex.expressionCaretOffset = 98\n// ex.expressionEndOffset = 98\n// ex.name = ReferenceError\n//\n// FIREFOX:\n// ex.message = qq is not defined\n// ex.fileName = http://...\n// ex.lineNumber = 59\n// ex.stack = ...stack trace... (see the example below)\n// ex.name = ReferenceError\n//\n// CHROME:\n// ex.message = qq is not defined\n// ex.name = ReferenceError\n// ex.type = not_defined\n// ex.arguments = ['aa']\n// ex.stack = ...stack trace...\n//\n// INTERNET EXPLORER:\n// ex.message = ...\n// ex.name = ReferenceError\nimport { formatStackTrace } from './format-stack-trace';\nimport { canonicalizeUrl } from '../../../common/url/canonicalize-url';\nvar debug = false;\nvar classNameRegex = /function (.+?)\\s*\\(/;\nvar chrome = /^\\s*at (?:((?:\\[object object\\])?(?:[^(]*\\([^)]*\\))*[^()]*(?: \\[as \\S+\\])?) )?\\(?((?:file|http|https|chrome-extension):.*?)?:(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nvar gecko = /^\\s*(?:(\\S*|global code)(?:\\(.*?\\))?@)?((?:file|http|https|chrome|safari-extension).*?):(\\d+)(?::(\\d+))?\\s*$/i;\nvar chromeEval = /^\\s*at .+ \\(eval at \\S+ \\((?:(?:file|http|https):[^)]+)?\\)(?:, [^:]*:\\d+:\\d+)?\\)$/i;\nvar ieEval = /^\\s*at Function code \\(Function code:\\d+:\\d+\\)\\s*/i;\n\n/**\n * Represents an error with a stack trace.\n * @typedef {Object} StackInfo\n * @property {string} name - The name of the error (e.g. 'TypeError').\n * @property {string} message - The error message.\n * @property {string} stackString - The stack trace as a string.\n * @property {Array<Object>} frames - An array of frames in the stack trace.\n * @property {string} frames.url - The URL of the file containing the code for the frame.\n * @property {string} frames.func - The name of the function associated with the frame.\n * @property {number} frames.line - The line number of the code in the frame.\n */\n\n/**\n * Attempts to compute a stack trace for the given exception.\n * @param {Error} ex - The exception for which to compute the stack trace.\n * @returns {StackInfo} A stack trace object containing information about the frames on the stack.\n */\nexport function computeStackTrace(ex) {\n  var stack = null;\n  try {\n    stack = computeStackTraceFromStackProp(ex);\n    if (stack) {\n      return stack;\n    }\n  } catch (e) {\n    if (debug) {\n      throw e;\n    }\n  }\n  try {\n    stack = computeStackTraceBySourceAndLine(ex);\n    if (stack) {\n      return stack;\n    }\n  } catch (e) {\n    if (debug) {\n      throw e;\n    }\n  }\n  try {\n    stack = computeStackTraceWithMessageOnly(ex);\n    if (stack) {\n      return stack;\n    }\n  } catch (e) {\n    if (debug) {\n      throw e;\n    }\n  }\n  return {\n    mode: 'failed',\n    stackString: '',\n    frames: []\n  };\n}\n\n/**\n * Computes stack trace information from the stack property. Chrome and Gecko use this property.\n *\n * @param {Error} ex - The error object to compute the stack trace for.\n * @return {?Object.<string, *>} Stack trace information.\n */\nfunction computeStackTraceFromStackProp(ex) {\n  if (!ex.stack) {\n    return null;\n  }\n  var errorInfo = ex.stack.split('\\n').reduce(parseStackProp, {\n    frames: [],\n    stackLines: [],\n    wrapperSeen: false\n  });\n  if (!errorInfo.frames.length) return null;\n  return {\n    mode: 'stack',\n    name: ex.name || getClassName(ex),\n    message: ex.message,\n    stackString: formatStackTrace(errorInfo.stackLines),\n    frames: errorInfo.frames\n  };\n}\n\n/**\n * Parses a line from a JavaScript error stack trace and adds it to the given `info` object.\n * Ignores all stack entries thrown from one of our wrapper functions.\n *\n * @param {object} info - The `info` object to add the parsed line to.\n * @param {string} line - The line to parse.\n * @returns {object} The `info` object with the parsed line added.\n */\nfunction parseStackProp(info, line) {\n  let element = getStackElement(line);\n\n  // This catches lines that aren't frames (like the first line stating the error).\n  if (!element) {\n    info.stackLines.push(line);\n    return info;\n  }\n\n  // Once we've seen a wrapper, ignore all subsequent stack entries.\n  if (isNrWrapper(element.func)) info.wrapperSeen = true;\n  if (!info.wrapperSeen) {\n    // Query strings and fragments should be removed, and URLs matching the loader's origin should be \"<inline>\".\n    let canonicalUrl = canonicalizeUrl(element.url);\n    if (canonicalUrl !== element.url) {\n      line = line.replace(element.url, canonicalUrl);\n      element.url = canonicalUrl;\n    }\n    info.stackLines.push(line);\n    info.frames.push(element);\n  }\n  return info;\n}\n\n/**\n * Parses a line from a JavaScript error stack trace to extract information about a stack trace element, such as the\n * URL, function name, line number, and column number.\n *\n * @param {string} line - A single line from a JavaScript error stack trace.\n * @returns {object} An object containing information about the stack trace element, including the URL, function\n *     name, line number, and column number (if available).\n */\nfunction getStackElement(line) {\n  var parts = line.match(gecko);\n  if (!parts) parts = line.match(chrome);\n  if (parts) {\n    return {\n      url: parts[2],\n      func: parts[1] !== 'Anonymous function' && parts[1] !== 'global code' && parts[1] || null,\n      line: +parts[3],\n      column: parts[4] ? +parts[4] : null\n    };\n  }\n  if (line.match(chromeEval) || line.match(ieEval) || line === 'anonymous') {\n    return {\n      func: 'evaluated code'\n    };\n  }\n}\n\n/**\n * Computes a stack trace object from an error object, by extracting the source and line number from the error object,\n * and using them to create a single stack frame.\n *\n * @param {Error} ex - The error object to compute the stack trace for.\n * @returns {Object|null} - An object representing the computed stack trace, or null if the\n * input error object does not contain a line number.\n */\nfunction computeStackTraceBySourceAndLine(ex) {\n  if (!('line' in ex)) return null;\n  var className = ex.name || getClassName(ex);\n\n  // Safari does not provide a URL for errors in eval'd code\n  if (!ex.sourceURL) {\n    return {\n      mode: 'sourceline',\n      name: className,\n      message: ex.message,\n      stackString: className + ': ' + ex.message + '\\n    in evaluated code',\n      frames: [{\n        func: 'evaluated code'\n      }]\n    };\n  }\n\n  // Remove any query string and fragment\n  var canonicalUrl = canonicalizeUrl(ex.sourceURL);\n  var stackString = className + ': ' + ex.message + '\\n    at ' + canonicalUrl;\n  if (ex.line) {\n    stackString += ':' + ex.line;\n    if (ex.column) {\n      stackString += ':' + ex.column;\n    }\n  }\n  return {\n    mode: 'sourceline',\n    name: className,\n    message: ex.message,\n    stackString,\n    frames: [{\n      url: canonicalUrl,\n      line: ex.line,\n      column: ex.column\n    }]\n  };\n}\n\n/**\n * For exceptions with no stack and only a message, derives a stack trace by extracting the class name and message.\n *\n * @param {Error} ex - The exception for which to compute the stack trace.\n * @returns {StackTrace} A stack trace object containing the name and message of the exception.\n */\nfunction computeStackTraceWithMessageOnly(ex) {\n  var className = ex.name || getClassName(ex);\n  if (!className) return null;\n  return {\n    mode: 'nameonly',\n    name: className,\n    message: ex.message,\n    stackString: className + ': ' + ex.message,\n    frames: []\n  };\n}\n\n/**\n * Attempts to extract the name of the constructor function (the class) of the given object.\n *\n * @param {Object} obj - The object for which to extract the constructor function name.\n * @returns {string} The name of the constructor function, or 'unknown' if the name cannot be determined.\n */\nfunction getClassName(obj) {\n  var results = classNameRegex.exec(String(obj.constructor));\n  return results && results.length > 1 ? results[1] : 'unknown';\n}\n\n/**\n * Checks whether the given function name is a New Relic wrapper function.\n *\n * @param {string} functionName - The name of the function to check.\n * @returns {boolean} True if the function name includes the string 'nrWrapper', false otherwise.\n */\nfunction isNrWrapper(functionName) {\n  return functionName && functionName.indexOf('nrWrapper') >= 0;\n}","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport function stringHashCode(string) {\n  var hash = 0;\n  var charVal;\n  if (!string || !string.length) return hash;\n  for (var i = 0; i < string.length; i++) {\n    charVal = string.charCodeAt(i);\n    hash = (hash << 5) - hash + charVal;\n    hash = hash | 0; // Convert to 32bit integer\n  }\n\n  return hash;\n}","/*\n * Copyright 2020 New Relic Corporation. All rights reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { canonicalFunctionName } from './canonical-function-name';\nimport { computeStackTrace } from './compute-stack-trace';\nimport { stringHashCode } from './string-hash-code';\nimport { truncateSize } from './format-stack-trace';\nimport { registerHandler as register } from '../../../common/event-emitter/register-handler';\nimport { HarvestScheduler } from '../../../common/harvest/harvest-scheduler';\nimport { stringify } from '../../../common/util/stringify';\nimport { handle } from '../../../common/event-emitter/handle';\nimport { mapOwn } from '../../../common/util/map-own';\nimport { getInfo, getConfigurationValue, getRuntime } from '../../../common/config/config';\nimport { now } from '../../../common/timing/now';\nimport { globalScope } from '../../../common/constants/runtime';\nimport { FEATURE_NAME } from '../constants';\nimport { FEATURE_NAMES } from '../../../loaders/features/features';\nimport { AggregateBase } from '../../utils/aggregate-base';\n\n/**\n * @typedef {import('./compute-stack-trace.js').StackInfo} StackInfo\n */\n\nexport class Aggregate extends AggregateBase {\n  static featureName = FEATURE_NAME;\n  constructor(agentIdentifier, aggregator) {\n    var _this;\n    super(agentIdentifier, aggregator, FEATURE_NAME);\n    _this = this;\n    this.stackReported = {};\n    this.observedAt = {};\n    this.pageviewReported = {};\n    this.errorCache = {};\n    this.currentBody = undefined;\n    this.errorOnPage = false;\n\n    // this will need to change to match whatever ee we use in the instrument\n    this.ee.on('interactionSaved', interaction => this.onInteractionSaved(interaction));\n\n    // this will need to change to match whatever ee we use in the instrument\n    this.ee.on('interactionDiscarded', interaction => this.onInteractionDiscarded(interaction));\n    register('err', function () {\n      return _this.storeError(...arguments);\n    }, this.featureName, this.ee);\n    register('ierr', function () {\n      return _this.storeError(...arguments);\n    }, this.featureName, this.ee);\n    const harvestTimeSeconds = getConfigurationValue(this.agentIdentifier, 'jserrors.harvestTimeSeconds') || 10;\n    const scheduler = new HarvestScheduler('jserrors', {\n      onFinished: function () {\n        return _this.onHarvestFinished(...arguments);\n      }\n    }, this);\n    scheduler.harvest.on('jserrors', function () {\n      return _this.onHarvestStarted(...arguments);\n    });\n\n    // Don't start harvesting until \"drain\" for this feat has been called (which currently requires RUM response).\n    this.ee.on(\"drain-\".concat(this.featureName), () => {\n      if (!this.blocked) scheduler.startTimer(harvestTimeSeconds); // and only if ingest will accept jserror payloads\n    });\n\n    // If RUM-call's response determines that customer lacks entitlements for the /jserror ingest endpoint, don't harvest at all.\n    register('block-err', () => {\n      this.blocked = true;\n      scheduler.stopTimer(true);\n    }, this.featureName, this.ee);\n    this.drain();\n  }\n  onHarvestStarted(options) {\n    // this gets rid of dependency in AJAX module\n    var body = this.aggregator.take(['err', 'ierr', 'xhr']);\n    if (options.retry) {\n      this.currentBody = body;\n    }\n    var payload = {\n      body,\n      qs: {}\n    };\n    var releaseIds = stringify(getRuntime(this.agentIdentifier).releaseIds);\n    if (releaseIds !== '{}') {\n      payload.qs.ri = releaseIds;\n    }\n    if (body && body.err && body.err.length && !this.errorOnPage) {\n      payload.qs.pve = '1';\n      this.errorOnPage = true;\n    }\n    return payload;\n  }\n  onHarvestFinished(result) {\n    if (result.retry && this.currentBody) {\n      mapOwn(this.currentBody, (key, value) => {\n        for (var i = 0; i < value.length; i++) {\n          var bucket = value[i];\n          var name = this.getBucketName(key, bucket.params, bucket.custom);\n          this.aggregator.merge(key, name, bucket.metrics, bucket.params, bucket.custom);\n        }\n      });\n      this.currentBody = null;\n    }\n  }\n  nameHash(params) {\n    return stringHashCode(\"\".concat(params.exceptionClass, \"_\").concat(params.message, \"_\").concat(params.stack_trace || params.browser_stack_hash));\n  }\n  getBucketName(objType, params, customParams) {\n    if (objType === 'xhr') {\n      return stringHashCode(stringify(params)) + ':' + stringHashCode(stringify(customParams));\n    }\n    return this.nameHash(params) + ':' + stringHashCode(stringify(customParams));\n  }\n\n  /**\n   * Builds a standardized stack trace string from the frames in the given `stackInfo` object, with each frame separated\n   * by a newline character. Lines take the form `<functionName>@<url>:<lineNumber>`.\n   *\n   * @param {StackInfo} stackInfo - An object specifying a stack string and individual frames.\n   * @returns {string} A canonical stack string built from the URLs and function names in the given `stackInfo` object.\n   */\n  buildCanonicalStackString(stackInfo) {\n    var canonicalStackString = '';\n    for (var i = 0; i < stackInfo.frames.length; i++) {\n      var frame = stackInfo.frames[i];\n      var func = canonicalFunctionName(frame.func);\n      if (canonicalStackString) canonicalStackString += '\\n';\n      if (func) canonicalStackString += func + '@';\n      if (typeof frame.url === 'string') canonicalStackString += frame.url;\n      if (frame.line) canonicalStackString += ':' + frame.line;\n    }\n    return canonicalStackString;\n  }\n  storeError(err, time, internal, customAttributes) {\n    // are we in an interaction\n    time = time || now();\n    const agentRuntime = getRuntime(this.agentIdentifier);\n    let filterOutput;\n    if (!internal && agentRuntime.onerror) {\n      filterOutput = agentRuntime.onerror(err);\n      if (filterOutput && !(typeof filterOutput.group === 'string' && filterOutput.group.length)) {\n        // All truthy values mean don't report (store) the error, per backwards-compatible usage,\n        // - EXCEPT if a fingerprinting label is returned, via an object with key of 'group' and value of non-empty string\n        return;\n      }\n      // Again as with previous usage, all falsey values would include the error.\n    }\n\n    var stackInfo = computeStackTrace(err);\n    var canonicalStackString = this.buildCanonicalStackString(stackInfo);\n    const params = {\n      stackHash: stringHashCode(canonicalStackString),\n      exceptionClass: stackInfo.name,\n      request_uri: globalScope?.location.pathname\n    };\n    if (stackInfo.message) params.message = '' + stackInfo.message;\n    // Notice if filterOutput isn't false|undefined OR our specified object, this func would've returned already (so it's unnecessary to req-check group).\n    // Do not modify the name ('errorGroup') of params without DEM approval!\n    if (filterOutput?.group) params.errorGroup = filterOutput.group;\n\n    /**\n     * The bucketHash is different from the params.stackHash because the params.stackHash is based on the canonicalized\n     * stack trace and is used downstream in NR1 to attempt to group the same errors across different browsers. However,\n     * the canonical stack trace excludes items like the column number increasing the hit-rate of different errors potentially\n     * bucketing and ultimately resulting in the loss of data in NR1.\n     */\n    var bucketHash = stringHashCode(\"\".concat(stackInfo.name, \"_\").concat(stackInfo.message, \"_\").concat(stackInfo.stackString));\n    if (!this.stackReported[bucketHash]) {\n      this.stackReported[bucketHash] = true;\n      params.stack_trace = truncateSize(stackInfo.stackString);\n      this.observedAt[bucketHash] = agentRuntime.offset + time;\n    } else {\n      params.browser_stack_hash = stringHashCode(stackInfo.stackString);\n    }\n    params.releaseIds = stringify(agentRuntime.releaseIds);\n\n    // When debugging stack canonicalization/hashing, uncomment these lines for\n    // more output in the test logs\n    // params.origStack = err.stack\n    // params.canonicalStack = canonicalStack\n\n    if (!this.pageviewReported[bucketHash]) {\n      params.pageview = 1;\n      this.pageviewReported[bucketHash] = true;\n    }\n    if (agentRuntime?.session?.state?.sessionReplayMode) params.hasReplay = true;\n    params.firstOccurrenceTimestamp = this.observedAt[bucketHash];\n    var type = internal ? 'ierr' : 'err';\n    var newMetrics = {\n      time\n    };\n\n    // sr, stn and spa aggregators listen to this event - stn sends the error in its payload,\n    // and spa annotates the error with interaction info\n    const msg = [type, bucketHash, params, newMetrics];\n    handle('errorAgg', msg, undefined, FEATURE_NAMES.sessionTrace, this.ee);\n    handle('errorAgg', msg, undefined, FEATURE_NAMES.spa, this.ee);\n    handle('errorAgg', msg, undefined, FEATURE_NAMES.sessionReplay, this.ee);\n\n    // still send EE events for other features such as above, but stop this one from aggregating internal data\n    if (this.blocked) return;\n    var att = getInfo(this.agentIdentifier).jsAttributes;\n    if (params._interactionId != null) {\n      // hold on to the error until the interaction finishes\n      this.errorCache[params._interactionId] = this.errorCache[params._interactionId] || [];\n      this.errorCache[params._interactionId].push([type, bucketHash, params, newMetrics, att, customAttributes]);\n    } else {\n      // store custom attributes\n      var customParams = {};\n      mapOwn(att, setCustom);\n      if (customAttributes) {\n        mapOwn(customAttributes, setCustom);\n      }\n      var jsAttributesHash = stringHashCode(stringify(customParams));\n      var aggregateHash = bucketHash + ':' + jsAttributesHash;\n      this.aggregator.store(type, aggregateHash, params, newMetrics, customParams);\n    }\n    function setCustom(key, val) {\n      customParams[key] = val && typeof val === 'object' ? stringify(val) : val;\n    }\n  }\n  onInteractionSaved(interaction) {\n    if (!this.errorCache[interaction.id] || this.blocked) return;\n    this.errorCache[interaction.id].forEach(item => {\n      var customParams = {};\n      var globalCustomParams = item[4];\n      var localCustomParams = item[5];\n      mapOwn(globalCustomParams, setCustom);\n      mapOwn(interaction.root.attrs.custom, setCustom);\n      mapOwn(localCustomParams, setCustom);\n      var params = item[2];\n      params.browserInteractionId = interaction.root.attrs.id;\n      delete params._interactionId;\n      if (params._interactionNodeId) {\n        params.parentNodeId = params._interactionNodeId.toString();\n        delete params._interactionNodeId;\n      }\n      var hash = item[1] + interaction.root.attrs.id;\n      var jsAttributesHash = stringHashCode(stringify(customParams));\n      var aggregateHash = hash + ':' + jsAttributesHash;\n      this.aggregator.store(item[0], aggregateHash, params, item[3], customParams);\n      function setCustom(key, val) {\n        customParams[key] = val && typeof val === 'object' ? stringify(val) : val;\n      }\n    });\n    delete this.errorCache[interaction.id];\n  }\n  onInteractionDiscarded(interaction) {\n    if (!this.errorCache || !this.errorCache[interaction.id] || this.blocked) return;\n    this.errorCache[interaction.id].forEach(item => {\n      var customParams = {};\n      var globalCustomParams = item[4];\n      var localCustomParams = item[5];\n      mapOwn(globalCustomParams, setCustom);\n      mapOwn(interaction.root.attrs.custom, setCustom);\n      mapOwn(localCustomParams, setCustom);\n      var params = item[2];\n      delete params._interactionId;\n      delete params._interactionNodeId;\n      var hash = item[1];\n      var jsAttributesHash = stringHashCode(stringify(customParams));\n      var aggregateHash = hash + ':' + jsAttributesHash;\n      this.aggregator.store(item[0], aggregateHash, item[2], item[3], customParams);\n      function setCustom(key, val) {\n        customParams[key] = val && typeof val === 'object' ? stringify(val) : val;\n      }\n    });\n    delete this.errorCache[interaction.id];\n  }\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}"],"names":["HarvestScheduler","_SharedContext","_inherits","_super","_createSuper","endpoint","opts","parent","_this$sharedContext","_this","_classCallCheck","call","started","timeoutHandle","aborted","harvest","Harvest","sharedContext","subscribeToEOL","unload","bind","_assertThisInitialized","ee","on","SESSION_EVENTS","RESET","runHarvest","forceNoRetry","_createClass","key","value","this","onUnload","interval","initialDelay","scheduleHarvest","permanently","arguments","length","undefined","clearTimeout","delay","_this2","setTimeout","_this3","submitMethod","payload","cbRanAfterSend","result","retry","onHarvestFinished","harvests","getPayload","submitData","isFinalHarvest","Object","prototype","toString","push","apply","_toConsumableArray","send","args","sendX","raw","_send","forEach","cbFinished","customUrl","onFinished","sent","retryDelay","SharedContext","isWorkerScope","globalScope","cleanupTasks","origClose","close","_step","_iterator","_createForOfIteratorHelper","s","n","done","task","err","e","f","cb","isBrowserScope","subscribeToVisibilityChange","windowAddEventListener","canonicalFunctionNameRe","canonicalFunctionName","functionNameString","match","stripNewlinesRegex","formatStackTrace","stackLines","stackString","truncatedLines","slice","join","truncateStackLines","replace","canonicalizeUrl","url","cleanedUrl","cleanURL","initialLocation","debug","classNameRegex","chrome","gecko","chromeEval","ieEval","computeStackTrace","ex","stack","errorInfo","split","reduce","parseStackProp","frames","wrapperSeen","mode","name","getClassName","message","computeStackTraceFromStackProp","className","sourceURL","func","canonicalUrl","line","column","computeStackTraceBySourceAndLine","computeStackTraceWithMessageOnly","info","functionName","element","parts","getStackElement","indexOf","obj","results","exec","String","constructor","stringHashCode","string","hash","i","charCodeAt","Aggregate","_AggregateBase","agentIdentifier","aggregator","FEATURE_NAME","stackReported","observedAt","pageviewReported","errorCache","currentBody","errorOnPage","interaction","onInteractionSaved","onInteractionDiscarded","register","storeError","featureName","_this4","harvestTimeSeconds","getConfigurationValue","scheduler","_this5","_this6","onHarvestStarted","concat","blocked","startTimer","stopTimer","drain","options","body","take","qs","releaseIds","stringify","getRuntime","ri","pve","_this7","mapOwn","bucket","getBucketName","params","custom","merge","metrics","exceptionClass","stack_trace","browser_stack_hash","objType","customParams","nameHash","stackInfo","canonicalStackString","frame","time","internal","customAttributes","_filterOutput","_agentRuntime$session","now","filterOutput","agentRuntime","onerror","group","stackHash","buildCanonicalStackString","request_uri","location","pathname","errorGroup","bucketHash","substr","offset","pageview","session","state","sessionReplayMode","hasReplay","firstOccurrenceTimestamp","type","newMetrics","msg","handle","FEATURE_NAMES","sessionTrace","spa","sessionReplay","att","getInfo","jsAttributes","_interactionId","setCustom","aggregateHash","store","val","_this8","id","item","globalCustomParams","localCustomParams","root","attrs","browserInteractionId","_interactionNodeId","parentNodeId","_this9","AggregateBase","_defineProperty","o","allowArrayLike","it","Symbol","iterator","Array","isArray","F","_e","TypeError","normalCompletion","didErr","step","next","_e2"],"sourceRoot":""}