"use strict";(self.webpackChunknrug_arrival_form_frontend=self.webpackChunknrug_arrival_form_frontend||[]).push([[193],{6945:function(e,t,n){var r;n.d(t,{m:function(){return i}});var s=new Promise((function(e){r=e})),i=Object.freeze({onReplayReady:r,sessionReplayInitialized:s})},7661:function(e,t,n){n.d(t,{o:function(){return v}});var r=n(2982),s=n(5671),i=n(3144),a=n(7326),o=n(136),u=n(9388),c=n(3197),l=n(3114),h=n(2041),f=n(8464),d=n(9471),v=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i){var o,u;return(0,s.Z)(this,n),(u=t.call(this,i)).endpoint=e,u.opts=r||{},u.started=!1,u.timeoutHandle=null,u.aborted=!1,u.harvest=new h.M(u.sharedContext),(0,f.L)(u.unload.bind((0,a.Z)(u))),null===(o=u.sharedContext)||void 0===o||o.ee.on(d.wO.RESET,(function(){return u.runHarvest({forceNoRetry:!0})})),u}return(0,i.Z)(n,[{key:"unload",value:function(){this.aborted||(this.opts.onUnload&&this.opts.onUnload(),this.runHarvest({unload:!0}))}},{key:"startTimer",value:function(e,t){this.interval=e,this.started=!0,this.scheduleHarvest(null!=t?t:this.interval)}},{key:"stopTimer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.aborted=e,this.started=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)}},{key:"scheduleHarvest",value:function(e,t){var n=this;this.timeoutHandle||(null==e&&(e=this.interval),this.timeoutHandle=setTimeout((function(){n.timeoutHandle=null,n.runHarvest(t)}),1e3*e))}},{key:"runHarvest",value:function(e){var t=this;if(!this.aborted){var n,s,i=function(n){null!==e&&void 0!==e&&e.forceNoRetry&&(n.retry=!1),t.onHarvestFinished(e,n)},a=[];if(this.opts.getPayload){if(!(n=c.qD({isFinalHarvest:null===e||void 0===e?void 0:e.unload})))return!1;var o=!(null!==e&&void 0!==e&&e.unload)&&n===c.Be;if(!(s=this.opts.getPayload({retry:o})))return void(this.started&&this.scheduleHarvest());s="[object Array]"===Object.prototype.toString.call(s)?s:[s],a.push.apply(a,(0,r.Z)(s))}var u=function(e){return t.harvest.sendX(e)};a.length?u=this.opts.raw?function(e){return t.harvest._send(e)}:function(e){return t.harvest.send(e)}:a.push(void 0),a.forEach((function(r){u({endpoint:t.endpoint,payload:r,opts:e,submitMethod:n,cbFinished:i,customUrl:t.opts.customUrl,raw:t.opts.raw})})),this.started&&this.scheduleHarvest()}}},{key:"onHarvestFinished",value:function(e,t){if(this.opts.onFinished&&this.opts.onFinished(t),t.sent&&t.retry){var n=t.delay||this.opts.retryDelay;this.started&&n?(clearTimeout(this.timeoutHandle),this.timeoutHandle=null,this.scheduleHarvest(n,e)):!this.started&&n&&this.scheduleHarvest(n,e)}}}]),n}(l.w)},8464:function(e,t,n){n.d(t,{L:function(){return u}});var r=n(7762),s=n(1997),i=n(3980),a=n(536);if(i.v6){i._A.cleanupTasks=[];var o=i._A.close;i._A.close=function(){var e,t=(0,r.Z)(i._A.cleanupTasks);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}o()}}function u(e){i.il?((0,a.N)(e,!0),(0,s.bP)("pagehide",e)):i.v6&&i._A.cleanupTasks.push(e)}},394:function(e,t,n){n.r(t),n.d(t,{Aggregate:function(){return G}});var r=n(1413),s=n(4165),i=n(885),a=n(5861),o=n(5671),u=n(3144),c=n(2963),l=n(7326),h=n(136),f=n(9388),d=n(101),v=n(2346),p=n(4942),m=n(3889);var y=n(1519);function g(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,(0,y.Z)(e,t,"set"),n),n}var Z=n(6033),w=n(4613),b=n(7661),T=n(4522),k=n(8958),R=n(6276),S=n(7772),N=new WeakMap,H=new WeakMap,O=new WeakMap,A=new WeakMap,F=new WeakSet,x=new WeakSet,E=function(){function e(){var t=this;(0,o.Z)(this,e),(0,d.Z)(this,x),(0,d.Z)(this,F),(0,v.Z)(this,N,{writable:!0,value:void 0}),(0,v.Z)(this,H,{writable:!0,value:[]}),(0,v.Z)(this,O,{writable:!0,value:setTimeout((function(){return(0,m.Z)(t,x,I).call(t)}),5e3)}),(0,v.Z)(this,A,{writable:!0,value:!1})}return(0,u.Z)(e,[{key:"settle",value:function(e){!1===(0,Z.Z)(this,N)||(void 0===(0,Z.Z)(this,N)?(0,Z.Z)(this,H).push(e):e())}},{key:"decide",value:function(e){(0,Z.Z)(this,A)||(g(this,N,e),!1===e&&(0,m.Z)(this,x,I).call(this),!0===e&&(0,m.Z)(this,F,M).call(this))}},{key:"permanentlyDecide",value:function(e){(0,Z.Z)(this,A)||(this.decide(e),g(this,A,!0))}}]),e}();function M(){(0,Z.Z)(this,H).forEach((function(e){return e()})),(0,m.Z)(this,x,I).call(this)}function I(){g(this,H,[]),clearTimeout((0,Z.Z)(this,O))}var K=n(9471),L=n(9700),_=n(6945);function P(e){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=(0,L.fP)(),!(0,k.Mt)(t,"session_replay.enabled")||"object"!==typeof n.initializedAgents[t].features.session_replay){e.next=10;break}return e.next=5,n.initializedAgents[t].features.session_replay.onAggregateImported;case 5:if(!e.sent){e.next=10;break}return e.next=9,_.m.sessionReplayInitialized;case 9:return e.abrupt("return",e.sent);case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:return e.abrupt("return",K.IK.OFF);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var X=n(1527),j={global:{mouseup:!0,mousedown:!0},window:{load:!0,pagehide:!0},xhrOriginMissing:{ignoreAll:!0}},U={typing:[1e3,2e3],scrolling:[100,1e3],mousing:[1e3,2e3],touching:[1e3,2e3]},W=6e5,z=new WeakMap,D=new WeakSet,B=new WeakSet,q=new WeakMap,G=function(e){(0,h.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,u){var h,f;if((0,o.Z)(this,n),h=t.call(this,e,r,S.t9),(0,d.Z)((0,l.Z)(h),B),(0,d.Z)((0,l.Z)(h),D),(0,v.Z)((0,l.Z)(h),z,{writable:!0,value:void 0}),(0,v.Z)((0,l.Z)(h),q,{writable:!0,value:0}),f=(0,l.Z)(h),h.agentRuntime=(0,k.OP)(e),!h.agentRuntime.xhrWrappable)return(0,c.Z)(h);h.resourceObserver=null===u||void 0===u?void 0:u.resourceObserver,h.ptid="",h.trace={},h.nodeCount=0,h.sentTrace=null,h.harvestTimeSeconds=(0,k.Mt)(e,"session_trace.harvestTimeSeconds")||10,h.maxNodesPerHarvest=(0,k.Mt)(e,"session_trace.maxNodesPerHarvest")||1e3,h.isStandalone=!1;var p=new E,m=h.agentRuntime.session;h.operationalGate=p;var y=function(e){switch(e){case K.IK.ERROR:h.startTracing(p,!0);break;case K.IK.FULL:case!0:h.startTracing(p);break;case K.IK.OFF:default:p.decide(!1)}};if(m){var b,T=!1;(0,w.X)("errorAgg",(function(){T||(T=!0,m.state.sessionTraceMode===K.IK.ERROR&&(0,Z.Z)((0,l.Z)(h),z)&&(m.write({sessionTraceMode:b=K.IK.FULL}),h.trimSTNs(3e4),(0,Z.Z)((0,l.Z)(h),z).runHarvest({needResponse:!0})))}),h.featureName,h.ee);var R=function(){var e,t;m.state.sessionTraceMode!==K.IK.OFF&&m.write({sessionTraceMode:K.IK.OFF}),p.permanentlyDecide(!1),b===K.IK.FULL&&(null===(e=(0,Z.Z)((0,l.Z)(h),z))||void 0===e||e.runHarvest()),null===(t=(0,Z.Z)((0,l.Z)(h),z))||void 0===t||t.stopTimer(!0),g((0,l.Z)(h),z,null)};h.waitForFlags(["stn","sr"]).then(function(){var t=(0,a.Z)((0,s.Z)().mark((function t(n){var r,a,o,u;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(0,i.Z)(n,2),a=r[0],r[1]){t.next=6;break}h.isStandalone=!0,y(a),t.next=21;break;case 6:if(h.ee.on("REPLAY_ABORTED",(function(){return R()})),h.ee.on(K.wO.RESUME,(function(){var e=m.state.sessionTraceMode;e===K.IK.OFF?R():e===K.IK.FULL&&(0,Z.Z)((0,l.Z)(h),z)&&!(0,Z.Z)((0,l.Z)(h),z).started&&(0,Z.Z)((0,l.Z)(h),z).runHarvest({needResponse:!0}),b=e})),h.ee.on(K.wO.PAUSE,(function(){b=m.state.sessionTraceMode})),m.isNew){t.next=14;break}m.state.sessionReplayMode===K.IK.OFF&&(h.isStandalone=!0),y(b=m.state.sessionTraceMode),t.next=21;break;case 14:return t.next=16,P(e);case 16:(o=t.sent)===K.IK.OFF&&(h.isStandalone=!0),u=!0===a||o===K.IK.ERROR&&T?K.IK.FULL:o,m.write({sessionTraceMode:b=u}),y(u);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}else h.isStandalone=!0,(0,w.X)("rumresp-stn",(function(e){return y(e)}),h.featureName,h.ee);return(0,w.X)("bst",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.settle((function(){var e;return(e=f).storeEvent.apply(e,t)}))}),h.featureName,h.ee),(0,w.X)("bstResource",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.settle((function(){var e;return(e=f).storeResources.apply(e,t)}))}),h.featureName,h.ee),(0,w.X)("bstHist",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.settle((function(){var e;return(e=f).storeHist.apply(e,t)}))}),h.featureName,h.ee),(0,w.X)("bstXhrAgg",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.settle((function(){var e;return(e=f).storeXhrAgg.apply(e,t)}))}),h.featureName,h.ee),(0,w.X)("bstApi",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.settle((function(){var e;return(e=f).storeSTN.apply(e,t)}))}),h.featureName,h.ee),(0,w.X)("errorAgg",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.settle((function(){var e;return(e=f).storeErrorAgg.apply(e,t)}))}),h.featureName,h.ee),(0,w.X)("pvtAdded",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.settle((function(){var e;return(e=f).processPVT.apply(e,t)}))}),h.featureName,h.ee),h.drain(),h}return(0,u.Z)(n,[{key:"startTracing",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"undefined"!==typeof PerformanceNavigationTiming?this.storeTiming(window.performance.getEntriesByType("navigation")[0]):this.storeTiming(window.performance.timing),g(this,z,new b.o("resources",{onFinished:(0,m.Z)(this,D,V).bind(this),retryDelay:this.harvestTimeSeconds},this)),(0,Z.Z)(this,z).harvest.on("resources",(0,m.Z)(this,B,Y).bind(this)),!1===t&&(0,Z.Z)(this,z).runHarvest({needResponse:!0}),e.decide(!0)}},{key:"processPVT",value:function(e,t,n){this.storeTiming((0,p.Z)({},e,t)),function(e,t){return"fi"===e&&!!t&&"number"===typeof t.fid}(e,n)&&this.storeEvent({type:"fid",target:"document"},"document",t,t+n.fid)}},{key:"storeTiming",value:function(e){if(e)for(var t in e){var n=e[t],r=t.toLowerCase();r.indexOf("size")>=0||r.indexOf("status")>=0||"number"===typeof n&&n>=0&&(n=Math.round(n),this.storeSTN({n:t,s:n,e:n,o:"document",t:"timing"}))}}},{key:"storeEvent",value:function(e,t,n,r){if(!this.shouldIgnoreEvent(e,t)){var s={n:this.evtName(e.type),s:n,e:r,t:"event"};try{s.o=this.evtOrigin(e.target,t)}catch(i){s.o=this.evtOrigin(null,t)}this.storeSTN(s)}}},{key:"shouldIgnoreEvent",value:function(e,t){var n=this.evtOrigin(e.target,t);return e.type in j.global||(!(!j[n]||!j[n].ignoreAll)||!(!j[n]||!(e.type in j[n])))}},{key:"evtName",value:function(e){switch(e){case"keydown":case"keyup":case"keypress":return"typing";case"mousemove":case"mouseenter":case"mouseleave":case"mouseover":case"mouseout":return"mousing";case"scroll":return"scrolling";case"touchstart":case"touchmove":case"touchend":case"touchcancel":case"touchenter":case"touchleave":return"touching";default:return e}}},{key:"evtOrigin",value:function(e,t){var n="unknown";if(e&&e instanceof XMLHttpRequest){var r=this.ee.context(e).params;if(!r||!r.status||!r.method||!r.host||!r.pathname)return"xhrOriginMissing";n=r.status+" "+r.method+": "+r.host+r.pathname}else if(e&&"string"===typeof e.tagName&&(n=e.tagName.toLowerCase(),e.id&&(n+="#"+e.id),e.className))for(var s=0;s<e.classList.length;s++)n+="."+e.classList[s];return"unknown"===n&&("string"===typeof t?n=t:t===document?n="document":t===window?n="window":t instanceof FileReader&&(n="FileReader")),n}},{key:"storeHist",value:function(e,t,n){var r={n:"history.pushState",s:n,e:n,o:e,t:t};this.storeSTN(r)}},{key:"storeResources",value:function(e){var t=this;e&&0!==e.length&&(e.forEach((function(e){if(!((0|e.fetchStart)<=(0,Z.Z)(t,q))){var n=(0,T.e)(e.name),r={n:e.initiatorType,s:0|e.fetchStart,e:0|e.responseEnd,o:n.protocol+"://"+n.hostname+":"+n.port+n.pathname,t:e.entryType};t.storeSTN(r)}})),g(this,q,0|e[e.length-1].fetchStart))}},{key:"storeErrorAgg",value:function(e,t,n,r){if("err"===e){var s={n:"error",s:r.time,e:r.time,o:n.message,t:n.stackHash};this.storeSTN(s)}}},{key:"storeXhrAgg",value:function(e,t,n,r){if("xhr"===e){var s={n:"Ajax",s:r.time,e:r.time+r.duration,o:n.status+" "+n.method+": "+n.host+n.pathname,t:"ajax"};this.storeSTN(s)}}},{key:"storeSTN",value:function(e){if(this.nodeCount>=this.maxNodesPerHarvest){if(this.isStandalone||this.agentRuntime.session.state.sessionTraceMode!==K.IK.ERROR)return;if(0===this.trimSTNs(3e4))return}this.isStandalone&&(0,R.z)()>=W||(this.trace[e.n]?this.trace[e.n].push(e):this.trace[e.n]=[e],this.nodeCount++)}},{key:"trimSTNs",value:function(e){var t=this,n=0,r=Math.max((0,R.z)()-e,0);return Object.keys(this.trace).forEach((function(e){var s=t.trace[e],i=s.findIndex((function(e){return r<=e.e}));0!==i&&(i<0?(i=s.length,delete t.trace[e]):s.splice(0,i),t.nodeCount-=i,n+=i)})),n}},{key:"takeSTNs",value:function(e){var t=this;this.resourceObserver||this.storeResources(window.performance.getEntriesByType("resource"));var n,s=1/0,a=Object.entries(this.trace).flatMap((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1],o=a.reduce((function(e,t){return!e||t.s<e?t.s:e}),void 0);if(o<s&&(s=o),!(r in U))return a;var u=t.smearEvtsByOrigin(r),c=a.sort((function(e,t){return e.s-t.s})).reduce(u,{});return Object.values(c).flat()}),this);if(0===a.length)return{};if(e&&(this.sentTrace=this.trace),this.trace={},this.nodeCount=0,this.agentRuntime.session){var o=!this.agentRuntime.session.state.traceHarvestStarted;n={fsh:Number(o)},o&&this.agentRuntime.session.write({traceHarvestStarted:!0})}return{qs:(0,r.Z)({st:this.agentRuntime.offset,hr:Number(!this.isStandalone),fts:this.agentRuntime.offset+s,n:a.length},n),body:{res:a}}}},{key:"smearEvtsByOrigin",value:function(e){var t=U[e][0],n=U[e][1],r={};return function(s,i){var a=s[i.o];a||(a=s[i.o]=[]);var o=r[i.o];return"scrolling"!==e||function(e){var t=4;return!!(e&&"number"===typeof e.e&&"number"===typeof e.s&&e.e-e.s<t)}(i)?o&&i.s-o.s<n&&o.e>i.s-t?o.e=i.e:(r[i.o]=i,a.push(i)):(r[i.o]=null,i.n="scroll",a.push(i)),s}}}]),n}(X.m);function V(e){var t=this;e.sent&&e.responseText&&!this.ptid&&(this.agentRuntime.ptid=this.ptid=e.responseText,(0,Z.Z)(this,z).startTimer(this.harvestTimeSeconds)),e.sent&&e.retry&&this.sentTrace&&(Object.entries(this.sentTrace).forEach((function(e){var n=(0,i.Z)(e,2),r=n[0],s=n[1];t.nodeCount>=t.maxNodesPerHarvest||(t.nodeCount+=s.length,t.trace[r]=t.trace[r]?s.concat(t.trace[r]):s)})),this.sentTrace=null)}function Y(e){if(this.isStandalone){if(this.ptid&&(0,R.z)()>=W)e.isFinalHarvest=!0,this.operationalGate.permanentlyDecide(!1),(0,Z.Z)(this,z).stopTimer(!0);else if(this.ptid&&this.nodeCount<=30&&!e.isFinalHarvest)return}else{var t=this.agentRuntime.session.state.sessionTraceMode;if(t===K.IK.OFF&&0===Object.keys(this.trace).length)return;if(t===K.IK.ERROR)return}return this.takeSTNs(e.retry)}(0,p.Z)(G,"featureName",S.t9)},7762:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(181);function s(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var s=0,i=function(){};return{s:i,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}}}]);
//# sourceMappingURL=session_trace-aggregate.fd2674a8.chunk.js.map