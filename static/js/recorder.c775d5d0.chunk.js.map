{"version":3,"file":"static/js/recorder.c775d5d0.chunk.js","mappings":"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","sources":["../node_modules/rrweb/es/rrweb/packages/rrweb-snapshot/es/rrweb-snapshot.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/utils.js","../node_modules/rrweb/es/rrweb/packages/types/dist/types.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/mutation.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/error-handler.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observer.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/cross-origin-iframe-mirror.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/iframe-manager.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/shadow-dom-manager.js","../node_modules/rrweb/es/rrweb/ext/tslib/tslib.es6.js","../node_modules/rrweb/es/rrweb/ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/serialize-args.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/canvas.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/webgl.js","../node_modules/rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js","../node_modules/rrweb/es/rrweb/_virtual/image-bitmap-data-url-worker.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/index.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/canvas-manager.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/observers/canvas/2d.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/stylesheet-manager.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/record/processed-node-manager.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/index.js","../node_modules/rrweb/es/rrweb/ext/fflate/esm/browser.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/packer/base.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/packer/pack.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/packer/unpack.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/plugins/console/record/error-stack-parser.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/plugins/console/record/stringify.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/plugins/console/record/index.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/plugins/console/replay/index.js","../node_modules/@babel/runtime/helpers/esm/get.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/rrweb/es/rrweb/packages/rrdom/es/rrdom.js","../node_modules/rrweb/es/rrweb/ext/mitt/dist/mitt.mjs.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/smoothscroll.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/timer.js","../node_modules/rrweb/es/rrweb/ext/@xstate/fsm/es/index.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/machine.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/styles/inject-style.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/canvas/deserialize-args.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/canvas/webgl.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/canvas/2d.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/canvas/index.js","../node_modules/rrweb/es/rrweb/packages/rrweb/src/replay/index.js"],"sourcesContent":["var NodeType;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\r\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\r\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\r\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\r\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\r\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\r\n})(NodeType || (NodeType = {}));\n\nfunction isElement(n) {\r\n    return n.nodeType === n.ELEMENT_NODE;\r\n}\r\nfunction isShadowRoot(n) {\r\n    var host = n === null || n === void 0 ? void 0 : n.host;\r\n    return Boolean((host === null || host === void 0 ? void 0 : host.shadowRoot) === n);\r\n}\r\nfunction isNativeShadowDom(shadowRoot) {\r\n    return Object.prototype.toString.call(shadowRoot) === '[object ShadowRoot]';\r\n}\r\nfunction fixBrowserCompatibilityIssuesInCSS(cssText) {\r\n    if (cssText.includes(' background-clip: text;') &&\r\n        !cssText.includes(' -webkit-background-clip: text;')) {\r\n        cssText = cssText.replace(' background-clip: text;', ' -webkit-background-clip: text; background-clip: text;');\r\n    }\r\n    return cssText;\r\n}\r\nfunction escapeImportStatement(rule) {\r\n    var cssText = rule.cssText;\r\n    if (cssText.split('\"').length < 3)\r\n        return cssText;\r\n    var statement = ['@import', \"url(\".concat(JSON.stringify(rule.href), \")\")];\r\n    if (rule.layerName === '') {\r\n        statement.push(\"layer\");\r\n    }\r\n    else if (rule.layerName) {\r\n        statement.push(\"layer(\".concat(rule.layerName, \")\"));\r\n    }\r\n    if (rule.supportsText) {\r\n        statement.push(\"supports(\".concat(rule.supportsText, \")\"));\r\n    }\r\n    if (rule.media.length) {\r\n        statement.push(rule.media.mediaText);\r\n    }\r\n    return statement.join(' ') + ';';\r\n}\r\nfunction stringifyStylesheet(s) {\r\n    try {\r\n        var rules = s.rules || s.cssRules;\r\n        return rules\r\n            ? fixBrowserCompatibilityIssuesInCSS(Array.from(rules).map(stringifyRule).join(''))\r\n            : null;\r\n    }\r\n    catch (error) {\r\n        return null;\r\n    }\r\n}\r\nfunction stringifyRule(rule) {\r\n    var importStringified;\r\n    if (isCSSImportRule(rule)) {\r\n        try {\r\n            importStringified =\r\n                stringifyStylesheet(rule.styleSheet) ||\r\n                    escapeImportStatement(rule);\r\n        }\r\n        catch (error) {\r\n        }\r\n    }\r\n    return validateStringifiedCssRule(importStringified || rule.cssText);\r\n}\r\nfunction validateStringifiedCssRule(cssStringified) {\r\n    if (cssStringified.includes(':')) {\r\n        var regex = /(\\[(?:[\\w-]+)[^\\\\])(:(?:[\\w-]+)\\])/gm;\r\n        return cssStringified.replace(regex, '$1\\\\$2');\r\n    }\r\n    return cssStringified;\r\n}\r\nfunction isCSSImportRule(rule) {\r\n    return 'styleSheet' in rule;\r\n}\r\nvar Mirror = (function () {\r\n    function Mirror() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    Mirror.prototype.getId = function (n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        var id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    };\r\n    Mirror.prototype.getNode = function (id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    };\r\n    Mirror.prototype.getIds = function () {\r\n        return Array.from(this.idNodeMap.keys());\r\n    };\r\n    Mirror.prototype.getMeta = function (n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    };\r\n    Mirror.prototype.removeNodeFromMap = function (n) {\r\n        var _this = this;\r\n        var id = this.getId(n);\r\n        this.idNodeMap[\"delete\"](id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach(function (childNode) {\r\n                return _this.removeNodeFromMap(childNode);\r\n            });\r\n        }\r\n    };\r\n    Mirror.prototype.has = function (id) {\r\n        return this.idNodeMap.has(id);\r\n    };\r\n    Mirror.prototype.hasNode = function (node) {\r\n        return this.nodeMetaMap.has(node);\r\n    };\r\n    Mirror.prototype.add = function (n, meta) {\r\n        var id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    };\r\n    Mirror.prototype.replace = function (id, n) {\r\n        var oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            var meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    };\r\n    Mirror.prototype.reset = function () {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    };\r\n    return Mirror;\r\n}());\r\nfunction createMirror() {\r\n    return new Mirror();\r\n}\r\nfunction maskInputValue(_a) {\r\n    var element = _a.element, maskInputOptions = _a.maskInputOptions, tagName = _a.tagName, type = _a.type, value = _a.value, maskInputFn = _a.maskInputFn;\r\n    var text = value || '';\r\n    var actualType = type && toLowerCase(type);\r\n    if (maskInputOptions[tagName.toLowerCase()] ||\r\n        (actualType && maskInputOptions[actualType])) {\r\n        if (maskInputFn) {\r\n            text = maskInputFn(text, element);\r\n        }\r\n        else {\r\n            text = '*'.repeat(text.length);\r\n        }\r\n    }\r\n    return text;\r\n}\r\nfunction toLowerCase(str) {\r\n    return str.toLowerCase();\r\n}\r\nvar ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\r\nfunction is2DCanvasBlank(canvas) {\r\n    var ctx = canvas.getContext('2d');\r\n    if (!ctx)\r\n        return true;\r\n    var chunkSize = 50;\r\n    for (var x = 0; x < canvas.width; x += chunkSize) {\r\n        for (var y = 0; y < canvas.height; y += chunkSize) {\r\n            var getImageData = ctx.getImageData;\r\n            var originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData\r\n                ? getImageData[ORIGINAL_ATTRIBUTE_NAME]\r\n                : getImageData;\r\n            var pixelBuffer = new Uint32Array(originalGetImageData.call(ctx, x, y, Math.min(chunkSize, canvas.width - x), Math.min(chunkSize, canvas.height - y)).data.buffer);\r\n            if (pixelBuffer.some(function (pixel) { return pixel !== 0; }))\r\n                return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction isNodeMetaEqual(a, b) {\r\n    if (!a || !b || a.type !== b.type)\r\n        return false;\r\n    if (a.type === NodeType.Document)\r\n        return a.compatMode === b.compatMode;\r\n    else if (a.type === NodeType.DocumentType)\r\n        return (a.name === b.name &&\r\n            a.publicId === b.publicId &&\r\n            a.systemId === b.systemId);\r\n    else if (a.type === NodeType.Comment ||\r\n        a.type === NodeType.Text ||\r\n        a.type === NodeType.CDATA)\r\n        return a.textContent === b.textContent;\r\n    else if (a.type === NodeType.Element)\r\n        return (a.tagName === b.tagName &&\r\n            JSON.stringify(a.attributes) ===\r\n                JSON.stringify(b.attributes) &&\r\n            a.isSVG === b.isSVG &&\r\n            a.needBlock === b.needBlock);\r\n    return false;\r\n}\r\nfunction getInputType(element) {\r\n    var type = element.type;\r\n    return element.hasAttribute('data-rr-is-password')\r\n        ? 'password'\r\n        : type\r\n            ?\r\n                toLowerCase(type)\r\n            : null;\r\n}\n\nvar _id = 1;\r\nvar tagNameRegex = new RegExp('[^a-z0-9-_:]');\r\nvar IGNORED_NODE = -2;\r\nfunction genId() {\r\n    return _id++;\r\n}\r\nfunction getValidTagName(element) {\r\n    if (element instanceof HTMLFormElement) {\r\n        return 'form';\r\n    }\r\n    var processedTagName = toLowerCase(element.tagName);\r\n    if (tagNameRegex.test(processedTagName)) {\r\n        return 'div';\r\n    }\r\n    return processedTagName;\r\n}\r\nfunction extractOrigin(url) {\r\n    var origin = '';\r\n    if (url.indexOf('//') > -1) {\r\n        origin = url.split('/').slice(0, 3).join('/');\r\n    }\r\n    else {\r\n        origin = url.split('/')[0];\r\n    }\r\n    origin = origin.split('?')[0];\r\n    return origin;\r\n}\r\nvar canvasService;\r\nvar canvasCtx;\r\nvar URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")(.*?)\"|([^)]*))\\)/gm;\r\nvar URL_PROTOCOL_MATCH = /^(?:[a-z+]+:)?\\/\\//i;\r\nvar URL_WWW_MATCH = /^www\\..*/i;\r\nvar DATA_URI = /^(data:)([^,]*),(.*)/i;\r\nfunction absoluteToStylesheet(cssText, href) {\r\n    return (cssText || '').replace(URL_IN_CSS_REF, function (origin, quote1, path1, quote2, path2, path3) {\r\n        var filePath = path1 || path2 || path3;\r\n        var maybeQuote = quote1 || quote2 || '';\r\n        if (!filePath) {\r\n            return origin;\r\n        }\r\n        if (URL_PROTOCOL_MATCH.test(filePath) || URL_WWW_MATCH.test(filePath)) {\r\n            return \"url(\".concat(maybeQuote).concat(filePath).concat(maybeQuote, \")\");\r\n        }\r\n        if (DATA_URI.test(filePath)) {\r\n            return \"url(\".concat(maybeQuote).concat(filePath).concat(maybeQuote, \")\");\r\n        }\r\n        if (filePath[0] === '/') {\r\n            return \"url(\".concat(maybeQuote).concat(extractOrigin(href) + filePath).concat(maybeQuote, \")\");\r\n        }\r\n        var stack = href.split('/');\r\n        var parts = filePath.split('/');\r\n        stack.pop();\r\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\r\n            var part = parts_1[_i];\r\n            if (part === '.') {\r\n                continue;\r\n            }\r\n            else if (part === '..') {\r\n                stack.pop();\r\n            }\r\n            else {\r\n                stack.push(part);\r\n            }\r\n        }\r\n        return \"url(\".concat(maybeQuote).concat(stack.join('/')).concat(maybeQuote, \")\");\r\n    });\r\n}\r\nvar SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\r\nvar SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\r\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\r\n    if (attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    var pos = 0;\r\n    function collectCharacters(regEx) {\r\n        var chars;\r\n        var match = regEx.exec(attributeValue.substring(pos));\r\n        if (match) {\r\n            chars = match[0];\r\n            pos += chars.length;\r\n            return chars;\r\n        }\r\n        return '';\r\n    }\r\n    var output = [];\r\n    while (true) {\r\n        collectCharacters(SRCSET_COMMAS_OR_SPACES);\r\n        if (pos >= attributeValue.length) {\r\n            break;\r\n        }\r\n        var url = collectCharacters(SRCSET_NOT_SPACES);\r\n        if (url.slice(-1) === ',') {\r\n            url = absoluteToDoc(doc, url.substring(0, url.length - 1));\r\n            output.push(url);\r\n        }\r\n        else {\r\n            var descriptorsStr = '';\r\n            url = absoluteToDoc(doc, url);\r\n            var inParens = false;\r\n            while (true) {\r\n                var c = attributeValue.charAt(pos);\r\n                if (c === '') {\r\n                    output.push((url + descriptorsStr).trim());\r\n                    break;\r\n                }\r\n                else if (!inParens) {\r\n                    if (c === ',') {\r\n                        pos += 1;\r\n                        output.push((url + descriptorsStr).trim());\r\n                        break;\r\n                    }\r\n                    else if (c === '(') {\r\n                        inParens = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (c === ')') {\r\n                        inParens = false;\r\n                    }\r\n                }\r\n                descriptorsStr += c;\r\n                pos += 1;\r\n            }\r\n        }\r\n    }\r\n    return output.join(', ');\r\n}\r\nfunction absoluteToDoc(doc, attributeValue) {\r\n    if (!attributeValue || attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    var a = doc.createElement('a');\r\n    a.href = attributeValue;\r\n    return a.href;\r\n}\r\nfunction isSVGElement(el) {\r\n    return Boolean(el.tagName === 'svg' || el.ownerSVGElement);\r\n}\r\nfunction getHref() {\r\n    var a = document.createElement('a');\r\n    a.href = '';\r\n    return a.href;\r\n}\r\nfunction transformAttribute(doc, tagName, name, value) {\r\n    if (!value) {\r\n        return value;\r\n    }\r\n    if (name === 'src' ||\r\n        (name === 'href' && !(tagName === 'use' && value[0] === '#'))) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'xlink:href' && value[0] !== '#') {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'background' &&\r\n        (tagName === 'table' || tagName === 'td' || tagName === 'th')) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'srcset') {\r\n        return getAbsoluteSrcsetString(doc, value);\r\n    }\r\n    else if (name === 'style') {\r\n        return absoluteToStylesheet(value, getHref());\r\n    }\r\n    else if (tagName === 'object' && name === 'data') {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    return value;\r\n}\r\nfunction ignoreAttribute(tagName, name, _value) {\r\n    return (tagName === 'video' || tagName === 'audio') && name === 'autoplay';\r\n}\r\nfunction _isBlockedElement(element, blockClass, blockSelector) {\r\n    try {\r\n        if (typeof blockClass === 'string') {\r\n            if (element.classList.contains(blockClass)) {\r\n                return true;\r\n            }\r\n        }\r\n        else {\r\n            for (var eIndex = element.classList.length; eIndex--;) {\r\n                var className = element.classList[eIndex];\r\n                if (blockClass.test(className)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        if (blockSelector) {\r\n            return element.matches(blockSelector);\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n    return false;\r\n}\r\nfunction classMatchesRegex(node, regex, checkAncestors) {\r\n    if (!node)\r\n        return false;\r\n    if (node.nodeType !== node.ELEMENT_NODE) {\r\n        if (!checkAncestors)\r\n            return false;\r\n        return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n    }\r\n    for (var eIndex = node.classList.length; eIndex--;) {\r\n        var className = node.classList[eIndex];\r\n        if (regex.test(className)) {\r\n            return true;\r\n        }\r\n    }\r\n    if (!checkAncestors)\r\n        return false;\r\n    return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n}\r\nfunction needMaskingText(node, maskTextClass, maskTextSelector) {\r\n    try {\r\n        var el = node.nodeType === node.ELEMENT_NODE\r\n            ? node\r\n            : node.parentElement;\r\n        if (el === null)\r\n            return false;\r\n        if (typeof maskTextClass === 'string') {\r\n            if (el.classList.contains(maskTextClass))\r\n                return true;\r\n            if (el.closest(\".\".concat(maskTextClass)))\r\n                return true;\r\n        }\r\n        else {\r\n            if (classMatchesRegex(el, maskTextClass, true))\r\n                return true;\r\n        }\r\n        if (maskTextSelector) {\r\n            if (el.matches(maskTextSelector))\r\n                return true;\r\n            if (el.closest(maskTextSelector))\r\n                return true;\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n    return false;\r\n}\r\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\r\n    var win = iframeEl.contentWindow;\r\n    if (!win) {\r\n        return;\r\n    }\r\n    var fired = false;\r\n    var readyState;\r\n    try {\r\n        readyState = win.document.readyState;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (readyState !== 'complete') {\r\n        var timer_1 = setTimeout(function () {\r\n            if (!fired) {\r\n                listener();\r\n                fired = true;\r\n            }\r\n        }, iframeLoadTimeout);\r\n        iframeEl.addEventListener('load', function () {\r\n            clearTimeout(timer_1);\r\n            fired = true;\r\n            listener();\r\n        });\r\n        return;\r\n    }\r\n    var blankUrl = 'about:blank';\r\n    if (win.location.href !== blankUrl ||\r\n        iframeEl.src === blankUrl ||\r\n        iframeEl.src === '') {\r\n        setTimeout(listener, 0);\r\n        return iframeEl.addEventListener('load', listener);\r\n    }\r\n    iframeEl.addEventListener('load', listener);\r\n}\r\nfunction onceStylesheetLoaded(link, listener, styleSheetLoadTimeout) {\r\n    var fired = false;\r\n    var styleSheetLoaded;\r\n    try {\r\n        styleSheetLoaded = link.sheet;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (styleSheetLoaded)\r\n        return;\r\n    var timer = setTimeout(function () {\r\n        if (!fired) {\r\n            listener();\r\n            fired = true;\r\n        }\r\n    }, styleSheetLoadTimeout);\r\n    link.addEventListener('load', function () {\r\n        clearTimeout(timer);\r\n        fired = true;\r\n        listener();\r\n    });\r\n}\r\nfunction serializeNode(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, _b = options.dataURLOptions, dataURLOptions = _b === void 0 ? {} : _b, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn, _c = options.newlyAddedElement, newlyAddedElement = _c === void 0 ? false : _c;\r\n    var rootId = getRootId(doc, mirror);\r\n    switch (n.nodeType) {\r\n        case n.DOCUMENT_NODE:\r\n            if (n.compatMode !== 'CSS1Compat') {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: [],\r\n                    compatMode: n.compatMode\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: []\r\n                };\r\n            }\r\n        case n.DOCUMENT_TYPE_NODE:\r\n            return {\r\n                type: NodeType.DocumentType,\r\n                name: n.name,\r\n                publicId: n.publicId,\r\n                systemId: n.systemId,\r\n                rootId: rootId\r\n            };\r\n        case n.ELEMENT_NODE:\r\n            return serializeElementNode(n, {\r\n                doc: doc,\r\n                blockClass: blockClass,\r\n                blockSelector: blockSelector,\r\n                inlineStylesheet: inlineStylesheet,\r\n                maskInputOptions: maskInputOptions,\r\n                maskInputFn: maskInputFn,\r\n                dataURLOptions: dataURLOptions,\r\n                inlineImages: inlineImages,\r\n                recordCanvas: recordCanvas,\r\n                keepIframeSrcFn: keepIframeSrcFn,\r\n                newlyAddedElement: newlyAddedElement,\r\n                rootId: rootId\r\n            });\r\n        case n.TEXT_NODE:\r\n            return serializeTextNode(n, {\r\n                maskTextClass: maskTextClass,\r\n                maskTextSelector: maskTextSelector,\r\n                maskTextFn: maskTextFn,\r\n                rootId: rootId\r\n            });\r\n        case n.CDATA_SECTION_NODE:\r\n            return {\r\n                type: NodeType.CDATA,\r\n                textContent: '',\r\n                rootId: rootId\r\n            };\r\n        case n.COMMENT_NODE:\r\n            return {\r\n                type: NodeType.Comment,\r\n                textContent: n.textContent || '',\r\n                rootId: rootId\r\n            };\r\n        default:\r\n            return false;\r\n    }\r\n}\r\nfunction getRootId(doc, mirror) {\r\n    if (!mirror.hasNode(doc))\r\n        return undefined;\r\n    var docId = mirror.getId(doc);\r\n    return docId === 1 ? undefined : docId;\r\n}\r\nfunction serializeTextNode(n, options) {\r\n    var _a;\r\n    var maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, maskTextFn = options.maskTextFn, rootId = options.rootId;\r\n    var parentTagName = n.parentNode && n.parentNode.tagName;\r\n    var textContent = n.textContent;\r\n    var isStyle = parentTagName === 'STYLE' ? true : undefined;\r\n    var isScript = parentTagName === 'SCRIPT' ? true : undefined;\r\n    if (isStyle && textContent) {\r\n        try {\r\n            if (n.nextSibling || n.previousSibling) {\r\n            }\r\n            else if ((_a = n.parentNode.sheet) === null || _a === void 0 ? void 0 : _a.cssRules) {\r\n                textContent = stringifyStylesheet(n.parentNode.sheet);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.warn(\"Cannot get CSS styles from text's parentNode. Error: \".concat(err), n);\r\n        }\r\n        textContent = absoluteToStylesheet(textContent, getHref());\r\n    }\r\n    if (isScript) {\r\n        textContent = 'SCRIPT_PLACEHOLDER';\r\n    }\r\n    if (!isStyle &&\r\n        !isScript &&\r\n        textContent &&\r\n        needMaskingText(n, maskTextClass, maskTextSelector)) {\r\n        textContent = maskTextFn\r\n            ? maskTextFn(textContent)\r\n            : textContent.replace(/[\\S]/g, '*');\r\n    }\r\n    return {\r\n        type: NodeType.Text,\r\n        textContent: textContent || '',\r\n        isStyle: isStyle,\r\n        rootId: rootId\r\n    };\r\n}\r\nfunction serializeElementNode(n, options) {\r\n    var doc = options.doc, blockClass = options.blockClass, blockSelector = options.blockSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskInputFn = options.maskInputFn, _b = options.dataURLOptions, dataURLOptions = _b === void 0 ? {} : _b, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn, _c = options.newlyAddedElement, newlyAddedElement = _c === void 0 ? false : _c, rootId = options.rootId;\r\n    var needBlock = _isBlockedElement(n, blockClass, blockSelector);\r\n    var tagName = getValidTagName(n);\r\n    var attributes = {};\r\n    var len = n.attributes.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var attr = n.attributes[i];\r\n        if (!ignoreAttribute(tagName, attr.name, attr.value)) {\r\n            attributes[attr.name] = transformAttribute(doc, tagName, toLowerCase(attr.name), attr.value);\r\n        }\r\n    }\r\n    if (tagName === 'link' && inlineStylesheet) {\r\n        var stylesheet = Array.from(doc.styleSheets).find(function (s) {\r\n            return s.href === n.href;\r\n        });\r\n        var cssText = null;\r\n        if (stylesheet) {\r\n            cssText = stringifyStylesheet(stylesheet);\r\n        }\r\n        if (cssText) {\r\n            delete attributes.rel;\r\n            delete attributes.href;\r\n            attributes._cssText = absoluteToStylesheet(cssText, stylesheet.href);\r\n        }\r\n    }\r\n    if (tagName === 'style' &&\r\n        n.sheet &&\r\n        !(n.innerText || n.textContent || '').trim().length) {\r\n        var cssText = stringifyStylesheet(n.sheet);\r\n        if (cssText) {\r\n            attributes._cssText = absoluteToStylesheet(cssText, getHref());\r\n        }\r\n    }\r\n    if (tagName === 'input' || tagName === 'textarea' || tagName === 'select') {\r\n        var value = n.value;\r\n        var checked = n.checked;\r\n        if (attributes.type !== 'radio' &&\r\n            attributes.type !== 'checkbox' &&\r\n            attributes.type !== 'submit' &&\r\n            attributes.type !== 'button' &&\r\n            value) {\r\n            var type = getInputType(n);\r\n            attributes.value = maskInputValue({\r\n                element: n,\r\n                type: type,\r\n                tagName: tagName,\r\n                value: value,\r\n                maskInputOptions: maskInputOptions,\r\n                maskInputFn: maskInputFn\r\n            });\r\n        }\r\n        else if (checked) {\r\n            attributes.checked = checked;\r\n        }\r\n    }\r\n    if (tagName === 'option') {\r\n        if (n.selected && !maskInputOptions['select']) {\r\n            attributes.selected = true;\r\n        }\r\n        else {\r\n            delete attributes.selected;\r\n        }\r\n    }\r\n    if (tagName === 'canvas' && recordCanvas) {\r\n        if (n.__context === '2d') {\r\n            if (!is2DCanvasBlank(n)) {\r\n                attributes.rr_dataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n        }\r\n        else if (!('__context' in n)) {\r\n            var canvasDataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            var blankCanvas = document.createElement('canvas');\r\n            blankCanvas.width = n.width;\r\n            blankCanvas.height = n.height;\r\n            var blankCanvasDataURL = blankCanvas.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            if (canvasDataURL !== blankCanvasDataURL) {\r\n                attributes.rr_dataURL = canvasDataURL;\r\n            }\r\n        }\r\n    }\r\n    if (tagName === 'img' && inlineImages) {\r\n        if (!canvasService) {\r\n            canvasService = doc.createElement('canvas');\r\n            canvasCtx = canvasService.getContext('2d');\r\n        }\r\n        var image_1 = n;\r\n        var oldValue_1 = image_1.crossOrigin;\r\n        image_1.crossOrigin = 'anonymous';\r\n        var recordInlineImage_1 = function () {\r\n            image_1.removeEventListener('load', recordInlineImage_1);\r\n            try {\r\n                canvasService.width = image_1.naturalWidth;\r\n                canvasService.height = image_1.naturalHeight;\r\n                canvasCtx.drawImage(image_1, 0, 0);\r\n                attributes.rr_dataURL = canvasService.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n            catch (err) {\r\n                console.warn(\"Cannot inline img src=\".concat(image_1.currentSrc, \"! Error: \").concat(err));\r\n            }\r\n            oldValue_1\r\n                ? (attributes.crossOrigin = oldValue_1)\r\n                : image_1.removeAttribute('crossorigin');\r\n        };\r\n        if (image_1.complete && image_1.naturalWidth !== 0)\r\n            recordInlineImage_1();\r\n        else\r\n            image_1.addEventListener('load', recordInlineImage_1);\r\n    }\r\n    if (tagName === 'audio' || tagName === 'video') {\r\n        attributes.rr_mediaState = n.paused\r\n            ? 'paused'\r\n            : 'played';\r\n        attributes.rr_mediaCurrentTime = n.currentTime;\r\n    }\r\n    if (!newlyAddedElement) {\r\n        if (n.scrollLeft) {\r\n            attributes.rr_scrollLeft = n.scrollLeft;\r\n        }\r\n        if (n.scrollTop) {\r\n            attributes.rr_scrollTop = n.scrollTop;\r\n        }\r\n    }\r\n    if (needBlock) {\r\n        var _d = n.getBoundingClientRect(), width = _d.width, height = _d.height;\r\n        attributes = {\r\n            \"class\": attributes[\"class\"],\r\n            rr_width: \"\".concat(width, \"px\"),\r\n            rr_height: \"\".concat(height, \"px\")\r\n        };\r\n    }\r\n    if (tagName === 'iframe' && !keepIframeSrcFn(attributes.src)) {\r\n        if (!n.contentDocument) {\r\n            attributes.rr_src = attributes.src;\r\n        }\r\n        delete attributes.src;\r\n    }\r\n    return {\r\n        type: NodeType.Element,\r\n        tagName: tagName,\r\n        attributes: attributes,\r\n        childNodes: [],\r\n        isSVG: isSVGElement(n) || undefined,\r\n        needBlock: needBlock,\r\n        rootId: rootId\r\n    };\r\n}\r\nfunction lowerIfExists(maybeAttr) {\r\n    if (maybeAttr === undefined || maybeAttr === null) {\r\n        return '';\r\n    }\r\n    else {\r\n        return maybeAttr.toLowerCase();\r\n    }\r\n}\r\nfunction slimDOMExcluded(sn, slimDOMOptions) {\r\n    if (slimDOMOptions.comment && sn.type === NodeType.Comment) {\r\n        return true;\r\n    }\r\n    else if (sn.type === NodeType.Element) {\r\n        if (slimDOMOptions.script &&\r\n            (sn.tagName === 'script' ||\r\n                (sn.tagName === 'link' &&\r\n                    (sn.attributes.rel === 'preload' ||\r\n                        sn.attributes.rel === 'modulepreload') &&\r\n                    sn.attributes.as === 'script') ||\r\n                (sn.tagName === 'link' &&\r\n                    sn.attributes.rel === 'prefetch' &&\r\n                    typeof sn.attributes.href === 'string' &&\r\n                    sn.attributes.href.endsWith('.js')))) {\r\n            return true;\r\n        }\r\n        else if (slimDOMOptions.headFavicon &&\r\n            ((sn.tagName === 'link' && sn.attributes.rel === 'shortcut icon') ||\r\n                (sn.tagName === 'meta' &&\r\n                    (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) ||\r\n                        lowerIfExists(sn.attributes.name) === 'application-name' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'apple-touch-icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'shortcut icon')))) {\r\n            return true;\r\n        }\r\n        else if (sn.tagName === 'meta') {\r\n            if (slimDOMOptions.headMetaDescKeywords &&\r\n                lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaSocial &&\r\n                (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) ||\r\n                    lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) ||\r\n                    lowerIfExists(sn.attributes.name) === 'pinterest')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaRobots &&\r\n                (lowerIfExists(sn.attributes.name) === 'robots' ||\r\n                    lowerIfExists(sn.attributes.name) === 'googlebot' ||\r\n                    lowerIfExists(sn.attributes.name) === 'bingbot')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaHttpEquiv &&\r\n                sn.attributes['http-equiv'] !== undefined) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaAuthorship &&\r\n                (lowerIfExists(sn.attributes.name) === 'author' ||\r\n                    lowerIfExists(sn.attributes.name) === 'generator' ||\r\n                    lowerIfExists(sn.attributes.name) === 'framework' ||\r\n                    lowerIfExists(sn.attributes.name) === 'publisher' ||\r\n                    lowerIfExists(sn.attributes.name) === 'progid' ||\r\n                    lowerIfExists(sn.attributes.property).match(/^article:/) ||\r\n                    lowerIfExists(sn.attributes.property).match(/^product:/))) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaVerification &&\r\n                (lowerIfExists(sn.attributes.name) === 'google-site-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'yandex-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'csrf-token' ||\r\n                    lowerIfExists(sn.attributes.name) === 'p:domain_verify' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verify-v1' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'shopify-checkout-api-token')) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction serializeNodeWithId(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.inlineStylesheet, inlineStylesheet = _b === void 0 ? true : _b, _c = options.maskInputOptions, maskInputOptions = _c === void 0 ? {} : _c, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, slimDOMOptions = options.slimDOMOptions, _d = options.dataURLOptions, dataURLOptions = _d === void 0 ? {} : _d, _e = options.inlineImages, inlineImages = _e === void 0 ? false : _e, _f = options.recordCanvas, recordCanvas = _f === void 0 ? false : _f, onSerialize = options.onSerialize, onIframeLoad = options.onIframeLoad, _g = options.iframeLoadTimeout, iframeLoadTimeout = _g === void 0 ? 5000 : _g, onStylesheetLoad = options.onStylesheetLoad, _h = options.stylesheetLoadTimeout, stylesheetLoadTimeout = _h === void 0 ? 5000 : _h, _j = options.keepIframeSrcFn, keepIframeSrcFn = _j === void 0 ? function () { return false; } : _j, _k = options.newlyAddedElement, newlyAddedElement = _k === void 0 ? false : _k;\r\n    var _l = options.preserveWhiteSpace, preserveWhiteSpace = _l === void 0 ? true : _l;\r\n    var _serializedNode = serializeNode(n, {\r\n        doc: doc,\r\n        mirror: mirror,\r\n        blockClass: blockClass,\r\n        blockSelector: blockSelector,\r\n        maskTextClass: maskTextClass,\r\n        maskTextSelector: maskTextSelector,\r\n        inlineStylesheet: inlineStylesheet,\r\n        maskInputOptions: maskInputOptions,\r\n        maskTextFn: maskTextFn,\r\n        maskInputFn: maskInputFn,\r\n        dataURLOptions: dataURLOptions,\r\n        inlineImages: inlineImages,\r\n        recordCanvas: recordCanvas,\r\n        keepIframeSrcFn: keepIframeSrcFn,\r\n        newlyAddedElement: newlyAddedElement\r\n    });\r\n    if (!_serializedNode) {\r\n        console.warn(n, 'not serialized');\r\n        return null;\r\n    }\r\n    var id;\r\n    if (mirror.hasNode(n)) {\r\n        id = mirror.getId(n);\r\n    }\r\n    else if (slimDOMExcluded(_serializedNode, slimDOMOptions) ||\r\n        (!preserveWhiteSpace &&\r\n            _serializedNode.type === NodeType.Text &&\r\n            !_serializedNode.isStyle &&\r\n            !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, '').length)) {\r\n        id = IGNORED_NODE;\r\n    }\r\n    else {\r\n        id = genId();\r\n    }\r\n    var serializedNode = Object.assign(_serializedNode, { id: id });\r\n    mirror.add(n, serializedNode);\r\n    if (id === IGNORED_NODE) {\r\n        return null;\r\n    }\r\n    if (onSerialize) {\r\n        onSerialize(n);\r\n    }\r\n    var recordChild = !skipChild;\r\n    if (serializedNode.type === NodeType.Element) {\r\n        recordChild = recordChild && !serializedNode.needBlock;\r\n        delete serializedNode.needBlock;\r\n        var shadowRoot = n.shadowRoot;\r\n        if (shadowRoot && isNativeShadowDom(shadowRoot))\r\n            serializedNode.isShadowHost = true;\r\n    }\r\n    if ((serializedNode.type === NodeType.Document ||\r\n        serializedNode.type === NodeType.Element) &&\r\n        recordChild) {\r\n        if (slimDOMOptions.headWhitespace &&\r\n            serializedNode.type === NodeType.Element &&\r\n            serializedNode.tagName === 'head') {\r\n            preserveWhiteSpace = false;\r\n        }\r\n        var bypassOptions = {\r\n            doc: doc,\r\n            mirror: mirror,\r\n            blockClass: blockClass,\r\n            blockSelector: blockSelector,\r\n            maskTextClass: maskTextClass,\r\n            maskTextSelector: maskTextSelector,\r\n            skipChild: skipChild,\r\n            inlineStylesheet: inlineStylesheet,\r\n            maskInputOptions: maskInputOptions,\r\n            maskTextFn: maskTextFn,\r\n            maskInputFn: maskInputFn,\r\n            slimDOMOptions: slimDOMOptions,\r\n            dataURLOptions: dataURLOptions,\r\n            inlineImages: inlineImages,\r\n            recordCanvas: recordCanvas,\r\n            preserveWhiteSpace: preserveWhiteSpace,\r\n            onSerialize: onSerialize,\r\n            onIframeLoad: onIframeLoad,\r\n            iframeLoadTimeout: iframeLoadTimeout,\r\n            onStylesheetLoad: onStylesheetLoad,\r\n            stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n            keepIframeSrcFn: keepIframeSrcFn\r\n        };\r\n        for (var _i = 0, _m = Array.from(n.childNodes); _i < _m.length; _i++) {\r\n            var childN = _m[_i];\r\n            var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n            if (serializedChildNode) {\r\n                serializedNode.childNodes.push(serializedChildNode);\r\n            }\r\n        }\r\n        if (isElement(n) && n.shadowRoot) {\r\n            for (var _o = 0, _p = Array.from(n.shadowRoot.childNodes); _o < _p.length; _o++) {\r\n                var childN = _p[_o];\r\n                var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n                if (serializedChildNode) {\r\n                    isNativeShadowDom(n.shadowRoot) &&\r\n                        (serializedChildNode.isShadow = true);\r\n                    serializedNode.childNodes.push(serializedChildNode);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (n.parentNode &&\r\n        isShadowRoot(n.parentNode) &&\r\n        isNativeShadowDom(n.parentNode)) {\r\n        serializedNode.isShadow = true;\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'iframe') {\r\n        onceIframeLoaded(n, function () {\r\n            var iframeDoc = n.contentDocument;\r\n            if (iframeDoc && onIframeLoad) {\r\n                var serializedIframeNode = serializeNodeWithId(iframeDoc, {\r\n                    doc: iframeDoc,\r\n                    mirror: mirror,\r\n                    blockClass: blockClass,\r\n                    blockSelector: blockSelector,\r\n                    maskTextClass: maskTextClass,\r\n                    maskTextSelector: maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet: inlineStylesheet,\r\n                    maskInputOptions: maskInputOptions,\r\n                    maskTextFn: maskTextFn,\r\n                    maskInputFn: maskInputFn,\r\n                    slimDOMOptions: slimDOMOptions,\r\n                    dataURLOptions: dataURLOptions,\r\n                    inlineImages: inlineImages,\r\n                    recordCanvas: recordCanvas,\r\n                    preserveWhiteSpace: preserveWhiteSpace,\r\n                    onSerialize: onSerialize,\r\n                    onIframeLoad: onIframeLoad,\r\n                    iframeLoadTimeout: iframeLoadTimeout,\r\n                    onStylesheetLoad: onStylesheetLoad,\r\n                    stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n                    keepIframeSrcFn: keepIframeSrcFn\r\n                });\r\n                if (serializedIframeNode) {\r\n                    onIframeLoad(n, serializedIframeNode);\r\n                }\r\n            }\r\n        }, iframeLoadTimeout);\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'link' &&\r\n        serializedNode.attributes.rel === 'stylesheet') {\r\n        onceStylesheetLoaded(n, function () {\r\n            if (onStylesheetLoad) {\r\n                var serializedLinkNode = serializeNodeWithId(n, {\r\n                    doc: doc,\r\n                    mirror: mirror,\r\n                    blockClass: blockClass,\r\n                    blockSelector: blockSelector,\r\n                    maskTextClass: maskTextClass,\r\n                    maskTextSelector: maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet: inlineStylesheet,\r\n                    maskInputOptions: maskInputOptions,\r\n                    maskTextFn: maskTextFn,\r\n                    maskInputFn: maskInputFn,\r\n                    slimDOMOptions: slimDOMOptions,\r\n                    dataURLOptions: dataURLOptions,\r\n                    inlineImages: inlineImages,\r\n                    recordCanvas: recordCanvas,\r\n                    preserveWhiteSpace: preserveWhiteSpace,\r\n                    onSerialize: onSerialize,\r\n                    onIframeLoad: onIframeLoad,\r\n                    iframeLoadTimeout: iframeLoadTimeout,\r\n                    onStylesheetLoad: onStylesheetLoad,\r\n                    stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n                    keepIframeSrcFn: keepIframeSrcFn\r\n                });\r\n                if (serializedLinkNode) {\r\n                    onStylesheetLoad(n, serializedLinkNode);\r\n                }\r\n            }\r\n        }, stylesheetLoadTimeout);\r\n    }\r\n    return serializedNode;\r\n}\r\nfunction snapshot(n, options) {\r\n    var _a = options || {}, _b = _a.mirror, mirror = _b === void 0 ? new Mirror() : _b, _c = _a.blockClass, blockClass = _c === void 0 ? 'rr-block' : _c, _d = _a.blockSelector, blockSelector = _d === void 0 ? null : _d, _e = _a.maskTextClass, maskTextClass = _e === void 0 ? 'rr-mask' : _e, _f = _a.maskTextSelector, maskTextSelector = _f === void 0 ? null : _f, _g = _a.inlineStylesheet, inlineStylesheet = _g === void 0 ? true : _g, _h = _a.inlineImages, inlineImages = _h === void 0 ? false : _h, _j = _a.recordCanvas, recordCanvas = _j === void 0 ? false : _j, _k = _a.maskAllInputs, maskAllInputs = _k === void 0 ? false : _k, maskTextFn = _a.maskTextFn, maskInputFn = _a.maskInputFn, _l = _a.slimDOM, slimDOM = _l === void 0 ? false : _l, dataURLOptions = _a.dataURLOptions, preserveWhiteSpace = _a.preserveWhiteSpace, onSerialize = _a.onSerialize, onIframeLoad = _a.onIframeLoad, iframeLoadTimeout = _a.iframeLoadTimeout, onStylesheetLoad = _a.onStylesheetLoad, stylesheetLoadTimeout = _a.stylesheetLoadTimeout, _m = _a.keepIframeSrcFn, keepIframeSrcFn = _m === void 0 ? function () { return false; } : _m;\r\n    var maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true\r\n        }\r\n        : maskAllInputs === false\r\n            ? {\r\n                password: true\r\n            }\r\n            : maskAllInputs;\r\n    var slimDOMOptions = slimDOM === true || slimDOM === 'all'\r\n        ?\r\n            {\r\n                script: true,\r\n                comment: true,\r\n                headFavicon: true,\r\n                headWhitespace: true,\r\n                headMetaDescKeywords: slimDOM === 'all',\r\n                headMetaSocial: true,\r\n                headMetaRobots: true,\r\n                headMetaHttpEquiv: true,\r\n                headMetaAuthorship: true,\r\n                headMetaVerification: true\r\n            }\r\n        : slimDOM === false\r\n            ? {}\r\n            : slimDOM;\r\n    return serializeNodeWithId(n, {\r\n        doc: n,\r\n        mirror: mirror,\r\n        blockClass: blockClass,\r\n        blockSelector: blockSelector,\r\n        maskTextClass: maskTextClass,\r\n        maskTextSelector: maskTextSelector,\r\n        skipChild: false,\r\n        inlineStylesheet: inlineStylesheet,\r\n        maskInputOptions: maskInputOptions,\r\n        maskTextFn: maskTextFn,\r\n        maskInputFn: maskInputFn,\r\n        slimDOMOptions: slimDOMOptions,\r\n        dataURLOptions: dataURLOptions,\r\n        inlineImages: inlineImages,\r\n        recordCanvas: recordCanvas,\r\n        preserveWhiteSpace: preserveWhiteSpace,\r\n        onSerialize: onSerialize,\r\n        onIframeLoad: onIframeLoad,\r\n        iframeLoadTimeout: iframeLoadTimeout,\r\n        onStylesheetLoad: onStylesheetLoad,\r\n        stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n        keepIframeSrcFn: keepIframeSrcFn,\r\n        newlyAddedElement: false\r\n    });\r\n}\r\n\nvar commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\r\nfunction parse(css, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var lineno = 1;\r\n    var column = 1;\r\n    function updatePosition(str) {\r\n        var lines = str.match(/\\n/g);\r\n        if (lines) {\r\n            lineno += lines.length;\r\n        }\r\n        var i = str.lastIndexOf('\\n');\r\n        column = i === -1 ? column + str.length : str.length - i;\r\n    }\r\n    function position() {\r\n        var start = { line: lineno, column: column };\r\n        return function (node) {\r\n            node.position = new Position(start);\r\n            whitespace();\r\n            return node;\r\n        };\r\n    }\r\n    var Position = (function () {\r\n        function Position(start) {\r\n            this.start = start;\r\n            this.end = { line: lineno, column: column };\r\n            this.source = options.source;\r\n        }\r\n        return Position;\r\n    }());\r\n    Position.prototype.content = css;\r\n    var errorsList = [];\r\n    function error(msg) {\r\n        var err = new Error(\"\".concat(options.source || '', \":\").concat(lineno, \":\").concat(column, \": \").concat(msg));\r\n        err.reason = msg;\r\n        err.filename = options.source;\r\n        err.line = lineno;\r\n        err.column = column;\r\n        err.source = css;\r\n        if (options.silent) {\r\n            errorsList.push(err);\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    function stylesheet() {\r\n        var rulesList = rules();\r\n        return {\r\n            type: 'stylesheet',\r\n            stylesheet: {\r\n                source: options.source,\r\n                rules: rulesList,\r\n                parsingErrors: errorsList\r\n            }\r\n        };\r\n    }\r\n    function open() {\r\n        return match(/^{\\s*/);\r\n    }\r\n    function close() {\r\n        return match(/^}/);\r\n    }\r\n    function rules() {\r\n        var node;\r\n        var rules = [];\r\n        whitespace();\r\n        comments(rules);\r\n        while (css.length && css.charAt(0) !== '}' && (node = atrule() || rule())) {\r\n            if (node) {\r\n                rules.push(node);\r\n                comments(rules);\r\n            }\r\n        }\r\n        return rules;\r\n    }\r\n    function match(re) {\r\n        var m = re.exec(css);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var str = m[0];\r\n        updatePosition(str);\r\n        css = css.slice(str.length);\r\n        return m;\r\n    }\r\n    function whitespace() {\r\n        match(/^\\s*/);\r\n    }\r\n    function comments(rules) {\r\n        if (rules === void 0) { rules = []; }\r\n        var c;\r\n        while ((c = comment())) {\r\n            if (c) {\r\n                rules.push(c);\r\n            }\r\n            c = comment();\r\n        }\r\n        return rules;\r\n    }\r\n    function comment() {\r\n        var pos = position();\r\n        if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {\r\n            return;\r\n        }\r\n        var i = 2;\r\n        while ('' !== css.charAt(i) &&\r\n            ('*' !== css.charAt(i) || '/' !== css.charAt(i + 1))) {\r\n            ++i;\r\n        }\r\n        i += 2;\r\n        if ('' === css.charAt(i - 1)) {\r\n            return error('End of comment missing');\r\n        }\r\n        var str = css.slice(2, i - 2);\r\n        column += 2;\r\n        updatePosition(str);\r\n        css = css.slice(i);\r\n        column += 2;\r\n        return pos({\r\n            type: 'comment',\r\n            comment: str\r\n        });\r\n    }\r\n    function selector() {\r\n        var m = match(/^([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return trim(m[0])\r\n            .replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '')\r\n            .replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function (m) {\r\n            return m.replace(/,/g, '\\u200C');\r\n        })\r\n            .split(/\\s*(?![^(]*\\)),\\s*/)\r\n            .map(function (s) {\r\n            return s.replace(/\\u200C/g, ',');\r\n        });\r\n    }\r\n    function declaration() {\r\n        var pos = position();\r\n        var propMatch = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\r\n        if (!propMatch) {\r\n            return;\r\n        }\r\n        var prop = trim(propMatch[0]);\r\n        if (!match(/^:\\s*/)) {\r\n            return error(\"property missing ':'\");\r\n        }\r\n        var val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\r\n        var ret = pos({\r\n            type: 'declaration',\r\n            property: prop.replace(commentre, ''),\r\n            value: val ? trim(val[0]).replace(commentre, '') : ''\r\n        });\r\n        match(/^[;\\s]*/);\r\n        return ret;\r\n    }\r\n    function declarations() {\r\n        var decls = [];\r\n        if (!open()) {\r\n            return error(\"missing '{'\");\r\n        }\r\n        comments(decls);\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            if (decl !== false) {\r\n                decls.push(decl);\r\n                comments(decls);\r\n            }\r\n            decl = declaration();\r\n        }\r\n        if (!close()) {\r\n            return error(\"missing '}'\");\r\n        }\r\n        return decls;\r\n    }\r\n    function keyframe() {\r\n        var m;\r\n        var vals = [];\r\n        var pos = position();\r\n        while ((m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/))) {\r\n            vals.push(m[1]);\r\n            match(/^,\\s*/);\r\n        }\r\n        if (!vals.length) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'keyframe',\r\n            values: vals,\r\n            declarations: declarations()\r\n        });\r\n    }\r\n    function atkeyframes() {\r\n        var pos = position();\r\n        var m = match(/^@([-\\w]+)?keyframes\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var vendor = m[1];\r\n        m = match(/^([-\\w]+)\\s*/);\r\n        if (!m) {\r\n            return error('@keyframes missing name');\r\n        }\r\n        var name = m[1];\r\n        if (!open()) {\r\n            return error(\"@keyframes missing '{'\");\r\n        }\r\n        var frame;\r\n        var frames = comments();\r\n        while ((frame = keyframe())) {\r\n            frames.push(frame);\r\n            frames = frames.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@keyframes missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'keyframes',\r\n            name: name,\r\n            vendor: vendor,\r\n            keyframes: frames\r\n        });\r\n    }\r\n    function atsupports() {\r\n        var pos = position();\r\n        var m = match(/^@supports *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var supports = trim(m[1]);\r\n        if (!open()) {\r\n            return error(\"@supports missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@supports missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'supports',\r\n            supports: supports,\r\n            rules: style\r\n        });\r\n    }\r\n    function athost() {\r\n        var pos = position();\r\n        var m = match(/^@host\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(\"@host missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@host missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'host',\r\n            rules: style\r\n        });\r\n    }\r\n    function atmedia() {\r\n        var pos = position();\r\n        var m = match(/^@media *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var media = trim(m[1]);\r\n        if (!open()) {\r\n            return error(\"@media missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@media missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'media',\r\n            media: media,\r\n            rules: style\r\n        });\r\n    }\r\n    function atcustommedia() {\r\n        var pos = position();\r\n        var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'custom-media',\r\n            name: trim(m[1]),\r\n            media: trim(m[2])\r\n        });\r\n    }\r\n    function atpage() {\r\n        var pos = position();\r\n        var m = match(/^@page */);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var sel = selector() || [];\r\n        if (!open()) {\r\n            return error(\"@page missing '{'\");\r\n        }\r\n        var decls = comments();\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@page missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'page',\r\n            selectors: sel,\r\n            declarations: decls\r\n        });\r\n    }\r\n    function atdocument() {\r\n        var pos = position();\r\n        var m = match(/^@([-\\w]+)?document *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var vendor = trim(m[1]);\r\n        var doc = trim(m[2]);\r\n        if (!open()) {\r\n            return error(\"@document missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@document missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'document',\r\n            document: doc,\r\n            vendor: vendor,\r\n            rules: style\r\n        });\r\n    }\r\n    function atfontface() {\r\n        var pos = position();\r\n        var m = match(/^@font-face\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(\"@font-face missing '{'\");\r\n        }\r\n        var decls = comments();\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@font-face missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'font-face',\r\n            declarations: decls\r\n        });\r\n    }\r\n    var atimport = _compileAtrule('import');\r\n    var atcharset = _compileAtrule('charset');\r\n    var atnamespace = _compileAtrule('namespace');\r\n    function _compileAtrule(name) {\r\n        var re = new RegExp('^@' + name + '\\\\s*([^;]+);');\r\n        return function () {\r\n            var pos = position();\r\n            var m = match(re);\r\n            if (!m) {\r\n                return;\r\n            }\r\n            var ret = { type: name };\r\n            ret[name] = m[1].trim();\r\n            return pos(ret);\r\n        };\r\n    }\r\n    function atrule() {\r\n        if (css[0] !== '@') {\r\n            return;\r\n        }\r\n        return (atkeyframes() ||\r\n            atmedia() ||\r\n            atcustommedia() ||\r\n            atsupports() ||\r\n            atimport() ||\r\n            atcharset() ||\r\n            atnamespace() ||\r\n            atdocument() ||\r\n            atpage() ||\r\n            athost() ||\r\n            atfontface());\r\n    }\r\n    function rule() {\r\n        var pos = position();\r\n        var sel = selector();\r\n        if (!sel) {\r\n            return error('selector missing');\r\n        }\r\n        comments();\r\n        return pos({\r\n            type: 'rule',\r\n            selectors: sel,\r\n            declarations: declarations()\r\n        });\r\n    }\r\n    return addParent(stylesheet());\r\n}\r\nfunction trim(str) {\r\n    return str ? str.replace(/^\\s+|\\s+$/g, '') : '';\r\n}\r\nfunction addParent(obj, parent) {\r\n    var isNode = obj && typeof obj.type === 'string';\r\n    var childParent = isNode ? obj : parent;\r\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n        var k = _a[_i];\r\n        var value = obj[k];\r\n        if (Array.isArray(value)) {\r\n            value.forEach(function (v) {\r\n                addParent(v, childParent);\r\n            });\r\n        }\r\n        else if (value && typeof value === 'object') {\r\n            addParent(value, childParent);\r\n        }\r\n    }\r\n    if (isNode) {\r\n        Object.defineProperty(obj, 'parent', {\r\n            configurable: true,\r\n            writable: true,\r\n            enumerable: false,\r\n            value: parent || null\r\n        });\r\n    }\r\n    return obj;\r\n}\n\nvar tagMap = {\r\n    script: 'noscript',\r\n    altglyph: 'altGlyph',\r\n    altglyphdef: 'altGlyphDef',\r\n    altglyphitem: 'altGlyphItem',\r\n    animatecolor: 'animateColor',\r\n    animatemotion: 'animateMotion',\r\n    animatetransform: 'animateTransform',\r\n    clippath: 'clipPath',\r\n    feblend: 'feBlend',\r\n    fecolormatrix: 'feColorMatrix',\r\n    fecomponenttransfer: 'feComponentTransfer',\r\n    fecomposite: 'feComposite',\r\n    feconvolvematrix: 'feConvolveMatrix',\r\n    fediffuselighting: 'feDiffuseLighting',\r\n    fedisplacementmap: 'feDisplacementMap',\r\n    fedistantlight: 'feDistantLight',\r\n    fedropshadow: 'feDropShadow',\r\n    feflood: 'feFlood',\r\n    fefunca: 'feFuncA',\r\n    fefuncb: 'feFuncB',\r\n    fefuncg: 'feFuncG',\r\n    fefuncr: 'feFuncR',\r\n    fegaussianblur: 'feGaussianBlur',\r\n    feimage: 'feImage',\r\n    femerge: 'feMerge',\r\n    femergenode: 'feMergeNode',\r\n    femorphology: 'feMorphology',\r\n    feoffset: 'feOffset',\r\n    fepointlight: 'fePointLight',\r\n    fespecularlighting: 'feSpecularLighting',\r\n    fespotlight: 'feSpotLight',\r\n    fetile: 'feTile',\r\n    feturbulence: 'feTurbulence',\r\n    foreignobject: 'foreignObject',\r\n    glyphref: 'glyphRef',\r\n    lineargradient: 'linearGradient',\r\n    radialgradient: 'radialGradient'\r\n};\r\nfunction getTagName(n) {\r\n    var tagName = tagMap[n.tagName] ? tagMap[n.tagName] : n.tagName;\r\n    if (tagName === 'link' && n.attributes._cssText) {\r\n        tagName = 'style';\r\n    }\r\n    return tagName;\r\n}\r\nfunction escapeRegExp(str) {\r\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n}\r\nvar HOVER_SELECTOR = /([^\\\\]):hover/;\r\nvar HOVER_SELECTOR_GLOBAL = new RegExp(HOVER_SELECTOR.source, 'g');\r\nfunction addHoverClass(cssText, cache) {\r\n    var cachedStyle = cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.get(cssText);\r\n    if (cachedStyle)\r\n        return cachedStyle;\r\n    var ast = parse(cssText, {\r\n        silent: true\r\n    });\r\n    if (!ast.stylesheet) {\r\n        return cssText;\r\n    }\r\n    var selectors = [];\r\n    ast.stylesheet.rules.forEach(function (rule) {\r\n        if ('selectors' in rule) {\r\n            (rule.selectors || []).forEach(function (selector) {\r\n                if (HOVER_SELECTOR.test(selector)) {\r\n                    selectors.push(selector);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    if (selectors.length === 0) {\r\n        return cssText;\r\n    }\r\n    var selectorMatcher = new RegExp(selectors\r\n        .filter(function (selector, index) { return selectors.indexOf(selector) === index; })\r\n        .sort(function (a, b) { return b.length - a.length; })\r\n        .map(function (selector) {\r\n        return escapeRegExp(selector);\r\n    })\r\n        .join('|'), 'g');\r\n    var result = cssText.replace(selectorMatcher, function (selector) {\r\n        var newSelector = selector.replace(HOVER_SELECTOR_GLOBAL, '$1.\\\\:hover');\r\n        return \"\".concat(selector, \", \").concat(newSelector);\r\n    });\r\n    cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.set(cssText, result);\r\n    return result;\r\n}\r\nfunction createCache() {\r\n    var stylesWithHoverClass = new Map();\r\n    return {\r\n        stylesWithHoverClass: stylesWithHoverClass\r\n    };\r\n}\r\nfunction buildNode(n, options) {\r\n    var doc = options.doc, hackCss = options.hackCss, cache = options.cache;\r\n    switch (n.type) {\r\n        case NodeType.Document:\r\n            return doc.implementation.createDocument(null, '', null);\r\n        case NodeType.DocumentType:\r\n            return doc.implementation.createDocumentType(n.name || 'html', n.publicId, n.systemId);\r\n        case NodeType.Element: {\r\n            var tagName = getTagName(n);\r\n            var node_1;\r\n            if (n.isSVG) {\r\n                node_1 = doc.createElementNS('http://www.w3.org/2000/svg', tagName);\r\n            }\r\n            else {\r\n                node_1 = doc.createElement(tagName);\r\n            }\r\n            var specialAttributes = {};\r\n            for (var name_1 in n.attributes) {\r\n                if (!Object.prototype.hasOwnProperty.call(n.attributes, name_1)) {\r\n                    continue;\r\n                }\r\n                var value = n.attributes[name_1];\r\n                if (tagName === 'option' &&\r\n                    name_1 === 'selected' &&\r\n                    value === false) {\r\n                    continue;\r\n                }\r\n                if (value === null) {\r\n                    continue;\r\n                }\r\n                if (value === true)\r\n                    value = '';\r\n                if (name_1.startsWith('rr_')) {\r\n                    specialAttributes[name_1] = value;\r\n                    continue;\r\n                }\r\n                var isTextarea = tagName === 'textarea' && name_1 === 'value';\r\n                var isRemoteOrDynamicCss = tagName === 'style' && name_1 === '_cssText';\r\n                if (isRemoteOrDynamicCss && hackCss && typeof value === 'string') {\r\n                    value = addHoverClass(value, cache);\r\n                }\r\n                if ((isTextarea || isRemoteOrDynamicCss) && typeof value === 'string') {\r\n                    var child = doc.createTextNode(value);\r\n                    for (var _i = 0, _a = Array.from(node_1.childNodes); _i < _a.length; _i++) {\r\n                        var c = _a[_i];\r\n                        if (c.nodeType === node_1.TEXT_NODE) {\r\n                            node_1.removeChild(c);\r\n                        }\r\n                    }\r\n                    node_1.appendChild(child);\r\n                    continue;\r\n                }\r\n                try {\r\n                    if (n.isSVG && name_1 === 'xlink:href') {\r\n                        node_1.setAttributeNS('http://www.w3.org/1999/xlink', name_1, value.toString());\r\n                    }\r\n                    else if (name_1 === 'onload' ||\r\n                        name_1 === 'onclick' ||\r\n                        name_1.substring(0, 7) === 'onmouse') {\r\n                        node_1.setAttribute('_' + name_1, value.toString());\r\n                    }\r\n                    else if (tagName === 'meta' &&\r\n                        n.attributes['http-equiv'] === 'Content-Security-Policy' &&\r\n                        name_1 === 'content') {\r\n                        node_1.setAttribute('csp-content', value.toString());\r\n                        continue;\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        (n.attributes.rel === 'preload' ||\r\n                            n.attributes.rel === 'modulepreload') &&\r\n                        n.attributes.as === 'script') {\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        n.attributes.rel === 'prefetch' &&\r\n                        typeof n.attributes.href === 'string' &&\r\n                        n.attributes.href.endsWith('.js')) {\r\n                    }\r\n                    else if (tagName === 'img' &&\r\n                        n.attributes.srcset &&\r\n                        n.attributes.rr_dataURL) {\r\n                        node_1.setAttribute('rrweb-original-srcset', n.attributes.srcset);\r\n                    }\r\n                    else {\r\n                        node_1.setAttribute(name_1, value.toString());\r\n                    }\r\n                }\r\n                catch (error) {\r\n                }\r\n            }\r\n            var _loop_1 = function (name_2) {\r\n                var value = specialAttributes[name_2];\r\n                if (tagName === 'canvas' && name_2 === 'rr_dataURL') {\r\n                    var image_1 = document.createElement('img');\r\n                    image_1.onload = function () {\r\n                        var ctx = node_1.getContext('2d');\r\n                        if (ctx) {\r\n                            ctx.drawImage(image_1, 0, 0, image_1.width, image_1.height);\r\n                        }\r\n                    };\r\n                    image_1.src = value.toString();\r\n                    if (node_1.RRNodeType)\r\n                        node_1.rr_dataURL = value.toString();\r\n                }\r\n                else if (tagName === 'img' && name_2 === 'rr_dataURL') {\r\n                    var image = node_1;\r\n                    if (!image.currentSrc.startsWith('data:')) {\r\n                        image.setAttribute('rrweb-original-src', n.attributes.src);\r\n                        image.src = value.toString();\r\n                    }\r\n                }\r\n                if (name_2 === 'rr_width') {\r\n                    node_1.style.width = value.toString();\r\n                }\r\n                else if (name_2 === 'rr_height') {\r\n                    node_1.style.height = value.toString();\r\n                }\r\n                else if (name_2 === 'rr_mediaCurrentTime' &&\r\n                    typeof value === 'number') {\r\n                    node_1.currentTime = value;\r\n                }\r\n                else if (name_2 === 'rr_mediaState') {\r\n                    switch (value) {\r\n                        case 'played':\r\n                            node_1\r\n                                .play()[\"catch\"](function (e) { return console.warn('media playback error', e); });\r\n                            break;\r\n                        case 'paused':\r\n                            node_1.pause();\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n            for (var name_2 in specialAttributes) {\r\n                _loop_1(name_2);\r\n            }\r\n            if (n.isShadowHost) {\r\n                if (!node_1.shadowRoot) {\r\n                    node_1.attachShadow({ mode: 'open' });\r\n                }\r\n                else {\r\n                    while (node_1.shadowRoot.firstChild) {\r\n                        node_1.shadowRoot.removeChild(node_1.shadowRoot.firstChild);\r\n                    }\r\n                }\r\n            }\r\n            return node_1;\r\n        }\r\n        case NodeType.Text:\r\n            return doc.createTextNode(n.isStyle && hackCss\r\n                ? addHoverClass(n.textContent, cache)\r\n                : n.textContent);\r\n        case NodeType.CDATA:\r\n            return doc.createCDATASection(n.textContent);\r\n        case NodeType.Comment:\r\n            return doc.createComment(n.textContent);\r\n        default:\r\n            return null;\r\n    }\r\n}\r\nfunction buildNodeWithSN(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.hackCss, hackCss = _b === void 0 ? true : _b, afterAppend = options.afterAppend, cache = options.cache;\r\n    if (mirror.has(n.id)) {\r\n        var nodeInMirror = mirror.getNode(n.id);\r\n        var meta = mirror.getMeta(nodeInMirror);\r\n        if (isNodeMetaEqual(meta, n))\r\n            return mirror.getNode(n.id);\r\n    }\r\n    var node = buildNode(n, { doc: doc, hackCss: hackCss, cache: cache });\r\n    if (!node) {\r\n        return null;\r\n    }\r\n    if (n.rootId && mirror.getNode(n.rootId) !== doc) {\r\n        mirror.replace(n.rootId, doc);\r\n    }\r\n    if (n.type === NodeType.Document) {\r\n        doc.close();\r\n        doc.open();\r\n        if (n.compatMode === 'BackCompat' &&\r\n            n.childNodes &&\r\n            n.childNodes[0].type !== NodeType.DocumentType) {\r\n            if (n.childNodes[0].type === NodeType.Element &&\r\n                'xmlns' in n.childNodes[0].attributes &&\r\n                n.childNodes[0].attributes.xmlns === 'http://www.w3.org/1999/xhtml') {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">');\r\n            }\r\n            else {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">');\r\n            }\r\n        }\r\n        node = doc;\r\n    }\r\n    mirror.add(node, n);\r\n    if ((n.type === NodeType.Document || n.type === NodeType.Element) &&\r\n        !skipChild) {\r\n        var _loop_2 = function (childN) {\r\n            var childNode = buildNodeWithSN(childN, {\r\n                doc: doc,\r\n                mirror: mirror,\r\n                skipChild: false,\r\n                hackCss: hackCss,\r\n                afterAppend: afterAppend,\r\n                cache: cache\r\n            });\r\n            if (!childNode) {\r\n                console.warn('Failed to rebuild', childN);\r\n                return \"continue\";\r\n            }\r\n            if (childN.isShadow && isElement(node) && node.shadowRoot) {\r\n                node.shadowRoot.appendChild(childNode);\r\n            }\r\n            else if (n.type === NodeType.Document &&\r\n                childN.type == NodeType.Element) {\r\n                var htmlElement = childNode;\r\n                var body_1 = null;\r\n                htmlElement.childNodes.forEach(function (child) {\r\n                    if (child.nodeName === 'BODY')\r\n                        body_1 = child;\r\n                });\r\n                if (body_1) {\r\n                    htmlElement.removeChild(body_1);\r\n                    node.appendChild(childNode);\r\n                    htmlElement.appendChild(body_1);\r\n                }\r\n                else {\r\n                    node.appendChild(childNode);\r\n                }\r\n            }\r\n            else {\r\n                node.appendChild(childNode);\r\n            }\r\n            if (afterAppend) {\r\n                afterAppend(childNode, childN.id);\r\n            }\r\n        };\r\n        for (var _i = 0, _c = n.childNodes; _i < _c.length; _i++) {\r\n            var childN = _c[_i];\r\n            _loop_2(childN);\r\n        }\r\n    }\r\n    return node;\r\n}\r\nfunction visit(mirror, onVisit) {\r\n    function walk(node) {\r\n        onVisit(node);\r\n    }\r\n    for (var _i = 0, _a = mirror.getIds(); _i < _a.length; _i++) {\r\n        var id = _a[_i];\r\n        if (mirror.has(id)) {\r\n            walk(mirror.getNode(id));\r\n        }\r\n    }\r\n}\r\nfunction handleScroll(node, mirror) {\r\n    var n = mirror.getMeta(node);\r\n    if ((n === null || n === void 0 ? void 0 : n.type) !== NodeType.Element) {\r\n        return;\r\n    }\r\n    var el = node;\r\n    for (var name_3 in n.attributes) {\r\n        if (!(Object.prototype.hasOwnProperty.call(n.attributes, name_3) &&\r\n            name_3.startsWith('rr_'))) {\r\n            continue;\r\n        }\r\n        var value = n.attributes[name_3];\r\n        if (name_3 === 'rr_scrollLeft') {\r\n            el.scrollLeft = value;\r\n        }\r\n        if (name_3 === 'rr_scrollTop') {\r\n            el.scrollTop = value;\r\n        }\r\n    }\r\n}\r\nfunction rebuild(n, options) {\r\n    var doc = options.doc, onVisit = options.onVisit, _a = options.hackCss, hackCss = _a === void 0 ? true : _a, afterAppend = options.afterAppend, cache = options.cache, _b = options.mirror, mirror = _b === void 0 ? new Mirror() : _b;\r\n    var node = buildNodeWithSN(n, {\r\n        doc: doc,\r\n        mirror: mirror,\r\n        skipChild: false,\r\n        hackCss: hackCss,\r\n        afterAppend: afterAppend,\r\n        cache: cache\r\n    });\r\n    visit(mirror, function (visitedNode) {\r\n        if (onVisit) {\r\n            onVisit(visitedNode);\r\n        }\r\n        handleScroll(visitedNode, mirror);\r\n    });\r\n    return node;\r\n}\n\nexport { IGNORED_NODE, Mirror, NodeType, addHoverClass, buildNodeWithSN, classMatchesRegex, createCache, createMirror, escapeImportStatement, genId, getInputType, ignoreAttribute, is2DCanvasBlank, isCSSImportRule, isElement, isNativeShadowDom, isNodeMetaEqual, isShadowRoot, maskInputValue, needMaskingText, rebuild, serializeNodeWithId, snapshot, stringifyRule, stringifyStylesheet, toLowerCase, transformAttribute, validateStringifiedCssRule };\n","import { classMatchesRegex, IGNORED_NODE, isShadowRoot } from '../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nfunction on(type, fn, target = document) {\r\n    const options = { capture: true, passive: true };\r\n    target.addEventListener(type, fn, options);\r\n    return () => target.removeEventListener(type, fn, options);\r\n}\r\nconst DEPARTED_MIRROR_ACCESS_WARNING = 'Please stop import mirror directly. Instead of that,' +\r\n    '\\r\\n' +\r\n    'now you can use replayer.getMirror() to access the mirror instance of a replayer,' +\r\n    '\\r\\n' +\r\n    'or you can use record.mirror to access the mirror instance during recording.';\r\nlet _mirror = {\r\n    map: {},\r\n    getId() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return -1;\r\n    },\r\n    getNode() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return null;\r\n    },\r\n    removeNodeFromMap() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n    has() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return false;\r\n    },\r\n    reset() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n};\r\nif (typeof window !== 'undefined' && window.Proxy && window.Reflect) {\r\n    _mirror = new Proxy(_mirror, {\r\n        get(target, prop, receiver) {\r\n            if (prop === 'map') {\r\n                console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n            }\r\n            return Reflect.get(target, prop, receiver);\r\n        },\r\n    });\r\n}\r\nfunction throttle(func, wait, options = {}) {\r\n    let timeout = null;\r\n    let previous = 0;\r\n    return function (...args) {\r\n        const now = Date.now();\r\n        if (!previous && options.leading === false) {\r\n            previous = now;\r\n        }\r\n        const remaining = wait - (now - previous);\r\n        const context = this;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = now;\r\n            func.apply(context, args);\r\n        }\r\n        else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(() => {\r\n                previous = options.leading === false ? 0 : Date.now();\r\n                timeout = null;\r\n                func.apply(context, args);\r\n            }, remaining);\r\n        }\r\n    };\r\n}\r\nfunction hookSetter(target, key, d, isRevoked, win = window) {\r\n    const original = win.Object.getOwnPropertyDescriptor(target, key);\r\n    win.Object.defineProperty(target, key, isRevoked\r\n        ? d\r\n        : {\r\n            set(value) {\r\n                setTimeout(() => {\r\n                    d.set.call(this, value);\r\n                }, 0);\r\n                if (original && original.set) {\r\n                    original.set.call(this, value);\r\n                }\r\n            },\r\n        });\r\n    return () => hookSetter(target, key, original || {}, true);\r\n}\r\nfunction patch(source, name, replacement) {\r\n    try {\r\n        if (!(name in source)) {\r\n            return () => {\r\n            };\r\n        }\r\n        const original = source[name];\r\n        const wrapped = replacement(original);\r\n        if (typeof wrapped === 'function') {\r\n            wrapped.prototype = wrapped.prototype || {};\r\n            Object.defineProperties(wrapped, {\r\n                __rrweb_original__: {\r\n                    enumerable: false,\r\n                    value: original,\r\n                },\r\n            });\r\n        }\r\n        source[name] = wrapped;\r\n        return () => {\r\n            source[name] = original;\r\n        };\r\n    }\r\n    catch (_a) {\r\n        return () => {\r\n        };\r\n    }\r\n}\r\nlet nowTimestamp = Date.now;\r\nif (!(/[1-9][0-9]{12}/.test(Date.now().toString()))) {\r\n    nowTimestamp = () => new Date().getTime();\r\n}\r\nfunction getWindowScroll(win) {\r\n    var _a, _b, _c, _d, _e, _f;\r\n    const doc = win.document;\r\n    return {\r\n        left: doc.scrollingElement\r\n            ? doc.scrollingElement.scrollLeft\r\n            : win.pageXOffset !== undefined\r\n                ? win.pageXOffset\r\n                : (doc === null || doc === void 0 ? void 0 : doc.documentElement.scrollLeft) ||\r\n                    ((_b = (_a = doc === null || doc === void 0 ? void 0 : doc.body) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.scrollLeft) ||\r\n                    ((_c = doc === null || doc === void 0 ? void 0 : doc.body) === null || _c === void 0 ? void 0 : _c.scrollLeft) ||\r\n                    0,\r\n        top: doc.scrollingElement\r\n            ? doc.scrollingElement.scrollTop\r\n            : win.pageYOffset !== undefined\r\n                ? win.pageYOffset\r\n                : (doc === null || doc === void 0 ? void 0 : doc.documentElement.scrollTop) ||\r\n                    ((_e = (_d = doc === null || doc === void 0 ? void 0 : doc.body) === null || _d === void 0 ? void 0 : _d.parentElement) === null || _e === void 0 ? void 0 : _e.scrollTop) ||\r\n                    ((_f = doc === null || doc === void 0 ? void 0 : doc.body) === null || _f === void 0 ? void 0 : _f.scrollTop) ||\r\n                    0,\r\n    };\r\n}\r\nfunction getWindowHeight() {\r\n    return (window.innerHeight ||\r\n        (document.documentElement && document.documentElement.clientHeight) ||\r\n        (document.body && document.body.clientHeight));\r\n}\r\nfunction getWindowWidth() {\r\n    return (window.innerWidth ||\r\n        (document.documentElement && document.documentElement.clientWidth) ||\r\n        (document.body && document.body.clientWidth));\r\n}\r\nfunction isBlocked(node, blockClass, blockSelector, checkAncestors) {\r\n    if (!node) {\r\n        return false;\r\n    }\r\n    const el = node.nodeType === node.ELEMENT_NODE\r\n        ? node\r\n        : node.parentElement;\r\n    if (!el)\r\n        return false;\r\n    try {\r\n        if (typeof blockClass === 'string') {\r\n            if (el.classList.contains(blockClass))\r\n                return true;\r\n            if (checkAncestors && el.closest('.' + blockClass) !== null)\r\n                return true;\r\n        }\r\n        else {\r\n            if (classMatchesRegex(el, blockClass, checkAncestors))\r\n                return true;\r\n        }\r\n    }\r\n    catch (e) {\r\n    }\r\n    if (blockSelector) {\r\n        if (el.matches(blockSelector))\r\n            return true;\r\n        if (checkAncestors && el.closest(blockSelector) !== null)\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSerialized(n, mirror) {\r\n    return mirror.getId(n) !== -1;\r\n}\r\nfunction isIgnored(n, mirror) {\r\n    return mirror.getId(n) === IGNORED_NODE;\r\n}\r\nfunction isAncestorRemoved(target, mirror) {\r\n    if (isShadowRoot(target)) {\r\n        return false;\r\n    }\r\n    const id = mirror.getId(target);\r\n    if (!mirror.has(id)) {\r\n        return true;\r\n    }\r\n    if (target.parentNode &&\r\n        target.parentNode.nodeType === target.DOCUMENT_NODE) {\r\n        return false;\r\n    }\r\n    if (!target.parentNode) {\r\n        return true;\r\n    }\r\n    return isAncestorRemoved(target.parentNode, mirror);\r\n}\r\nfunction legacy_isTouchEvent(event) {\r\n    return Boolean(event.changedTouches);\r\n}\r\nfunction polyfill(win = window) {\r\n    if ('NodeList' in win && !win.NodeList.prototype.forEach) {\r\n        win.NodeList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if ('DOMTokenList' in win && !win.DOMTokenList.prototype.forEach) {\r\n        win.DOMTokenList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if (!Node.prototype.contains) {\r\n        Node.prototype.contains = (...args) => {\r\n            let node = args[0];\r\n            if (!(0 in args)) {\r\n                throw new TypeError('1 argument is required');\r\n            }\r\n            do {\r\n                if (this === node) {\r\n                    return true;\r\n                }\r\n            } while ((node = node && node.parentNode));\r\n            return false;\r\n        };\r\n    }\r\n}\r\nfunction queueToResolveTrees(queue) {\r\n    const queueNodeMap = {};\r\n    const putIntoMap = (m, parent) => {\r\n        const nodeInTree = {\r\n            value: m,\r\n            parent,\r\n            children: [],\r\n        };\r\n        queueNodeMap[m.node.id] = nodeInTree;\r\n        return nodeInTree;\r\n    };\r\n    const queueNodeTrees = [];\r\n    for (const mutation of queue) {\r\n        const { nextId, parentId } = mutation;\r\n        if (nextId && nextId in queueNodeMap) {\r\n            const nextInTree = queueNodeMap[nextId];\r\n            if (nextInTree.parent) {\r\n                const idx = nextInTree.parent.children.indexOf(nextInTree);\r\n                nextInTree.parent.children.splice(idx, 0, putIntoMap(mutation, nextInTree.parent));\r\n            }\r\n            else {\r\n                const idx = queueNodeTrees.indexOf(nextInTree);\r\n                queueNodeTrees.splice(idx, 0, putIntoMap(mutation, null));\r\n            }\r\n            continue;\r\n        }\r\n        if (parentId in queueNodeMap) {\r\n            const parentInTree = queueNodeMap[parentId];\r\n            parentInTree.children.push(putIntoMap(mutation, parentInTree));\r\n            continue;\r\n        }\r\n        queueNodeTrees.push(putIntoMap(mutation, null));\r\n    }\r\n    return queueNodeTrees;\r\n}\r\nfunction iterateResolveTree(tree, cb) {\r\n    cb(tree.value);\r\n    for (let i = tree.children.length - 1; i >= 0; i--) {\r\n        iterateResolveTree(tree.children[i], cb);\r\n    }\r\n}\r\nfunction isSerializedIframe(n, mirror) {\r\n    return Boolean(n.nodeName === 'IFRAME' && mirror.getMeta(n));\r\n}\r\nfunction isSerializedStylesheet(n, mirror) {\r\n    return Boolean(n.nodeName === 'LINK' &&\r\n        n.nodeType === n.ELEMENT_NODE &&\r\n        n.getAttribute &&\r\n        n.getAttribute('rel') === 'stylesheet' &&\r\n        mirror.getMeta(n));\r\n}\r\nfunction getBaseDimension(node, rootIframe) {\r\n    var _a, _b;\r\n    const frameElement = (_b = (_a = node.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) === null || _b === void 0 ? void 0 : _b.frameElement;\r\n    if (!frameElement || frameElement === rootIframe) {\r\n        return {\r\n            x: 0,\r\n            y: 0,\r\n            relativeScale: 1,\r\n            absoluteScale: 1,\r\n        };\r\n    }\r\n    const frameDimension = frameElement.getBoundingClientRect();\r\n    const frameBaseDimension = getBaseDimension(frameElement, rootIframe);\r\n    const relativeScale = frameDimension.height / frameElement.clientHeight;\r\n    return {\r\n        x: frameDimension.x * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.x,\r\n        y: frameDimension.y * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.y,\r\n        relativeScale,\r\n        absoluteScale: frameBaseDimension.absoluteScale * relativeScale,\r\n    };\r\n}\r\nfunction hasShadowRoot(n) {\r\n    return Boolean(n === null || n === void 0 ? void 0 : n.shadowRoot);\r\n}\r\nfunction getNestedRule(rules, position) {\r\n    const rule = rules[position[0]];\r\n    if (position.length === 1) {\r\n        return rule;\r\n    }\r\n    else {\r\n        return getNestedRule(rule.cssRules[position[1]].cssRules, position.slice(2));\r\n    }\r\n}\r\nfunction getPositionsAndIndex(nestedIndex) {\r\n    const positions = [...nestedIndex];\r\n    const index = positions.pop();\r\n    return { positions, index };\r\n}\r\nfunction uniqueTextMutations(mutations) {\r\n    const idSet = new Set();\r\n    const uniqueMutations = [];\r\n    for (let i = mutations.length; i--;) {\r\n        const mutation = mutations[i];\r\n        if (!idSet.has(mutation.id)) {\r\n            uniqueMutations.push(mutation);\r\n            idSet.add(mutation.id);\r\n        }\r\n    }\r\n    return uniqueMutations;\r\n}\r\nclass StyleSheetMirror {\r\n    constructor() {\r\n        this.id = 1;\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n    }\r\n    getId(stylesheet) {\r\n        var _a;\r\n        return (_a = this.styleIDMap.get(stylesheet)) !== null && _a !== void 0 ? _a : -1;\r\n    }\r\n    has(stylesheet) {\r\n        return this.styleIDMap.has(stylesheet);\r\n    }\r\n    add(stylesheet, id) {\r\n        if (this.has(stylesheet))\r\n            return this.getId(stylesheet);\r\n        let newId;\r\n        if (id === undefined) {\r\n            newId = this.id++;\r\n        }\r\n        else\r\n            newId = id;\r\n        this.styleIDMap.set(stylesheet, newId);\r\n        this.idStyleMap.set(newId, stylesheet);\r\n        return newId;\r\n    }\r\n    getStyle(id) {\r\n        return this.idStyleMap.get(id) || null;\r\n    }\r\n    reset() {\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n        this.id = 1;\r\n    }\r\n    generateId() {\r\n        return this.id++;\r\n    }\r\n}\r\nfunction getShadowHost(n) {\r\n    var _a, _b;\r\n    let shadowHost = null;\r\n    if (((_b = (_a = n.getRootNode) === null || _a === void 0 ? void 0 : _a.call(n)) === null || _b === void 0 ? void 0 : _b.nodeType) === Node.DOCUMENT_FRAGMENT_NODE &&\r\n        n.getRootNode().host)\r\n        shadowHost = n.getRootNode().host;\r\n    return shadowHost;\r\n}\r\nfunction getRootShadowHost(n) {\r\n    let rootShadowHost = n;\r\n    let shadowHost;\r\n    while ((shadowHost = getShadowHost(rootShadowHost)))\r\n        rootShadowHost = shadowHost;\r\n    return rootShadowHost;\r\n}\r\nfunction shadowHostInDom(n) {\r\n    const doc = n.ownerDocument;\r\n    if (!doc)\r\n        return false;\r\n    const shadowHost = getRootShadowHost(n);\r\n    return doc.contains(shadowHost);\r\n}\r\nfunction inDom(n) {\r\n    const doc = n.ownerDocument;\r\n    if (!doc)\r\n        return false;\r\n    return doc.contains(n) || shadowHostInDom(n);\r\n}\n\nexport { StyleSheetMirror, _mirror, getBaseDimension, getNestedRule, getPositionsAndIndex, getRootShadowHost, getShadowHost, getWindowHeight, getWindowScroll, getWindowWidth, hasShadowRoot, hookSetter, inDom, isAncestorRemoved, isBlocked, isIgnored, isSerialized, isSerializedIframe, isSerializedStylesheet, iterateResolveTree, legacy_isTouchEvent, nowTimestamp, on, patch, polyfill, queueToResolveTrees, shadowHostInDom, throttle, uniqueTextMutations };\n","var EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[EventType2[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n  EventType2[EventType2[\"Load\"] = 1] = \"Load\";\n  EventType2[EventType2[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n  EventType2[EventType2[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n  EventType2[EventType2[\"Meta\"] = 4] = \"Meta\";\n  EventType2[EventType2[\"Custom\"] = 5] = \"Custom\";\n  EventType2[EventType2[\"Plugin\"] = 6] = \"Plugin\";\n  return EventType2;\n})(EventType || {});\nvar IncrementalSource = /* @__PURE__ */ ((IncrementalSource2) => {\n  IncrementalSource2[IncrementalSource2[\"Mutation\"] = 0] = \"Mutation\";\n  IncrementalSource2[IncrementalSource2[\"MouseMove\"] = 1] = \"MouseMove\";\n  IncrementalSource2[IncrementalSource2[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n  IncrementalSource2[IncrementalSource2[\"Scroll\"] = 3] = \"Scroll\";\n  IncrementalSource2[IncrementalSource2[\"ViewportResize\"] = 4] = \"ViewportResize\";\n  IncrementalSource2[IncrementalSource2[\"Input\"] = 5] = \"Input\";\n  IncrementalSource2[IncrementalSource2[\"TouchMove\"] = 6] = \"TouchMove\";\n  IncrementalSource2[IncrementalSource2[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n  IncrementalSource2[IncrementalSource2[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n  IncrementalSource2[IncrementalSource2[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n  IncrementalSource2[IncrementalSource2[\"Font\"] = 10] = \"Font\";\n  IncrementalSource2[IncrementalSource2[\"Log\"] = 11] = \"Log\";\n  IncrementalSource2[IncrementalSource2[\"Drag\"] = 12] = \"Drag\";\n  IncrementalSource2[IncrementalSource2[\"StyleDeclaration\"] = 13] = \"StyleDeclaration\";\n  IncrementalSource2[IncrementalSource2[\"Selection\"] = 14] = \"Selection\";\n  IncrementalSource2[IncrementalSource2[\"AdoptedStyleSheet\"] = 15] = \"AdoptedStyleSheet\";\n  return IncrementalSource2;\n})(IncrementalSource || {});\nvar MouseInteractions = /* @__PURE__ */ ((MouseInteractions2) => {\n  MouseInteractions2[MouseInteractions2[\"MouseUp\"] = 0] = \"MouseUp\";\n  MouseInteractions2[MouseInteractions2[\"MouseDown\"] = 1] = \"MouseDown\";\n  MouseInteractions2[MouseInteractions2[\"Click\"] = 2] = \"Click\";\n  MouseInteractions2[MouseInteractions2[\"ContextMenu\"] = 3] = \"ContextMenu\";\n  MouseInteractions2[MouseInteractions2[\"DblClick\"] = 4] = \"DblClick\";\n  MouseInteractions2[MouseInteractions2[\"Focus\"] = 5] = \"Focus\";\n  MouseInteractions2[MouseInteractions2[\"Blur\"] = 6] = \"Blur\";\n  MouseInteractions2[MouseInteractions2[\"TouchStart\"] = 7] = \"TouchStart\";\n  MouseInteractions2[MouseInteractions2[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n  MouseInteractions2[MouseInteractions2[\"TouchEnd\"] = 9] = \"TouchEnd\";\n  MouseInteractions2[MouseInteractions2[\"TouchCancel\"] = 10] = \"TouchCancel\";\n  return MouseInteractions2;\n})(MouseInteractions || {});\nvar PointerTypes = /* @__PURE__ */ ((PointerTypes2) => {\n  PointerTypes2[PointerTypes2[\"Mouse\"] = 0] = \"Mouse\";\n  PointerTypes2[PointerTypes2[\"Pen\"] = 1] = \"Pen\";\n  PointerTypes2[PointerTypes2[\"Touch\"] = 2] = \"Touch\";\n  return PointerTypes2;\n})(PointerTypes || {});\nvar CanvasContext = /* @__PURE__ */ ((CanvasContext2) => {\n  CanvasContext2[CanvasContext2[\"2D\"] = 0] = \"2D\";\n  CanvasContext2[CanvasContext2[\"WebGL\"] = 1] = \"WebGL\";\n  CanvasContext2[CanvasContext2[\"WebGL2\"] = 2] = \"WebGL2\";\n  return CanvasContext2;\n})(CanvasContext || {});\nvar ReplayerEvents = /* @__PURE__ */ ((ReplayerEvents2) => {\n  ReplayerEvents2[\"Start\"] = \"start\";\n  ReplayerEvents2[\"Pause\"] = \"pause\";\n  ReplayerEvents2[\"Resume\"] = \"resume\";\n  ReplayerEvents2[\"Resize\"] = \"resize\";\n  ReplayerEvents2[\"Finish\"] = \"finish\";\n  ReplayerEvents2[\"FullsnapshotRebuilded\"] = \"fullsnapshot-rebuilded\";\n  ReplayerEvents2[\"LoadStylesheetStart\"] = \"load-stylesheet-start\";\n  ReplayerEvents2[\"LoadStylesheetEnd\"] = \"load-stylesheet-end\";\n  ReplayerEvents2[\"SkipStart\"] = \"skip-start\";\n  ReplayerEvents2[\"SkipEnd\"] = \"skip-end\";\n  ReplayerEvents2[\"MouseInteraction\"] = \"mouse-interaction\";\n  ReplayerEvents2[\"EventCast\"] = \"event-cast\";\n  ReplayerEvents2[\"CustomEvent\"] = \"custom-event\";\n  ReplayerEvents2[\"Flush\"] = \"flush\";\n  ReplayerEvents2[\"StateChange\"] = \"state-change\";\n  ReplayerEvents2[\"PlayBack\"] = \"play-back\";\n  ReplayerEvents2[\"Destroy\"] = \"destroy\";\n  return ReplayerEvents2;\n})(ReplayerEvents || {});\n\nexport { CanvasContext, EventType, IncrementalSource, MouseInteractions, PointerTypes, ReplayerEvents };\n","import { isShadowRoot, isNativeShadowDom, getInputType, maskInputValue, ignoreAttribute, transformAttribute, toLowerCase, needMaskingText, IGNORED_NODE, serializeNodeWithId } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { isIgnored, isBlocked, isSerialized, isAncestorRemoved, hasShadowRoot, inDom, getShadowHost, isSerializedIframe, isSerializedStylesheet } from '../utils.js';\n\nfunction isNodeInLinkedList(n) {\r\n    return '__ln' in n;\r\n}\r\nclass DoubleLinkedList {\r\n    constructor() {\r\n        this.length = 0;\r\n        this.head = null;\r\n        this.tail = null;\r\n    }\r\n    get(position) {\r\n        if (position >= this.length) {\r\n            throw new Error('Position outside of list range');\r\n        }\r\n        let current = this.head;\r\n        for (let index = 0; index < position; index++) {\r\n            current = (current === null || current === void 0 ? void 0 : current.next) || null;\r\n        }\r\n        return current;\r\n    }\r\n    addNode(n) {\r\n        const node = {\r\n            value: n,\r\n            previous: null,\r\n            next: null,\r\n        };\r\n        n.__ln = node;\r\n        if (n.previousSibling && isNodeInLinkedList(n.previousSibling)) {\r\n            const current = n.previousSibling.__ln.next;\r\n            node.next = current;\r\n            node.previous = n.previousSibling.__ln;\r\n            n.previousSibling.__ln.next = node;\r\n            if (current) {\r\n                current.previous = node;\r\n            }\r\n        }\r\n        else if (n.nextSibling &&\r\n            isNodeInLinkedList(n.nextSibling) &&\r\n            n.nextSibling.__ln.previous) {\r\n            const current = n.nextSibling.__ln.previous;\r\n            node.previous = current;\r\n            node.next = n.nextSibling.__ln;\r\n            n.nextSibling.__ln.previous = node;\r\n            if (current) {\r\n                current.next = node;\r\n            }\r\n        }\r\n        else {\r\n            if (this.head) {\r\n                this.head.previous = node;\r\n            }\r\n            node.next = this.head;\r\n            this.head = node;\r\n        }\r\n        if (node.next === null) {\r\n            this.tail = node;\r\n        }\r\n        this.length++;\r\n    }\r\n    removeNode(n) {\r\n        const current = n.__ln;\r\n        if (!this.head) {\r\n            return;\r\n        }\r\n        if (!current.previous) {\r\n            this.head = current.next;\r\n            if (this.head) {\r\n                this.head.previous = null;\r\n            }\r\n            else {\r\n                this.tail = null;\r\n            }\r\n        }\r\n        else {\r\n            current.previous.next = current.next;\r\n            if (current.next) {\r\n                current.next.previous = current.previous;\r\n            }\r\n            else {\r\n                this.tail = current.previous;\r\n            }\r\n        }\r\n        if (n.__ln) {\r\n            delete n.__ln;\r\n        }\r\n        this.length--;\r\n    }\r\n}\r\nconst moveKey = (id, parentId) => `${id}@${parentId}`;\r\nclass MutationBuffer {\r\n    constructor() {\r\n        this.frozen = false;\r\n        this.locked = false;\r\n        this.texts = [];\r\n        this.attributes = [];\r\n        this.removes = [];\r\n        this.mapRemoves = [];\r\n        this.movedMap = {};\r\n        this.addedSet = new Set();\r\n        this.movedSet = new Set();\r\n        this.droppedSet = new Set();\r\n        this.processMutations = (mutations) => {\r\n            mutations.forEach(this.processMutation);\r\n            this.emit();\r\n        };\r\n        this.emit = () => {\r\n            if (this.frozen || this.locked) {\r\n                return;\r\n            }\r\n            const adds = [];\r\n            const addedIds = new Set();\r\n            const addList = new DoubleLinkedList();\r\n            const getNextId = (n) => {\r\n                let ns = n;\r\n                let nextId = IGNORED_NODE;\r\n                while (nextId === IGNORED_NODE) {\r\n                    ns = ns && ns.nextSibling;\r\n                    nextId = ns && this.mirror.getId(ns);\r\n                }\r\n                return nextId;\r\n            };\r\n            const pushAdd = (n) => {\r\n                if (!n.parentNode || !inDom(n)) {\r\n                    return;\r\n                }\r\n                const parentId = isShadowRoot(n.parentNode)\r\n                    ? this.mirror.getId(getShadowHost(n))\r\n                    : this.mirror.getId(n.parentNode);\r\n                const nextId = getNextId(n);\r\n                if (parentId === -1 || nextId === -1) {\r\n                    return addList.addNode(n);\r\n                }\r\n                const sn = serializeNodeWithId(n, {\r\n                    doc: this.doc,\r\n                    mirror: this.mirror,\r\n                    blockClass: this.blockClass,\r\n                    blockSelector: this.blockSelector,\r\n                    maskTextClass: this.maskTextClass,\r\n                    maskTextSelector: this.maskTextSelector,\r\n                    skipChild: true,\r\n                    newlyAddedElement: true,\r\n                    inlineStylesheet: this.inlineStylesheet,\r\n                    maskInputOptions: this.maskInputOptions,\r\n                    maskTextFn: this.maskTextFn,\r\n                    maskInputFn: this.maskInputFn,\r\n                    slimDOMOptions: this.slimDOMOptions,\r\n                    dataURLOptions: this.dataURLOptions,\r\n                    recordCanvas: this.recordCanvas,\r\n                    inlineImages: this.inlineImages,\r\n                    onSerialize: (currentN) => {\r\n                        if (isSerializedIframe(currentN, this.mirror)) {\r\n                            this.iframeManager.addIframe(currentN);\r\n                        }\r\n                        if (isSerializedStylesheet(currentN, this.mirror)) {\r\n                            this.stylesheetManager.trackLinkElement(currentN);\r\n                        }\r\n                        if (hasShadowRoot(n)) {\r\n                            this.shadowDomManager.addShadowRoot(n.shadowRoot, this.doc);\r\n                        }\r\n                    },\r\n                    onIframeLoad: (iframe, childSn) => {\r\n                        this.iframeManager.attachIframe(iframe, childSn);\r\n                        this.shadowDomManager.observeAttachShadow(iframe);\r\n                    },\r\n                    onStylesheetLoad: (link, childSn) => {\r\n                        this.stylesheetManager.attachLinkElement(link, childSn);\r\n                    },\r\n                });\r\n                if (sn) {\r\n                    adds.push({\r\n                        parentId,\r\n                        nextId,\r\n                        node: sn,\r\n                    });\r\n                    addedIds.add(sn.id);\r\n                }\r\n            };\r\n            while (this.mapRemoves.length) {\r\n                this.mirror.removeNodeFromMap(this.mapRemoves.shift());\r\n            }\r\n            for (const n of this.movedSet) {\r\n                if (isParentRemoved(this.removes, n, this.mirror) &&\r\n                    !this.movedSet.has(n.parentNode)) {\r\n                    continue;\r\n                }\r\n                pushAdd(n);\r\n            }\r\n            for (const n of this.addedSet) {\r\n                if (!isAncestorInSet(this.droppedSet, n) &&\r\n                    !isParentRemoved(this.removes, n, this.mirror)) {\r\n                    pushAdd(n);\r\n                }\r\n                else if (isAncestorInSet(this.movedSet, n)) {\r\n                    pushAdd(n);\r\n                }\r\n                else {\r\n                    this.droppedSet.add(n);\r\n                }\r\n            }\r\n            let candidate = null;\r\n            while (addList.length) {\r\n                let node = null;\r\n                if (candidate) {\r\n                    const parentId = this.mirror.getId(candidate.value.parentNode);\r\n                    const nextId = getNextId(candidate.value);\r\n                    if (parentId !== -1 && nextId !== -1) {\r\n                        node = candidate;\r\n                    }\r\n                }\r\n                if (!node) {\r\n                    let tailNode = addList.tail;\r\n                    while (tailNode) {\r\n                        const _node = tailNode;\r\n                        tailNode = tailNode.previous;\r\n                        if (_node) {\r\n                            const parentId = this.mirror.getId(_node.value.parentNode);\r\n                            const nextId = getNextId(_node.value);\r\n                            if (nextId === -1)\r\n                                continue;\r\n                            else if (parentId !== -1) {\r\n                                node = _node;\r\n                                break;\r\n                            }\r\n                            else {\r\n                                const unhandledNode = _node.value;\r\n                                if (unhandledNode.parentNode &&\r\n                                    unhandledNode.parentNode.nodeType ===\r\n                                        Node.DOCUMENT_FRAGMENT_NODE) {\r\n                                    const shadowHost = unhandledNode.parentNode\r\n                                        .host;\r\n                                    const parentId = this.mirror.getId(shadowHost);\r\n                                    if (parentId !== -1) {\r\n                                        node = _node;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (!node) {\r\n                    while (addList.head) {\r\n                        addList.removeNode(addList.head.value);\r\n                    }\r\n                    break;\r\n                }\r\n                candidate = node.previous;\r\n                addList.removeNode(node.value);\r\n                pushAdd(node.value);\r\n            }\r\n            const payload = {\r\n                texts: this.texts\r\n                    .map((text) => ({\r\n                    id: this.mirror.getId(text.node),\r\n                    value: text.value,\r\n                }))\r\n                    .filter((text) => !addedIds.has(text.id))\r\n                    .filter((text) => this.mirror.has(text.id)),\r\n                attributes: this.attributes\r\n                    .map((attribute) => {\r\n                    const { attributes } = attribute;\r\n                    if (typeof attributes.style === 'string') {\r\n                        const diffAsStr = JSON.stringify(attribute.styleDiff);\r\n                        const unchangedAsStr = JSON.stringify(attribute._unchangedStyles);\r\n                        if (diffAsStr.length < attributes.style.length) {\r\n                            if ((diffAsStr + unchangedAsStr).split('var(').length ===\r\n                                attributes.style.split('var(').length) {\r\n                                attributes.style = attribute.styleDiff;\r\n                            }\r\n                        }\r\n                    }\r\n                    return {\r\n                        id: this.mirror.getId(attribute.node),\r\n                        attributes: attributes,\r\n                    };\r\n                })\r\n                    .filter((attribute) => !addedIds.has(attribute.id))\r\n                    .filter((attribute) => this.mirror.has(attribute.id)),\r\n                removes: this.removes,\r\n                adds,\r\n            };\r\n            if (!payload.texts.length &&\r\n                !payload.attributes.length &&\r\n                !payload.removes.length &&\r\n                !payload.adds.length) {\r\n                return;\r\n            }\r\n            this.texts = [];\r\n            this.attributes = [];\r\n            this.removes = [];\r\n            this.addedSet = new Set();\r\n            this.movedSet = new Set();\r\n            this.droppedSet = new Set();\r\n            this.movedMap = {};\r\n            this.mutationCb(payload);\r\n        };\r\n        this.processMutation = (m) => {\r\n            if (isIgnored(m.target, this.mirror)) {\r\n                return;\r\n            }\r\n            let unattachedDoc;\r\n            try {\r\n                unattachedDoc = document.implementation.createHTMLDocument();\r\n            }\r\n            catch (e) {\r\n                unattachedDoc = this.doc;\r\n            }\r\n            switch (m.type) {\r\n                case 'characterData': {\r\n                    const value = m.target.textContent;\r\n                    if (!isBlocked(m.target, this.blockClass, this.blockSelector, false) &&\r\n                        value !== m.oldValue) {\r\n                        this.texts.push({\r\n                            value: needMaskingText(m.target, this.maskTextClass, this.maskTextSelector) && value\r\n                                ? this.maskTextFn\r\n                                    ? this.maskTextFn(value)\r\n                                    : value.replace(/[\\S]/g, '*')\r\n                                : value,\r\n                            node: m.target,\r\n                        });\r\n                    }\r\n                    break;\r\n                }\r\n                case 'attributes': {\r\n                    const target = m.target;\r\n                    let attributeName = m.attributeName;\r\n                    let value = m.target.getAttribute(attributeName);\r\n                    if (attributeName === 'value') {\r\n                        const type = getInputType(target);\r\n                        value = maskInputValue({\r\n                            element: target,\r\n                            maskInputOptions: this.maskInputOptions,\r\n                            tagName: target.tagName,\r\n                            type,\r\n                            value,\r\n                            maskInputFn: this.maskInputFn,\r\n                        });\r\n                    }\r\n                    if (isBlocked(m.target, this.blockClass, this.blockSelector, false) ||\r\n                        value === m.oldValue) {\r\n                        return;\r\n                    }\r\n                    let item = this.attributes.find((a) => a.node === m.target);\r\n                    if (target.tagName === 'IFRAME' &&\r\n                        attributeName === 'src' &&\r\n                        !this.keepIframeSrcFn(value)) {\r\n                        if (!target.contentDocument) {\r\n                            attributeName = 'rr_src';\r\n                        }\r\n                        else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (!item) {\r\n                        item = {\r\n                            node: m.target,\r\n                            attributes: {},\r\n                            styleDiff: {},\r\n                            _unchangedStyles: {},\r\n                        };\r\n                        this.attributes.push(item);\r\n                    }\r\n                    if (attributeName === 'type' &&\r\n                        target.tagName === 'INPUT' &&\r\n                        (m.oldValue || '').toLowerCase() === 'password') {\r\n                        target.setAttribute('data-rr-is-password', 'true');\r\n                    }\r\n                    if (!ignoreAttribute(target.tagName, attributeName)) {\r\n                        item.attributes[attributeName] = transformAttribute(this.doc, toLowerCase(target.tagName), toLowerCase(attributeName), value);\r\n                        if (attributeName === 'style') {\r\n                            const old = unattachedDoc.createElement('span');\r\n                            if (m.oldValue) {\r\n                                old.setAttribute('style', m.oldValue);\r\n                            }\r\n                            for (const pname of Array.from(target.style)) {\r\n                                const newValue = target.style.getPropertyValue(pname);\r\n                                const newPriority = target.style.getPropertyPriority(pname);\r\n                                if (newValue !== old.style.getPropertyValue(pname) ||\r\n                                    newPriority !== old.style.getPropertyPriority(pname)) {\r\n                                    if (newPriority === '') {\r\n                                        item.styleDiff[pname] = newValue;\r\n                                    }\r\n                                    else {\r\n                                        item.styleDiff[pname] = [newValue, newPriority];\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    item._unchangedStyles[pname] = [newValue, newPriority];\r\n                                }\r\n                            }\r\n                            for (const pname of Array.from(old.style)) {\r\n                                if (target.style.getPropertyValue(pname) === '') {\r\n                                    item.styleDiff[pname] = false;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                case 'childList': {\r\n                    if (isBlocked(m.target, this.blockClass, this.blockSelector, true))\r\n                        return;\r\n                    m.addedNodes.forEach((n) => this.genAdds(n, m.target));\r\n                    m.removedNodes.forEach((n) => {\r\n                        const nodeId = this.mirror.getId(n);\r\n                        const parentId = isShadowRoot(m.target)\r\n                            ? this.mirror.getId(m.target.host)\r\n                            : this.mirror.getId(m.target);\r\n                        if (isBlocked(m.target, this.blockClass, this.blockSelector, false) ||\r\n                            isIgnored(n, this.mirror) ||\r\n                            !isSerialized(n, this.mirror)) {\r\n                            return;\r\n                        }\r\n                        if (this.addedSet.has(n)) {\r\n                            deepDelete(this.addedSet, n);\r\n                            this.droppedSet.add(n);\r\n                        }\r\n                        else if (this.addedSet.has(m.target) && nodeId === -1) ;\r\n                        else if (isAncestorRemoved(m.target, this.mirror)) ;\r\n                        else if (this.movedSet.has(n) &&\r\n                            this.movedMap[moveKey(nodeId, parentId)]) {\r\n                            deepDelete(this.movedSet, n);\r\n                        }\r\n                        else {\r\n                            this.removes.push({\r\n                                parentId,\r\n                                id: nodeId,\r\n                                isShadow: isShadowRoot(m.target) && isNativeShadowDom(m.target)\r\n                                    ? true\r\n                                    : undefined,\r\n                            });\r\n                        }\r\n                        this.mapRemoves.push(n);\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        this.genAdds = (n, target) => {\r\n            if (this.processedNodeManager.inOtherBuffer(n, this))\r\n                return;\r\n            if (this.addedSet.has(n) || this.movedSet.has(n))\r\n                return;\r\n            if (this.mirror.hasNode(n)) {\r\n                if (isIgnored(n, this.mirror)) {\r\n                    return;\r\n                }\r\n                this.movedSet.add(n);\r\n                let targetId = null;\r\n                if (target && this.mirror.hasNode(target)) {\r\n                    targetId = this.mirror.getId(target);\r\n                }\r\n                if (targetId && targetId !== -1) {\r\n                    this.movedMap[moveKey(this.mirror.getId(n), targetId)] = true;\r\n                }\r\n            }\r\n            else {\r\n                this.addedSet.add(n);\r\n                this.droppedSet.delete(n);\r\n            }\r\n            if (!isBlocked(n, this.blockClass, this.blockSelector, false)) {\r\n                n.childNodes.forEach((childN) => this.genAdds(childN));\r\n                if (hasShadowRoot(n)) {\r\n                    n.shadowRoot.childNodes.forEach((childN) => {\r\n                        this.processedNodeManager.add(childN, this);\r\n                        this.genAdds(childN, n);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n    init(options) {\r\n        [\r\n            'mutationCb',\r\n            'blockClass',\r\n            'blockSelector',\r\n            'maskTextClass',\r\n            'maskTextSelector',\r\n            'inlineStylesheet',\r\n            'maskInputOptions',\r\n            'maskTextFn',\r\n            'maskInputFn',\r\n            'keepIframeSrcFn',\r\n            'recordCanvas',\r\n            'inlineImages',\r\n            'slimDOMOptions',\r\n            'dataURLOptions',\r\n            'doc',\r\n            'mirror',\r\n            'iframeManager',\r\n            'stylesheetManager',\r\n            'shadowDomManager',\r\n            'canvasManager',\r\n            'processedNodeManager',\r\n        ].forEach((key) => {\r\n            this[key] = options[key];\r\n        });\r\n    }\r\n    freeze() {\r\n        this.frozen = true;\r\n        this.canvasManager.freeze();\r\n    }\r\n    unfreeze() {\r\n        this.frozen = false;\r\n        this.canvasManager.unfreeze();\r\n        this.emit();\r\n    }\r\n    isFrozen() {\r\n        return this.frozen;\r\n    }\r\n    lock() {\r\n        this.locked = true;\r\n        this.canvasManager.lock();\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n        this.canvasManager.unlock();\r\n        this.emit();\r\n    }\r\n    reset() {\r\n        this.shadowDomManager.reset();\r\n        this.canvasManager.reset();\r\n    }\r\n}\r\nfunction deepDelete(addsSet, n) {\r\n    addsSet.delete(n);\r\n    n.childNodes.forEach((childN) => deepDelete(addsSet, childN));\r\n}\r\nfunction isParentRemoved(removes, n, mirror) {\r\n    if (removes.length === 0)\r\n        return false;\r\n    return _isParentRemoved(removes, n, mirror);\r\n}\r\nfunction _isParentRemoved(removes, n, mirror) {\r\n    const { parentNode } = n;\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n    const parentId = mirror.getId(parentNode);\r\n    if (removes.some((r) => r.id === parentId)) {\r\n        return true;\r\n    }\r\n    return _isParentRemoved(removes, parentNode, mirror);\r\n}\r\nfunction isAncestorInSet(set, n) {\r\n    if (set.size === 0)\r\n        return false;\r\n    return _isAncestorInSet(set, n);\r\n}\r\nfunction _isAncestorInSet(set, n) {\r\n    const { parentNode } = n;\r\n    if (!parentNode) {\r\n        return false;\r\n    }\r\n    if (set.has(parentNode)) {\r\n        return true;\r\n    }\r\n    return _isAncestorInSet(set, parentNode);\r\n}\n\nexport { MutationBuffer as default };\n","let errorHandler;\r\nfunction registerErrorHandler(handler) {\r\n    errorHandler = handler;\r\n}\r\nfunction unregisterErrorHandler() {\r\n    errorHandler = undefined;\r\n}\r\nconst callbackWrapper = (cb) => {\r\n    if (!errorHandler) {\r\n        return cb;\r\n    }\r\n    const rrwebWrapped = ((...rest) => {\r\n        try {\r\n            return cb(...rest);\r\n        }\r\n        catch (error) {\r\n            if (errorHandler && errorHandler(error) === true) {\r\n                return;\r\n            }\r\n            throw error;\r\n        }\r\n    });\r\n    return rrwebWrapped;\r\n};\n\nexport { callbackWrapper, registerErrorHandler, unregisterErrorHandler };\n","import { toLowerCase, getInputType, maskInputValue } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { on, throttle, isBlocked, getWindowScroll, getWindowHeight, getWindowWidth, hookSetter, patch, legacy_isTouchEvent, nowTimestamp } from '../utils.js';\nimport { MouseInteractions, IncrementalSource, PointerTypes } from '../../../types/dist/types.js';\nimport MutationBuffer from './mutation.js';\nimport { callbackWrapper } from './error-handler.js';\n\nconst mutationBuffers = [];\r\nfunction getEventTarget(event) {\r\n    try {\r\n        if ('composedPath' in event) {\r\n            const path = event.composedPath();\r\n            if (path.length) {\r\n                return path[0];\r\n            }\r\n        }\r\n        else if ('path' in event && event.path.length) {\r\n            return event.path[0];\r\n        }\r\n    }\r\n    catch (_a) {\r\n    }\r\n    return event && event.target;\r\n}\r\nfunction initMutationObserver(options, rootEl) {\r\n    var _a, _b;\r\n    const mutationBuffer = new MutationBuffer();\r\n    mutationBuffers.push(mutationBuffer);\r\n    mutationBuffer.init(options);\r\n    let mutationObserverCtor = window.MutationObserver ||\r\n        window.__rrMutationObserver;\r\n    const angularZoneSymbol = (_b = (_a = window === null || window === void 0 ? void 0 : window.Zone) === null || _a === void 0 ? void 0 : _a.__symbol__) === null || _b === void 0 ? void 0 : _b.call(_a, 'MutationObserver');\r\n    if (angularZoneSymbol &&\r\n        window[angularZoneSymbol]) {\r\n        mutationObserverCtor = window[angularZoneSymbol];\r\n    }\r\n    const observer = new mutationObserverCtor(callbackWrapper(mutationBuffer.processMutations.bind(mutationBuffer)));\r\n    observer.observe(rootEl, {\r\n        attributes: true,\r\n        attributeOldValue: true,\r\n        characterData: true,\r\n        characterDataOldValue: true,\r\n        childList: true,\r\n        subtree: true,\r\n    });\r\n    return observer;\r\n}\r\nfunction initMoveObserver({ mousemoveCb, sampling, doc, mirror, }) {\r\n    if (sampling.mousemove === false) {\r\n        return () => {\r\n        };\r\n    }\r\n    const threshold = typeof sampling.mousemove === 'number' ? sampling.mousemove : 50;\r\n    const callbackThreshold = typeof sampling.mousemoveCallback === 'number'\r\n        ? sampling.mousemoveCallback\r\n        : 500;\r\n    let positions = [];\r\n    let timeBaseline;\r\n    const wrappedCb = throttle(callbackWrapper((source) => {\r\n        const totalOffset = Date.now() - timeBaseline;\r\n        mousemoveCb(positions.map((p) => {\r\n            p.timeOffset -= totalOffset;\r\n            return p;\r\n        }), source);\r\n        positions = [];\r\n        timeBaseline = null;\r\n    }), callbackThreshold);\r\n    const updatePosition = callbackWrapper(throttle(callbackWrapper((evt) => {\r\n        const target = getEventTarget(evt);\r\n        const { clientX, clientY } = legacy_isTouchEvent(evt)\r\n            ? evt.changedTouches[0]\r\n            : evt;\r\n        if (!timeBaseline) {\r\n            timeBaseline = nowTimestamp();\r\n        }\r\n        positions.push({\r\n            x: clientX,\r\n            y: clientY,\r\n            id: mirror.getId(target),\r\n            timeOffset: nowTimestamp() - timeBaseline,\r\n        });\r\n        wrappedCb(typeof DragEvent !== 'undefined' && evt instanceof DragEvent\r\n            ? IncrementalSource.Drag\r\n            : evt instanceof MouseEvent\r\n                ? IncrementalSource.MouseMove\r\n                : IncrementalSource.TouchMove);\r\n    }), threshold, {\r\n        trailing: false,\r\n    }));\r\n    const handlers = [\r\n        on('mousemove', updatePosition, doc),\r\n        on('touchmove', updatePosition, doc),\r\n        on('drag', updatePosition, doc),\r\n    ];\r\n    return callbackWrapper(() => {\r\n        handlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction initMouseInteractionObserver({ mouseInteractionCb, doc, mirror, blockClass, blockSelector, sampling, }) {\r\n    if (sampling.mouseInteraction === false) {\r\n        return () => {\r\n        };\r\n    }\r\n    const disableMap = sampling.mouseInteraction === true ||\r\n        sampling.mouseInteraction === undefined\r\n        ? {}\r\n        : sampling.mouseInteraction;\r\n    const handlers = [];\r\n    let currentPointerType = null;\r\n    const getHandler = (eventKey) => {\r\n        return (event) => {\r\n            const target = getEventTarget(event);\r\n            if (isBlocked(target, blockClass, blockSelector, true)) {\r\n                return;\r\n            }\r\n            let pointerType = null;\r\n            let thisEventKey = eventKey;\r\n            if ('pointerType' in event) {\r\n                switch (event.pointerType) {\r\n                    case 'mouse':\r\n                        pointerType = PointerTypes.Mouse;\r\n                        break;\r\n                    case 'touch':\r\n                        pointerType = PointerTypes.Touch;\r\n                        break;\r\n                    case 'pen':\r\n                        pointerType = PointerTypes.Pen;\r\n                        break;\r\n                }\r\n                if (pointerType === PointerTypes.Touch) {\r\n                    if (MouseInteractions[eventKey] === MouseInteractions.MouseDown) {\r\n                        thisEventKey = 'TouchStart';\r\n                    }\r\n                    else if (MouseInteractions[eventKey] === MouseInteractions.MouseUp) {\r\n                        thisEventKey = 'TouchEnd';\r\n                    }\r\n                }\r\n                else if (pointerType === PointerTypes.Pen) ;\r\n            }\r\n            else if (legacy_isTouchEvent(event)) {\r\n                pointerType = PointerTypes.Touch;\r\n            }\r\n            if (pointerType !== null) {\r\n                currentPointerType = pointerType;\r\n                if ((thisEventKey.startsWith('Touch') &&\r\n                    pointerType === PointerTypes.Touch) ||\r\n                    (thisEventKey.startsWith('Mouse') &&\r\n                        pointerType === PointerTypes.Mouse)) {\r\n                    pointerType = null;\r\n                }\r\n            }\r\n            else if (MouseInteractions[eventKey] === MouseInteractions.Click) {\r\n                pointerType = currentPointerType;\r\n                currentPointerType = null;\r\n            }\r\n            const e = legacy_isTouchEvent(event) ? event.changedTouches[0] : event;\r\n            if (!e) {\r\n                return;\r\n            }\r\n            const id = mirror.getId(target);\r\n            const { clientX, clientY } = e;\r\n            callbackWrapper(mouseInteractionCb)(Object.assign({ type: MouseInteractions[thisEventKey], id, x: clientX, y: clientY }, (pointerType !== null && { pointerType })));\r\n        };\r\n    };\r\n    Object.keys(MouseInteractions)\r\n        .filter((key) => Number.isNaN(Number(key)) &&\r\n        !key.endsWith('_Departed') &&\r\n        disableMap[key] !== false)\r\n        .forEach((eventKey) => {\r\n        let eventName = toLowerCase(eventKey);\r\n        const handler = getHandler(eventKey);\r\n        if (window.PointerEvent) {\r\n            switch (MouseInteractions[eventKey]) {\r\n                case MouseInteractions.MouseDown:\r\n                case MouseInteractions.MouseUp:\r\n                    eventName = eventName.replace('mouse', 'pointer');\r\n                    break;\r\n                case MouseInteractions.TouchStart:\r\n                case MouseInteractions.TouchEnd:\r\n                    return;\r\n            }\r\n        }\r\n        handlers.push(on(eventName, handler, doc));\r\n    });\r\n    return callbackWrapper(() => {\r\n        handlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction initScrollObserver({ scrollCb, doc, mirror, blockClass, blockSelector, sampling, }) {\r\n    const updatePosition = callbackWrapper(throttle(callbackWrapper((evt) => {\r\n        const target = getEventTarget(evt);\r\n        if (!target ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const id = mirror.getId(target);\r\n        if (target === doc && doc.defaultView) {\r\n            const scrollLeftTop = getWindowScroll(doc.defaultView);\r\n            scrollCb({\r\n                id,\r\n                x: scrollLeftTop.left,\r\n                y: scrollLeftTop.top,\r\n            });\r\n        }\r\n        else {\r\n            scrollCb({\r\n                id,\r\n                x: target.scrollLeft,\r\n                y: target.scrollTop,\r\n            });\r\n        }\r\n    }), sampling.scroll || 100));\r\n    return on('scroll', updatePosition, doc);\r\n}\r\nfunction initViewportResizeObserver({ viewportResizeCb }, { win }) {\r\n    let lastH = -1;\r\n    let lastW = -1;\r\n    const updateDimension = callbackWrapper(throttle(callbackWrapper(() => {\r\n        const height = getWindowHeight();\r\n        const width = getWindowWidth();\r\n        if (lastH !== height || lastW !== width) {\r\n            viewportResizeCb({\r\n                width: Number(width),\r\n                height: Number(height),\r\n            });\r\n            lastH = height;\r\n            lastW = width;\r\n        }\r\n    }), 200));\r\n    return on('resize', updateDimension, win);\r\n}\r\nfunction wrapEventWithUserTriggeredFlag(v, enable) {\r\n    const value = Object.assign({}, v);\r\n    if (!enable)\r\n        delete value.userTriggered;\r\n    return value;\r\n}\r\nconst INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\r\nconst lastInputValueMap = new WeakMap();\r\nfunction initInputObserver({ inputCb, doc, mirror, blockClass, blockSelector, ignoreClass, ignoreSelector, maskInputOptions, maskInputFn, sampling, userTriggeredOnInput, }) {\r\n    function eventHandler(event) {\r\n        let target = getEventTarget(event);\r\n        const userTriggered = event.isTrusted;\r\n        const tagName = target && target.tagName;\r\n        if (target && tagName === 'OPTION') {\r\n            target = target.parentElement;\r\n        }\r\n        if (!target ||\r\n            !tagName ||\r\n            INPUT_TAGS.indexOf(tagName) < 0 ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        if (target.classList.contains(ignoreClass) ||\r\n            (ignoreSelector && target.matches(ignoreSelector))) {\r\n            return;\r\n        }\r\n        let text = target.value;\r\n        let isChecked = false;\r\n        const type = getInputType(target) || '';\r\n        if (type === 'radio' || type === 'checkbox') {\r\n            isChecked = target.checked;\r\n        }\r\n        else if (maskInputOptions[tagName.toLowerCase()] ||\r\n            maskInputOptions[type]) {\r\n            text = maskInputValue({\r\n                element: target,\r\n                maskInputOptions,\r\n                tagName,\r\n                type,\r\n                value: text,\r\n                maskInputFn,\r\n            });\r\n        }\r\n        cbWithDedup(target, callbackWrapper(wrapEventWithUserTriggeredFlag)({ text, isChecked, userTriggered }, userTriggeredOnInput));\r\n        const name = target.name;\r\n        if (type === 'radio' && name && isChecked) {\r\n            doc\r\n                .querySelectorAll(`input[type=\"radio\"][name=\"${name}\"]`)\r\n                .forEach((el) => {\r\n                if (el !== target) {\r\n                    cbWithDedup(el, callbackWrapper(wrapEventWithUserTriggeredFlag)({\r\n                        text: el.value,\r\n                        isChecked: !isChecked,\r\n                        userTriggered: false,\r\n                    }, userTriggeredOnInput));\r\n                }\r\n            });\r\n        }\r\n    }\r\n    function cbWithDedup(target, v) {\r\n        const lastInputValue = lastInputValueMap.get(target);\r\n        if (!lastInputValue ||\r\n            lastInputValue.text !== v.text ||\r\n            lastInputValue.isChecked !== v.isChecked) {\r\n            lastInputValueMap.set(target, v);\r\n            const id = mirror.getId(target);\r\n            callbackWrapper(inputCb)(Object.assign(Object.assign({}, v), { id }));\r\n        }\r\n    }\r\n    const events = sampling.input === 'last' ? ['change'] : ['input', 'change'];\r\n    const handlers = events.map((eventName) => on(eventName, callbackWrapper(eventHandler), doc));\r\n    const currentWindow = doc.defaultView;\r\n    if (!currentWindow) {\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n        };\r\n    }\r\n    const propertyDescriptor = currentWindow.Object.getOwnPropertyDescriptor(currentWindow.HTMLInputElement.prototype, 'value');\r\n    const hookProperties = [\r\n        [currentWindow.HTMLInputElement.prototype, 'value'],\r\n        [currentWindow.HTMLInputElement.prototype, 'checked'],\r\n        [currentWindow.HTMLSelectElement.prototype, 'value'],\r\n        [currentWindow.HTMLTextAreaElement.prototype, 'value'],\r\n        [currentWindow.HTMLSelectElement.prototype, 'selectedIndex'],\r\n        [currentWindow.HTMLOptionElement.prototype, 'selected'],\r\n    ];\r\n    if (propertyDescriptor && propertyDescriptor.set) {\r\n        handlers.push(...hookProperties.map((p) => hookSetter(p[0], p[1], {\r\n            set() {\r\n                callbackWrapper(eventHandler)({\r\n                    target: this,\r\n                    isTrusted: false,\r\n                });\r\n            },\r\n        }, false, currentWindow)));\r\n    }\r\n    return callbackWrapper(() => {\r\n        handlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction getNestedCSSRulePositions(rule) {\r\n    const positions = [];\r\n    function recurse(childRule, pos) {\r\n        if ((hasNestedCSSRule('CSSGroupingRule') &&\r\n            childRule.parentRule instanceof CSSGroupingRule) ||\r\n            (hasNestedCSSRule('CSSMediaRule') &&\r\n                childRule.parentRule instanceof CSSMediaRule) ||\r\n            (hasNestedCSSRule('CSSSupportsRule') &&\r\n                childRule.parentRule instanceof CSSSupportsRule) ||\r\n            (hasNestedCSSRule('CSSConditionRule') &&\r\n                childRule.parentRule instanceof CSSConditionRule)) {\r\n            const rules = Array.from(childRule.parentRule.cssRules);\r\n            const index = rules.indexOf(childRule);\r\n            pos.unshift(index);\r\n        }\r\n        else if (childRule.parentStyleSheet) {\r\n            const rules = Array.from(childRule.parentStyleSheet.cssRules);\r\n            const index = rules.indexOf(childRule);\r\n            pos.unshift(index);\r\n        }\r\n        return pos;\r\n    }\r\n    return recurse(rule, positions);\r\n}\r\nfunction getIdAndStyleId(sheet, mirror, styleMirror) {\r\n    let id, styleId;\r\n    if (!sheet)\r\n        return {};\r\n    if (sheet.ownerNode)\r\n        id = mirror.getId(sheet.ownerNode);\r\n    else\r\n        styleId = styleMirror.getId(sheet);\r\n    return {\r\n        styleId,\r\n        id,\r\n    };\r\n}\r\nfunction initStyleSheetObserver({ styleSheetRuleCb, mirror, stylesheetManager }, { win }) {\r\n    if (!win.CSSStyleSheet || !win.CSSStyleSheet.prototype) {\r\n        return () => {\r\n        };\r\n    }\r\n    const insertRule = win.CSSStyleSheet.prototype.insertRule;\r\n    win.CSSStyleSheet.prototype.insertRule = new Proxy(insertRule, {\r\n        apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n            const [rule, index] = argumentsList;\r\n            const { id, styleId } = getIdAndStyleId(thisArg, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    adds: [{ rule, index }],\r\n                });\r\n            }\r\n            return target.apply(thisArg, argumentsList);\r\n        }),\r\n    });\r\n    const deleteRule = win.CSSStyleSheet.prototype.deleteRule;\r\n    win.CSSStyleSheet.prototype.deleteRule = new Proxy(deleteRule, {\r\n        apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n            const [index] = argumentsList;\r\n            const { id, styleId } = getIdAndStyleId(thisArg, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleSheetRuleCb({\r\n                    id,\r\n                    styleId,\r\n                    removes: [{ index }],\r\n                });\r\n            }\r\n            return target.apply(thisArg, argumentsList);\r\n        }),\r\n    });\r\n    let replace;\r\n    if (win.CSSStyleSheet.prototype.replace) {\r\n        replace = win.CSSStyleSheet.prototype.replace;\r\n        win.CSSStyleSheet.prototype.replace = new Proxy(replace, {\r\n            apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n                const [text] = argumentsList;\r\n                const { id, styleId } = getIdAndStyleId(thisArg, mirror, stylesheetManager.styleMirror);\r\n                if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                    styleSheetRuleCb({\r\n                        id,\r\n                        styleId,\r\n                        replace: text,\r\n                    });\r\n                }\r\n                return target.apply(thisArg, argumentsList);\r\n            }),\r\n        });\r\n    }\r\n    let replaceSync;\r\n    if (win.CSSStyleSheet.prototype.replaceSync) {\r\n        replaceSync = win.CSSStyleSheet.prototype.replaceSync;\r\n        win.CSSStyleSheet.prototype.replaceSync = new Proxy(replaceSync, {\r\n            apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n                const [text] = argumentsList;\r\n                const { id, styleId } = getIdAndStyleId(thisArg, mirror, stylesheetManager.styleMirror);\r\n                if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                    styleSheetRuleCb({\r\n                        id,\r\n                        styleId,\r\n                        replaceSync: text,\r\n                    });\r\n                }\r\n                return target.apply(thisArg, argumentsList);\r\n            }),\r\n        });\r\n    }\r\n    const supportedNestedCSSRuleTypes = {};\r\n    if (canMonkeyPatchNestedCSSRule('CSSGroupingRule')) {\r\n        supportedNestedCSSRuleTypes.CSSGroupingRule = win.CSSGroupingRule;\r\n    }\r\n    else {\r\n        if (canMonkeyPatchNestedCSSRule('CSSMediaRule')) {\r\n            supportedNestedCSSRuleTypes.CSSMediaRule = win.CSSMediaRule;\r\n        }\r\n        if (canMonkeyPatchNestedCSSRule('CSSConditionRule')) {\r\n            supportedNestedCSSRuleTypes.CSSConditionRule = win.CSSConditionRule;\r\n        }\r\n        if (canMonkeyPatchNestedCSSRule('CSSSupportsRule')) {\r\n            supportedNestedCSSRuleTypes.CSSSupportsRule = win.CSSSupportsRule;\r\n        }\r\n    }\r\n    const unmodifiedFunctions = {};\r\n    Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\r\n        unmodifiedFunctions[typeKey] = {\r\n            insertRule: type.prototype.insertRule,\r\n            deleteRule: type.prototype.deleteRule,\r\n        };\r\n        type.prototype.insertRule = new Proxy(unmodifiedFunctions[typeKey].insertRule, {\r\n            apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n                const [rule, index] = argumentsList;\r\n                const { id, styleId } = getIdAndStyleId(thisArg.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n                if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                    styleSheetRuleCb({\r\n                        id,\r\n                        styleId,\r\n                        adds: [\r\n                            {\r\n                                rule,\r\n                                index: [\r\n                                    ...getNestedCSSRulePositions(thisArg),\r\n                                    index || 0,\r\n                                ],\r\n                            },\r\n                        ],\r\n                    });\r\n                }\r\n                return target.apply(thisArg, argumentsList);\r\n            }),\r\n        });\r\n        type.prototype.deleteRule = new Proxy(unmodifiedFunctions[typeKey].deleteRule, {\r\n            apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n                const [index] = argumentsList;\r\n                const { id, styleId } = getIdAndStyleId(thisArg.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n                if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                    styleSheetRuleCb({\r\n                        id,\r\n                        styleId,\r\n                        removes: [\r\n                            { index: [...getNestedCSSRulePositions(thisArg), index] },\r\n                        ],\r\n                    });\r\n                }\r\n                return target.apply(thisArg, argumentsList);\r\n            }),\r\n        });\r\n    });\r\n    return callbackWrapper(() => {\r\n        win.CSSStyleSheet.prototype.insertRule = insertRule;\r\n        win.CSSStyleSheet.prototype.deleteRule = deleteRule;\r\n        replace && (win.CSSStyleSheet.prototype.replace = replace);\r\n        replaceSync && (win.CSSStyleSheet.prototype.replaceSync = replaceSync);\r\n        Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey, type]) => {\r\n            type.prototype.insertRule = unmodifiedFunctions[typeKey].insertRule;\r\n            type.prototype.deleteRule = unmodifiedFunctions[typeKey].deleteRule;\r\n        });\r\n    });\r\n}\r\nfunction initAdoptedStyleSheetObserver({ mirror, stylesheetManager, }, host) {\r\n    var _a, _b, _c;\r\n    let hostId = null;\r\n    if (host.nodeName === '#document')\r\n        hostId = mirror.getId(host);\r\n    else\r\n        hostId = mirror.getId(host.host);\r\n    const patchTarget = host.nodeName === '#document'\r\n        ? (_a = host.defaultView) === null || _a === void 0 ? void 0 : _a.Document\r\n        : (_c = (_b = host.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView) === null || _c === void 0 ? void 0 : _c.ShadowRoot;\r\n    const originalPropertyDescriptor = Object.getOwnPropertyDescriptor(patchTarget === null || patchTarget === void 0 ? void 0 : patchTarget.prototype, 'adoptedStyleSheets');\r\n    if (hostId === null ||\r\n        hostId === -1 ||\r\n        !patchTarget ||\r\n        !originalPropertyDescriptor)\r\n        return () => {\r\n        };\r\n    Object.defineProperty(host, 'adoptedStyleSheets', {\r\n        configurable: originalPropertyDescriptor.configurable,\r\n        enumerable: originalPropertyDescriptor.enumerable,\r\n        get() {\r\n            var _a;\r\n            return (_a = originalPropertyDescriptor.get) === null || _a === void 0 ? void 0 : _a.call(this);\r\n        },\r\n        set(sheets) {\r\n            var _a;\r\n            const result = (_a = originalPropertyDescriptor.set) === null || _a === void 0 ? void 0 : _a.call(this, sheets);\r\n            if (hostId !== null && hostId !== -1) {\r\n                try {\r\n                    stylesheetManager.adoptStyleSheets(sheets, hostId);\r\n                }\r\n                catch (e) {\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n    });\r\n    return callbackWrapper(() => {\r\n        Object.defineProperty(host, 'adoptedStyleSheets', {\r\n            configurable: originalPropertyDescriptor.configurable,\r\n            enumerable: originalPropertyDescriptor.enumerable,\r\n            get: originalPropertyDescriptor.get,\r\n            set: originalPropertyDescriptor.set,\r\n        });\r\n    });\r\n}\r\nfunction initStyleDeclarationObserver({ styleDeclarationCb, mirror, ignoreCSSAttributes, stylesheetManager, }, { win }) {\r\n    const setProperty = win.CSSStyleDeclaration.prototype.setProperty;\r\n    win.CSSStyleDeclaration.prototype.setProperty = new Proxy(setProperty, {\r\n        apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n            var _a;\r\n            const [property, value, priority] = argumentsList;\r\n            if (ignoreCSSAttributes.has(property)) {\r\n                return setProperty.apply(thisArg, [property, value, priority]);\r\n            }\r\n            const { id, styleId } = getIdAndStyleId((_a = thisArg.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleDeclarationCb({\r\n                    id,\r\n                    styleId,\r\n                    set: {\r\n                        property,\r\n                        value,\r\n                        priority,\r\n                    },\r\n                    index: getNestedCSSRulePositions(thisArg.parentRule),\r\n                });\r\n            }\r\n            return target.apply(thisArg, argumentsList);\r\n        }),\r\n    });\r\n    const removeProperty = win.CSSStyleDeclaration.prototype.removeProperty;\r\n    win.CSSStyleDeclaration.prototype.removeProperty = new Proxy(removeProperty, {\r\n        apply: callbackWrapper((target, thisArg, argumentsList) => {\r\n            var _a;\r\n            const [property] = argumentsList;\r\n            if (ignoreCSSAttributes.has(property)) {\r\n                return removeProperty.apply(thisArg, [property]);\r\n            }\r\n            const { id, styleId } = getIdAndStyleId((_a = thisArg.parentRule) === null || _a === void 0 ? void 0 : _a.parentStyleSheet, mirror, stylesheetManager.styleMirror);\r\n            if ((id && id !== -1) || (styleId && styleId !== -1)) {\r\n                styleDeclarationCb({\r\n                    id,\r\n                    styleId,\r\n                    remove: {\r\n                        property,\r\n                    },\r\n                    index: getNestedCSSRulePositions(thisArg.parentRule),\r\n                });\r\n            }\r\n            return target.apply(thisArg, argumentsList);\r\n        }),\r\n    });\r\n    return callbackWrapper(() => {\r\n        win.CSSStyleDeclaration.prototype.setProperty = setProperty;\r\n        win.CSSStyleDeclaration.prototype.removeProperty = removeProperty;\r\n    });\r\n}\r\nfunction initMediaInteractionObserver({ mediaInteractionCb, blockClass, blockSelector, mirror, sampling, doc, }) {\r\n    const handler = callbackWrapper((type) => throttle(callbackWrapper((event) => {\r\n        const target = getEventTarget(event);\r\n        if (!target ||\r\n            isBlocked(target, blockClass, blockSelector, true)) {\r\n            return;\r\n        }\r\n        const { currentTime, volume, muted, playbackRate } = target;\r\n        mediaInteractionCb({\r\n            type,\r\n            id: mirror.getId(target),\r\n            currentTime,\r\n            volume,\r\n            muted,\r\n            playbackRate,\r\n        });\r\n    }), sampling.media || 500));\r\n    const handlers = [\r\n        on('play', handler(0), doc),\r\n        on('pause', handler(1), doc),\r\n        on('seeked', handler(2), doc),\r\n        on('volumechange', handler(3), doc),\r\n        on('ratechange', handler(4), doc),\r\n    ];\r\n    return callbackWrapper(() => {\r\n        handlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction initFontObserver({ fontCb, doc }) {\r\n    const win = doc.defaultView;\r\n    if (!win) {\r\n        return () => {\r\n        };\r\n    }\r\n    const handlers = [];\r\n    const fontMap = new WeakMap();\r\n    const originalFontFace = win.FontFace;\r\n    win.FontFace = function FontFace(family, source, descriptors) {\r\n        const fontFace = new originalFontFace(family, source, descriptors);\r\n        fontMap.set(fontFace, {\r\n            family,\r\n            buffer: typeof source !== 'string',\r\n            descriptors,\r\n            fontSource: typeof source === 'string'\r\n                ? source\r\n                : JSON.stringify(Array.from(new Uint8Array(source))),\r\n        });\r\n        return fontFace;\r\n    };\r\n    const restoreHandler = patch(doc.fonts, 'add', function (original) {\r\n        return function (fontFace) {\r\n            setTimeout(callbackWrapper(() => {\r\n                const p = fontMap.get(fontFace);\r\n                if (p) {\r\n                    fontCb(p);\r\n                    fontMap.delete(fontFace);\r\n                }\r\n            }), 0);\r\n            return original.apply(this, [fontFace]);\r\n        };\r\n    });\r\n    handlers.push(() => {\r\n        win.FontFace = originalFontFace;\r\n    });\r\n    handlers.push(restoreHandler);\r\n    return callbackWrapper(() => {\r\n        handlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction initSelectionObserver(param) {\r\n    const { doc, mirror, blockClass, blockSelector, selectionCb } = param;\r\n    let collapsed = true;\r\n    const updateSelection = callbackWrapper(() => {\r\n        const selection = doc.getSelection();\r\n        if (!selection || (collapsed && (selection === null || selection === void 0 ? void 0 : selection.isCollapsed)))\r\n            return;\r\n        collapsed = selection.isCollapsed || false;\r\n        const ranges = [];\r\n        const count = selection.rangeCount || 0;\r\n        for (let i = 0; i < count; i++) {\r\n            const range = selection.getRangeAt(i);\r\n            const { startContainer, startOffset, endContainer, endOffset } = range;\r\n            const blocked = isBlocked(startContainer, blockClass, blockSelector, true) ||\r\n                isBlocked(endContainer, blockClass, blockSelector, true);\r\n            if (blocked)\r\n                continue;\r\n            ranges.push({\r\n                start: mirror.getId(startContainer),\r\n                startOffset,\r\n                end: mirror.getId(endContainer),\r\n                endOffset,\r\n            });\r\n        }\r\n        selectionCb({ ranges });\r\n    });\r\n    updateSelection();\r\n    return on('selectionchange', updateSelection);\r\n}\r\nfunction mergeHooks(o, hooks) {\r\n    const { mutationCb, mousemoveCb, mouseInteractionCb, scrollCb, viewportResizeCb, inputCb, mediaInteractionCb, styleSheetRuleCb, styleDeclarationCb, canvasMutationCb, fontCb, selectionCb, } = o;\r\n    o.mutationCb = (...p) => {\r\n        if (hooks.mutation) {\r\n            hooks.mutation(...p);\r\n        }\r\n        mutationCb(...p);\r\n    };\r\n    o.mousemoveCb = (...p) => {\r\n        if (hooks.mousemove) {\r\n            hooks.mousemove(...p);\r\n        }\r\n        mousemoveCb(...p);\r\n    };\r\n    o.mouseInteractionCb = (...p) => {\r\n        if (hooks.mouseInteraction) {\r\n            hooks.mouseInteraction(...p);\r\n        }\r\n        mouseInteractionCb(...p);\r\n    };\r\n    o.scrollCb = (...p) => {\r\n        if (hooks.scroll) {\r\n            hooks.scroll(...p);\r\n        }\r\n        scrollCb(...p);\r\n    };\r\n    o.viewportResizeCb = (...p) => {\r\n        if (hooks.viewportResize) {\r\n            hooks.viewportResize(...p);\r\n        }\r\n        viewportResizeCb(...p);\r\n    };\r\n    o.inputCb = (...p) => {\r\n        if (hooks.input) {\r\n            hooks.input(...p);\r\n        }\r\n        inputCb(...p);\r\n    };\r\n    o.mediaInteractionCb = (...p) => {\r\n        if (hooks.mediaInteaction) {\r\n            hooks.mediaInteaction(...p);\r\n        }\r\n        mediaInteractionCb(...p);\r\n    };\r\n    o.styleSheetRuleCb = (...p) => {\r\n        if (hooks.styleSheetRule) {\r\n            hooks.styleSheetRule(...p);\r\n        }\r\n        styleSheetRuleCb(...p);\r\n    };\r\n    o.styleDeclarationCb = (...p) => {\r\n        if (hooks.styleDeclaration) {\r\n            hooks.styleDeclaration(...p);\r\n        }\r\n        styleDeclarationCb(...p);\r\n    };\r\n    o.canvasMutationCb = (...p) => {\r\n        if (hooks.canvasMutation) {\r\n            hooks.canvasMutation(...p);\r\n        }\r\n        canvasMutationCb(...p);\r\n    };\r\n    o.fontCb = (...p) => {\r\n        if (hooks.font) {\r\n            hooks.font(...p);\r\n        }\r\n        fontCb(...p);\r\n    };\r\n    o.selectionCb = (...p) => {\r\n        if (hooks.selection) {\r\n            hooks.selection(...p);\r\n        }\r\n        selectionCb(...p);\r\n    };\r\n}\r\nfunction initObservers(o, hooks = {}) {\r\n    const currentWindow = o.doc.defaultView;\r\n    if (!currentWindow) {\r\n        return () => {\r\n        };\r\n    }\r\n    mergeHooks(o, hooks);\r\n    const mutationObserver = initMutationObserver(o, o.doc);\r\n    const mousemoveHandler = initMoveObserver(o);\r\n    const mouseInteractionHandler = initMouseInteractionObserver(o);\r\n    const scrollHandler = initScrollObserver(o);\r\n    const viewportResizeHandler = initViewportResizeObserver(o, {\r\n        win: currentWindow,\r\n    });\r\n    const inputHandler = initInputObserver(o);\r\n    const mediaInteractionHandler = initMediaInteractionObserver(o);\r\n    const styleSheetObserver = initStyleSheetObserver(o, { win: currentWindow });\r\n    const adoptedStyleSheetObserver = initAdoptedStyleSheetObserver(o, o.doc);\r\n    const styleDeclarationObserver = initStyleDeclarationObserver(o, {\r\n        win: currentWindow,\r\n    });\r\n    const fontObserver = o.collectFonts\r\n        ? initFontObserver(o)\r\n        : () => {\r\n        };\r\n    const selectionObserver = initSelectionObserver(o);\r\n    const pluginHandlers = [];\r\n    for (const plugin of o.plugins) {\r\n        pluginHandlers.push(plugin.observer(plugin.callback, currentWindow, plugin.options));\r\n    }\r\n    return callbackWrapper(() => {\r\n        mutationBuffers.forEach((b) => b.reset());\r\n        mutationObserver.disconnect();\r\n        mousemoveHandler();\r\n        mouseInteractionHandler();\r\n        scrollHandler();\r\n        viewportResizeHandler();\r\n        inputHandler();\r\n        mediaInteractionHandler();\r\n        styleSheetObserver();\r\n        adoptedStyleSheetObserver();\r\n        styleDeclarationObserver();\r\n        fontObserver();\r\n        selectionObserver();\r\n        pluginHandlers.forEach((h) => h());\r\n    });\r\n}\r\nfunction hasNestedCSSRule(prop) {\r\n    return typeof window[prop] !== 'undefined';\r\n}\r\nfunction canMonkeyPatchNestedCSSRule(prop) {\r\n    return Boolean(typeof window[prop] !== 'undefined' &&\r\n        window[prop].prototype &&\r\n        'insertRule' in window[prop].prototype &&\r\n        'deleteRule' in window[prop].prototype);\r\n}\n\nexport { INPUT_TAGS, initAdoptedStyleSheetObserver, initMutationObserver, initObservers, initScrollObserver, mutationBuffers };\n","class CrossOriginIframeMirror {\r\n    constructor(generateIdFn) {\r\n        this.generateIdFn = generateIdFn;\r\n        this.iframeIdToRemoteIdMap = new WeakMap();\r\n        this.iframeRemoteIdToIdMap = new WeakMap();\r\n    }\r\n    getId(iframe, remoteId, idToRemoteMap, remoteToIdMap) {\r\n        const idToRemoteIdMap = idToRemoteMap || this.getIdToRemoteIdMap(iframe);\r\n        const remoteIdToIdMap = remoteToIdMap || this.getRemoteIdToIdMap(iframe);\r\n        let id = idToRemoteIdMap.get(remoteId);\r\n        if (!id) {\r\n            id = this.generateIdFn();\r\n            idToRemoteIdMap.set(remoteId, id);\r\n            remoteIdToIdMap.set(id, remoteId);\r\n        }\r\n        return id;\r\n    }\r\n    getIds(iframe, remoteId) {\r\n        const idToRemoteIdMap = this.getIdToRemoteIdMap(iframe);\r\n        const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\r\n        return remoteId.map((id) => this.getId(iframe, id, idToRemoteIdMap, remoteIdToIdMap));\r\n    }\r\n    getRemoteId(iframe, id, map) {\r\n        const remoteIdToIdMap = map || this.getRemoteIdToIdMap(iframe);\r\n        if (typeof id !== 'number')\r\n            return id;\r\n        const remoteId = remoteIdToIdMap.get(id);\r\n        if (!remoteId)\r\n            return -1;\r\n        return remoteId;\r\n    }\r\n    getRemoteIds(iframe, ids) {\r\n        const remoteIdToIdMap = this.getRemoteIdToIdMap(iframe);\r\n        return ids.map((id) => this.getRemoteId(iframe, id, remoteIdToIdMap));\r\n    }\r\n    reset(iframe) {\r\n        if (!iframe) {\r\n            this.iframeIdToRemoteIdMap = new WeakMap();\r\n            this.iframeRemoteIdToIdMap = new WeakMap();\r\n            return;\r\n        }\r\n        this.iframeIdToRemoteIdMap.delete(iframe);\r\n        this.iframeRemoteIdToIdMap.delete(iframe);\r\n    }\r\n    getIdToRemoteIdMap(iframe) {\r\n        let idToRemoteIdMap = this.iframeIdToRemoteIdMap.get(iframe);\r\n        if (!idToRemoteIdMap) {\r\n            idToRemoteIdMap = new Map();\r\n            this.iframeIdToRemoteIdMap.set(iframe, idToRemoteIdMap);\r\n        }\r\n        return idToRemoteIdMap;\r\n    }\r\n    getRemoteIdToIdMap(iframe) {\r\n        let remoteIdToIdMap = this.iframeRemoteIdToIdMap.get(iframe);\r\n        if (!remoteIdToIdMap) {\r\n            remoteIdToIdMap = new Map();\r\n            this.iframeRemoteIdToIdMap.set(iframe, remoteIdToIdMap);\r\n        }\r\n        return remoteIdToIdMap;\r\n    }\r\n}\n\nexport { CrossOriginIframeMirror as default };\n","import { genId, NodeType } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport CrossOriginIframeMirror from './cross-origin-iframe-mirror.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\n\nclass IframeManager {\r\n    constructor(options) {\r\n        this.iframes = new WeakMap();\r\n        this.crossOriginIframeMap = new WeakMap();\r\n        this.crossOriginIframeMirror = new CrossOriginIframeMirror(genId);\r\n        this.crossOriginIframeRootIdMap = new WeakMap();\r\n        this.mutationCb = options.mutationCb;\r\n        this.wrappedEmit = options.wrappedEmit;\r\n        this.stylesheetManager = options.stylesheetManager;\r\n        this.recordCrossOriginIframes = options.recordCrossOriginIframes;\r\n        this.crossOriginIframeStyleMirror = new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror));\r\n        this.mirror = options.mirror;\r\n        if (this.recordCrossOriginIframes) {\r\n            window.addEventListener('message', this.handleMessage.bind(this));\r\n        }\r\n    }\r\n    addIframe(iframeEl) {\r\n        this.iframes.set(iframeEl, true);\r\n        if (iframeEl.contentWindow)\r\n            this.crossOriginIframeMap.set(iframeEl.contentWindow, iframeEl);\r\n    }\r\n    addLoadListener(cb) {\r\n        this.loadListener = cb;\r\n    }\r\n    attachIframe(iframeEl, childSn) {\r\n        var _a;\r\n        this.mutationCb({\r\n            adds: [\r\n                {\r\n                    parentId: this.mirror.getId(iframeEl),\r\n                    nextId: null,\r\n                    node: childSn,\r\n                },\r\n            ],\r\n            removes: [],\r\n            texts: [],\r\n            attributes: [],\r\n            isAttachIframe: true,\r\n        });\r\n        (_a = this.loadListener) === null || _a === void 0 ? void 0 : _a.call(this, iframeEl);\r\n        if (iframeEl.contentDocument &&\r\n            iframeEl.contentDocument.adoptedStyleSheets &&\r\n            iframeEl.contentDocument.adoptedStyleSheets.length > 0)\r\n            this.stylesheetManager.adoptStyleSheets(iframeEl.contentDocument.adoptedStyleSheets, this.mirror.getId(iframeEl.contentDocument));\r\n    }\r\n    handleMessage(message) {\r\n        const crossOriginMessageEvent = message;\r\n        if (crossOriginMessageEvent.data.type !== 'rrweb' ||\r\n            crossOriginMessageEvent.origin !== crossOriginMessageEvent.data.origin)\r\n            return;\r\n        const iframeSourceWindow = message.source;\r\n        if (!iframeSourceWindow)\r\n            return;\r\n        const iframeEl = this.crossOriginIframeMap.get(message.source);\r\n        if (!iframeEl)\r\n            return;\r\n        const transformedEvent = this.transformCrossOriginEvent(iframeEl, crossOriginMessageEvent.data.event);\r\n        if (transformedEvent)\r\n            this.wrappedEmit(transformedEvent, crossOriginMessageEvent.data.isCheckout);\r\n    }\r\n    transformCrossOriginEvent(iframeEl, e) {\r\n        var _a;\r\n        switch (e.type) {\r\n            case EventType.FullSnapshot: {\r\n                this.crossOriginIframeMirror.reset(iframeEl);\r\n                this.crossOriginIframeStyleMirror.reset(iframeEl);\r\n                this.replaceIdOnNode(e.data.node, iframeEl);\r\n                const rootId = e.data.node.id;\r\n                this.crossOriginIframeRootIdMap.set(iframeEl, rootId);\r\n                this.patchRootIdOnNode(e.data.node, rootId);\r\n                return {\r\n                    timestamp: e.timestamp,\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source: IncrementalSource.Mutation,\r\n                        adds: [\r\n                            {\r\n                                parentId: this.mirror.getId(iframeEl),\r\n                                nextId: null,\r\n                                node: e.data.node,\r\n                            },\r\n                        ],\r\n                        removes: [],\r\n                        texts: [],\r\n                        attributes: [],\r\n                        isAttachIframe: true,\r\n                    },\r\n                };\r\n            }\r\n            case EventType.Meta:\r\n            case EventType.Load:\r\n            case EventType.DomContentLoaded: {\r\n                return false;\r\n            }\r\n            case EventType.Plugin: {\r\n                return e;\r\n            }\r\n            case EventType.Custom: {\r\n                this.replaceIds(e.data.payload, iframeEl, ['id', 'parentId', 'previousId', 'nextId']);\r\n                return e;\r\n            }\r\n            case EventType.IncrementalSnapshot: {\r\n                switch (e.data.source) {\r\n                    case IncrementalSource.Mutation: {\r\n                        e.data.adds.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, [\r\n                                'parentId',\r\n                                'nextId',\r\n                                'previousId',\r\n                            ]);\r\n                            this.replaceIdOnNode(n.node, iframeEl);\r\n                            const rootId = this.crossOriginIframeRootIdMap.get(iframeEl);\r\n                            rootId && this.patchRootIdOnNode(n.node, rootId);\r\n                        });\r\n                        e.data.removes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['parentId', 'id']);\r\n                        });\r\n                        e.data.attributes.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        e.data.texts.forEach((n) => {\r\n                            this.replaceIds(n, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Drag:\r\n                    case IncrementalSource.TouchMove:\r\n                    case IncrementalSource.MouseMove: {\r\n                        e.data.positions.forEach((p) => {\r\n                            this.replaceIds(p, iframeEl, ['id']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.ViewportResize: {\r\n                        return false;\r\n                    }\r\n                    case IncrementalSource.MediaInteraction:\r\n                    case IncrementalSource.MouseInteraction:\r\n                    case IncrementalSource.Scroll:\r\n                    case IncrementalSource.CanvasMutation:\r\n                    case IncrementalSource.Input: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.StyleSheetRule:\r\n                    case IncrementalSource.StyleDeclaration: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleId']);\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Font: {\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.Selection: {\r\n                        e.data.ranges.forEach((range) => {\r\n                            this.replaceIds(range, iframeEl, ['start', 'end']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                    case IncrementalSource.AdoptedStyleSheet: {\r\n                        this.replaceIds(e.data, iframeEl, ['id']);\r\n                        this.replaceStyleIds(e.data, iframeEl, ['styleIds']);\r\n                        (_a = e.data.styles) === null || _a === void 0 ? void 0 : _a.forEach((style) => {\r\n                            this.replaceStyleIds(style, iframeEl, ['styleId']);\r\n                        });\r\n                        return e;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    replace(iframeMirror, obj, iframeEl, keys) {\r\n        for (const key of keys) {\r\n            if (!Array.isArray(obj[key]) && typeof obj[key] !== 'number')\r\n                continue;\r\n            if (Array.isArray(obj[key])) {\r\n                obj[key] = iframeMirror.getIds(iframeEl, obj[key]);\r\n            }\r\n            else {\r\n                obj[key] = iframeMirror.getId(iframeEl, obj[key]);\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    replaceIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceStyleIds(obj, iframeEl, keys) {\r\n        return this.replace(this.crossOriginIframeStyleMirror, obj, iframeEl, keys);\r\n    }\r\n    replaceIdOnNode(node, iframeEl) {\r\n        this.replaceIds(node, iframeEl, ['id', 'rootId']);\r\n        if ('childNodes' in node) {\r\n            node.childNodes.forEach((child) => {\r\n                this.replaceIdOnNode(child, iframeEl);\r\n            });\r\n        }\r\n    }\r\n    patchRootIdOnNode(node, rootId) {\r\n        if (node.type !== NodeType.Document && !node.rootId)\r\n            node.rootId = rootId;\r\n        if ('childNodes' in node) {\r\n            node.childNodes.forEach((child) => {\r\n                this.patchRootIdOnNode(child, rootId);\r\n            });\r\n        }\r\n    }\r\n}\n\nexport { IframeManager };\n","import { initMutationObserver, initScrollObserver, initAdoptedStyleSheetObserver } from './observer.js';\nimport { patch, inDom } from '../utils.js';\nimport { isNativeShadowDom } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nclass ShadowDomManager {\r\n    constructor(options) {\r\n        this.shadowDoms = new WeakSet();\r\n        this.restoreHandlers = [];\r\n        this.mutationCb = options.mutationCb;\r\n        this.scrollCb = options.scrollCb;\r\n        this.bypassOptions = options.bypassOptions;\r\n        this.mirror = options.mirror;\r\n        this.init();\r\n    }\r\n    init() {\r\n        this.reset();\r\n        this.patchAttachShadow(Element, document);\r\n    }\r\n    addShadowRoot(shadowRoot, doc) {\r\n        if (!isNativeShadowDom(shadowRoot))\r\n            return;\r\n        if (this.shadowDoms.has(shadowRoot))\r\n            return;\r\n        this.shadowDoms.add(shadowRoot);\r\n        const observer = initMutationObserver(Object.assign(Object.assign({}, this.bypassOptions), { doc, mutationCb: this.mutationCb, mirror: this.mirror, shadowDomManager: this }), shadowRoot);\r\n        this.restoreHandlers.push(() => observer.disconnect());\r\n        this.restoreHandlers.push(initScrollObserver(Object.assign(Object.assign({}, this.bypassOptions), { scrollCb: this.scrollCb, doc: shadowRoot, mirror: this.mirror })));\r\n        setTimeout(() => {\r\n            if (shadowRoot.adoptedStyleSheets &&\r\n                shadowRoot.adoptedStyleSheets.length > 0)\r\n                this.bypassOptions.stylesheetManager.adoptStyleSheets(shadowRoot.adoptedStyleSheets, this.mirror.getId(shadowRoot.host));\r\n            this.restoreHandlers.push(initAdoptedStyleSheetObserver({\r\n                mirror: this.mirror,\r\n                stylesheetManager: this.bypassOptions.stylesheetManager,\r\n            }, shadowRoot));\r\n        }, 0);\r\n    }\r\n    observeAttachShadow(iframeElement) {\r\n        if (!iframeElement.contentWindow || !iframeElement.contentDocument)\r\n            return;\r\n        this.patchAttachShadow(iframeElement.contentWindow.Element, iframeElement.contentDocument);\r\n    }\r\n    patchAttachShadow(element, doc) {\r\n        const manager = this;\r\n        this.restoreHandlers.push(patch(element.prototype, 'attachShadow', function (original) {\r\n            return function (option) {\r\n                const shadowRoot = original.call(this, option);\r\n                if (this.shadowRoot && inDom(this))\r\n                    manager.addShadowRoot(this.shadowRoot, doc);\r\n                return shadowRoot;\r\n            };\r\n        }));\r\n    }\r\n    reset() {\r\n        this.restoreHandlers.forEach((handler) => {\r\n            try {\r\n                handler();\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        this.restoreHandlers = [];\r\n        this.shadowDoms = new WeakSet();\r\n    }\r\n}\n\nexport { ShadowDomManager };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nexport { __awaiter, __rest };\n","/*\n * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2021 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nvar encode = function (arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nvar decode = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n\nexport { decode, encode };\n","import { encode } from './../../../../../../ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js';\n\nconst canvasVarMap = new Map();\r\nfunction variableListFor(ctx, ctor) {\r\n    let contextMap = canvasVarMap.get(ctx);\r\n    if (!contextMap) {\r\n        contextMap = new Map();\r\n        canvasVarMap.set(ctx, contextMap);\r\n    }\r\n    if (!contextMap.has(ctor)) {\r\n        contextMap.set(ctor, []);\r\n    }\r\n    return contextMap.get(ctor);\r\n}\r\nconst saveWebGLVar = (value, win, ctx) => {\r\n    if (!value ||\r\n        !(isInstanceOfWebGLObject(value, win) || typeof value === 'object'))\r\n        return;\r\n    const name = value.constructor.name;\r\n    const list = variableListFor(ctx, name);\r\n    let index = list.indexOf(value);\r\n    if (index === -1) {\r\n        index = list.length;\r\n        list.push(value);\r\n    }\r\n    return index;\r\n};\r\nfunction serializeArg(value, win, ctx) {\r\n    if (value instanceof Array) {\r\n        return value.map((arg) => serializeArg(arg, win, ctx));\r\n    }\r\n    else if (value === null) {\r\n        return value;\r\n    }\r\n    else if (value instanceof Float32Array ||\r\n        value instanceof Float64Array ||\r\n        value instanceof Int32Array ||\r\n        value instanceof Uint32Array ||\r\n        value instanceof Uint8Array ||\r\n        value instanceof Uint16Array ||\r\n        value instanceof Int16Array ||\r\n        value instanceof Int8Array ||\r\n        value instanceof Uint8ClampedArray) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [Object.values(value)],\r\n        };\r\n    }\r\n    else if (value instanceof ArrayBuffer) {\r\n        const name = value.constructor.name;\r\n        const base64 = encode(value);\r\n        return {\r\n            rr_type: name,\r\n            base64,\r\n        };\r\n    }\r\n    else if (value instanceof DataView) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [\r\n                serializeArg(value.buffer, win, ctx),\r\n                value.byteOffset,\r\n                value.byteLength,\r\n            ],\r\n        };\r\n    }\r\n    else if (value instanceof HTMLImageElement) {\r\n        const name = value.constructor.name;\r\n        const { src } = value;\r\n        return {\r\n            rr_type: name,\r\n            src,\r\n        };\r\n    }\r\n    else if (value instanceof HTMLCanvasElement) {\r\n        const name = 'HTMLImageElement';\r\n        const src = value.toDataURL();\r\n        return {\r\n            rr_type: name,\r\n            src,\r\n        };\r\n    }\r\n    else if (value instanceof ImageData) {\r\n        const name = value.constructor.name;\r\n        return {\r\n            rr_type: name,\r\n            args: [serializeArg(value.data, win, ctx), value.width, value.height],\r\n        };\r\n    }\r\n    else if (isInstanceOfWebGLObject(value, win) || typeof value === 'object') {\r\n        const name = value.constructor.name;\r\n        const index = saveWebGLVar(value, win, ctx);\r\n        return {\r\n            rr_type: name,\r\n            index: index,\r\n        };\r\n    }\r\n    return value;\r\n}\r\nconst serializeArgs = (args, win, ctx) => {\r\n    return [...args].map((arg) => serializeArg(arg, win, ctx));\r\n};\r\nconst isInstanceOfWebGLObject = (value, win) => {\r\n    const webGLConstructorNames = [\r\n        'WebGLActiveInfo',\r\n        'WebGLBuffer',\r\n        'WebGLFramebuffer',\r\n        'WebGLProgram',\r\n        'WebGLRenderbuffer',\r\n        'WebGLShader',\r\n        'WebGLShaderPrecisionFormat',\r\n        'WebGLTexture',\r\n        'WebGLUniformLocation',\r\n        'WebGLVertexArrayObject',\r\n        'WebGLVertexArrayObjectOES',\r\n    ];\r\n    const supportedWebGLConstructorNames = webGLConstructorNames.filter((name) => typeof win[name] === 'function');\r\n    return Boolean(supportedWebGLConstructorNames.find((name) => value instanceof win[name]));\r\n};\n\nexport { isInstanceOfWebGLObject, saveWebGLVar, serializeArg, serializeArgs, variableListFor };\n","import { patch, isBlocked } from '../../../utils.js';\n\nfunction getNormalizedContextName(contextType) {\r\n    return contextType === 'experimental-webgl' ? 'webgl' : contextType;\r\n}\r\nfunction initCanvasContextObserver(win, blockClass, blockSelector, setPreserveDrawingBufferToTrue) {\r\n    const handlers = [];\r\n    try {\r\n        const restoreHandler = patch(win.HTMLCanvasElement.prototype, 'getContext', function (original) {\r\n            return function (contextType, ...args) {\r\n                if (!isBlocked(this, blockClass, blockSelector, true)) {\r\n                    const ctxName = getNormalizedContextName(contextType);\r\n                    if (!('__context' in this))\r\n                        this.__context = ctxName;\r\n                    if (setPreserveDrawingBufferToTrue &&\r\n                        ['webgl', 'webgl2'].includes(ctxName)) {\r\n                        if (args[0] && typeof args[0] === 'object') {\r\n                            const contextAttributes = args[0];\r\n                            if (!contextAttributes.preserveDrawingBuffer) {\r\n                                contextAttributes.preserveDrawingBuffer = true;\r\n                            }\r\n                        }\r\n                        else {\r\n                            args.splice(0, 1, {\r\n                                preserveDrawingBuffer: true,\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                return original.apply(this, [contextType, ...args]);\r\n            };\r\n        });\r\n        handlers.push(restoreHandler);\r\n    }\r\n    catch (_a) {\r\n        console.error('failed to patch HTMLCanvasElement.prototype.getContext');\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvasContextObserver as default };\n","import { CanvasContext } from '../../../../../types/dist/types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { saveWebGLVar, serializeArgs } from './serialize-args.js';\n\nfunction patchGLPrototype(prototype, type, cb, blockClass, blockSelector, mirror, win) {\r\n    const handlers = [];\r\n    const props = Object.getOwnPropertyNames(prototype);\r\n    for (const prop of props) {\r\n        if ([\r\n            'isContextLost',\r\n            'canvas',\r\n            'drawingBufferWidth',\r\n            'drawingBufferHeight',\r\n        ].includes(prop)) {\r\n            continue;\r\n        }\r\n        try {\r\n            if (typeof prototype[prop] !== 'function') {\r\n                continue;\r\n            }\r\n            const restoreHandler = patch(prototype, prop, function (original) {\r\n                return function (...args) {\r\n                    const result = original.apply(this, args);\r\n                    saveWebGLVar(result, win, this);\r\n                    if ('tagName' in this.canvas &&\r\n                        !isBlocked(this.canvas, blockClass, blockSelector, true)) {\r\n                        const recordArgs = serializeArgs([...args], win, this);\r\n                        const mutation = {\r\n                            type,\r\n                            property: prop,\r\n                            args: recordArgs,\r\n                        };\r\n                        cb(this.canvas, mutation);\r\n                    }\r\n                    return result;\r\n                };\r\n            });\r\n            handlers.push(restoreHandler);\r\n        }\r\n        catch (_a) {\r\n            const hookHandler = hookSetter(prototype, prop, {\r\n                set(v) {\r\n                    cb(this.canvas, {\r\n                        type,\r\n                        property: prop,\r\n                        args: [v],\r\n                        setter: true,\r\n                    });\r\n                },\r\n            });\r\n            handlers.push(hookHandler);\r\n        }\r\n    }\r\n    return handlers;\r\n}\r\nfunction initCanvasWebGLMutationObserver(cb, win, blockClass, blockSelector, mirror) {\r\n    const handlers = [];\r\n    handlers.push(...patchGLPrototype(win.WebGLRenderingContext.prototype, CanvasContext.WebGL, cb, blockClass, blockSelector, mirror, win));\r\n    if (typeof win.WebGL2RenderingContext !== 'undefined') {\r\n        handlers.push(...patchGLPrototype(win.WebGL2RenderingContext.prototype, CanvasContext.WebGL2, cb, blockClass, blockSelector, mirror, win));\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvasWebGLMutationObserver as default };\n","function decodeBase64(base64, enableUnicode) {\n    var binaryString = atob(base64);\n    if (enableUnicode) {\n        var binaryView = new Uint8Array(binaryString.length);\n        for (var i = 0, n = binaryString.length; i < n; ++i) {\n            binaryView[i] = binaryString.charCodeAt(i);\n        }\n        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));\n    }\n    return binaryString;\n}\n\nfunction createURL(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    var blob = new Blob([body], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var url;\n    return function WorkerFactory(options) {\n        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);\n        return new Worker(url, options);\n    };\n}\n\nexport { createBase64WorkerFactory };\n","import { createBase64WorkerFactory } from './_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js';\n\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=', null, false);\n/* eslint-enable */\n\nexport { WorkerFactory as default };\n","import { createMirror, snapshot } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { initObservers, mutationBuffers } from './observer.js';\nimport { polyfill, nowTimestamp, on, getWindowWidth, getWindowHeight, getWindowScroll, isSerializedIframe, isSerializedStylesheet, hasShadowRoot } from '../utils.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\nimport { IframeManager } from './iframe-manager.js';\nimport { ShadowDomManager } from './shadow-dom-manager.js';\nimport { CanvasManager } from './observers/canvas/canvas-manager.js';\nimport { StylesheetManager } from './stylesheet-manager.js';\nimport ProcessedNodeManager from './processed-node-manager.js';\nimport { callbackWrapper, unregisterErrorHandler, registerErrorHandler } from './error-handler.js';\n\nfunction wrapEvent(e) {\r\n    return Object.assign(Object.assign({}, e), { timestamp: nowTimestamp() });\r\n}\r\nlet wrappedEmit;\r\nlet takeFullSnapshot;\r\nlet canvasManager;\r\nlet recording = false;\r\nconst mirror = createMirror();\r\nfunction record(options = {}) {\r\n    const { emit, checkoutEveryNms, checkoutEveryNth, blockClass = 'rr-block', blockSelector = null, ignoreClass = 'rr-ignore', ignoreSelector = null, maskTextClass = 'rr-mask', maskTextSelector = null, inlineStylesheet = true, maskAllInputs, maskInputOptions: _maskInputOptions, slimDOMOptions: _slimDOMOptions, maskInputFn, maskTextFn, hooks, packFn, sampling = {}, dataURLOptions = {}, mousemoveWait, recordCanvas = false, recordCrossOriginIframes = false, recordAfter = options.recordAfter === 'DOMContentLoaded'\r\n        ? options.recordAfter\r\n        : 'load', userTriggeredOnInput = false, collectFonts = false, inlineImages = false, plugins, keepIframeSrcFn = () => false, ignoreCSSAttributes = new Set([]), errorHandler, } = options;\r\n    registerErrorHandler(errorHandler);\r\n    const inEmittingFrame = recordCrossOriginIframes\r\n        ? window.parent === window\r\n        : true;\r\n    let passEmitsToParent = false;\r\n    if (!inEmittingFrame) {\r\n        try {\r\n            if (window.parent.document) {\r\n                passEmitsToParent = false;\r\n            }\r\n        }\r\n        catch (e) {\r\n            passEmitsToParent = true;\r\n        }\r\n    }\r\n    if (inEmittingFrame && !emit) {\r\n        throw new Error('emit function is required');\r\n    }\r\n    if (mousemoveWait !== undefined && sampling.mousemove === undefined) {\r\n        sampling.mousemove = mousemoveWait;\r\n    }\r\n    mirror.reset();\r\n    const maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true,\r\n        }\r\n        : _maskInputOptions !== undefined\r\n            ? _maskInputOptions\r\n            : { password: true };\r\n    const slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === 'all'\r\n        ? {\r\n            script: true,\r\n            comment: true,\r\n            headFavicon: true,\r\n            headWhitespace: true,\r\n            headMetaSocial: true,\r\n            headMetaRobots: true,\r\n            headMetaHttpEquiv: true,\r\n            headMetaVerification: true,\r\n            headMetaAuthorship: _slimDOMOptions === 'all',\r\n            headMetaDescKeywords: _slimDOMOptions === 'all',\r\n        }\r\n        : _slimDOMOptions\r\n            ? _slimDOMOptions\r\n            : {};\r\n    polyfill();\r\n    let lastFullSnapshotEvent;\r\n    let incrementalSnapshotCount = 0;\r\n    const eventProcessor = (e) => {\r\n        for (const plugin of plugins || []) {\r\n            if (plugin.eventProcessor) {\r\n                e = plugin.eventProcessor(e);\r\n            }\r\n        }\r\n        if (packFn &&\r\n            !passEmitsToParent) {\r\n            e = packFn(e);\r\n        }\r\n        return e;\r\n    };\r\n    wrappedEmit = (e, isCheckout) => {\r\n        var _a;\r\n        if (((_a = mutationBuffers[0]) === null || _a === void 0 ? void 0 : _a.isFrozen()) &&\r\n            e.type !== EventType.FullSnapshot &&\r\n            !(e.type === EventType.IncrementalSnapshot &&\r\n                e.data.source === IncrementalSource.Mutation)) {\r\n            mutationBuffers.forEach((buf) => buf.unfreeze());\r\n        }\r\n        if (inEmittingFrame) {\r\n            emit === null || emit === void 0 ? void 0 : emit(eventProcessor(e), isCheckout);\r\n        }\r\n        else if (passEmitsToParent) {\r\n            const message = {\r\n                type: 'rrweb',\r\n                event: eventProcessor(e),\r\n                origin: window.location.origin,\r\n                isCheckout,\r\n            };\r\n            window.parent.postMessage(message, '*');\r\n        }\r\n        if (e.type === EventType.FullSnapshot) {\r\n            lastFullSnapshotEvent = e;\r\n            incrementalSnapshotCount = 0;\r\n        }\r\n        else if (e.type === EventType.IncrementalSnapshot) {\r\n            if (e.data.source === IncrementalSource.Mutation &&\r\n                e.data.isAttachIframe) {\r\n                return;\r\n            }\r\n            incrementalSnapshotCount++;\r\n            const exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;\r\n            const exceedTime = checkoutEveryNms &&\r\n                e.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;\r\n            if (exceedCount || exceedTime) {\r\n                takeFullSnapshot(true);\r\n            }\r\n        }\r\n    };\r\n    const wrappedMutationEmit = (m) => {\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.IncrementalSnapshot,\r\n            data: Object.assign({ source: IncrementalSource.Mutation }, m),\r\n        }));\r\n    };\r\n    const wrappedScrollEmit = (p) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.Scroll }, p),\r\n    }));\r\n    const wrappedCanvasMutationEmit = (p) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.CanvasMutation }, p),\r\n    }));\r\n    const wrappedAdoptedStyleSheetEmit = (a) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.AdoptedStyleSheet }, a),\r\n    }));\r\n    const stylesheetManager = new StylesheetManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        adoptedStyleSheetCb: wrappedAdoptedStyleSheetEmit,\r\n    });\r\n    const iframeManager = new IframeManager({\r\n        mirror,\r\n        mutationCb: wrappedMutationEmit,\r\n        stylesheetManager: stylesheetManager,\r\n        recordCrossOriginIframes,\r\n        wrappedEmit,\r\n    });\r\n    for (const plugin of plugins || []) {\r\n        if (plugin.getMirror)\r\n            plugin.getMirror({\r\n                nodeMirror: mirror,\r\n                crossOriginIframeMirror: iframeManager.crossOriginIframeMirror,\r\n                crossOriginIframeStyleMirror: iframeManager.crossOriginIframeStyleMirror,\r\n            });\r\n    }\r\n    const processedNodeManager = new ProcessedNodeManager();\r\n    canvasManager = new CanvasManager({\r\n        recordCanvas,\r\n        mutationCb: wrappedCanvasMutationEmit,\r\n        win: window,\r\n        blockClass,\r\n        blockSelector,\r\n        mirror,\r\n        sampling: sampling.canvas,\r\n        dataURLOptions,\r\n    });\r\n    const shadowDomManager = new ShadowDomManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        scrollCb: wrappedScrollEmit,\r\n        bypassOptions: {\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskInputOptions,\r\n            dataURLOptions,\r\n            maskTextFn,\r\n            maskInputFn,\r\n            recordCanvas,\r\n            inlineImages,\r\n            sampling,\r\n            slimDOMOptions,\r\n            iframeManager,\r\n            stylesheetManager,\r\n            canvasManager,\r\n            keepIframeSrcFn,\r\n            processedNodeManager,\r\n        },\r\n        mirror,\r\n    });\r\n    takeFullSnapshot = (isCheckout = false) => {\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.Meta,\r\n            data: {\r\n                href: window.location.href,\r\n                width: getWindowWidth(),\r\n                height: getWindowHeight(),\r\n            },\r\n        }), isCheckout);\r\n        stylesheetManager.reset();\r\n        shadowDomManager.init();\r\n        mutationBuffers.forEach((buf) => buf.lock());\r\n        const node = snapshot(document, {\r\n            mirror,\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskAllInputs: maskInputOptions,\r\n            maskTextFn,\r\n            slimDOM: slimDOMOptions,\r\n            dataURLOptions,\r\n            recordCanvas,\r\n            inlineImages,\r\n            onSerialize: (n) => {\r\n                if (isSerializedIframe(n, mirror)) {\r\n                    iframeManager.addIframe(n);\r\n                }\r\n                if (isSerializedStylesheet(n, mirror)) {\r\n                    stylesheetManager.trackLinkElement(n);\r\n                }\r\n                if (hasShadowRoot(n)) {\r\n                    shadowDomManager.addShadowRoot(n.shadowRoot, document);\r\n                }\r\n            },\r\n            onIframeLoad: (iframe, childSn) => {\r\n                iframeManager.attachIframe(iframe, childSn);\r\n                shadowDomManager.observeAttachShadow(iframe);\r\n            },\r\n            onStylesheetLoad: (linkEl, childSn) => {\r\n                stylesheetManager.attachLinkElement(linkEl, childSn);\r\n            },\r\n            keepIframeSrcFn,\r\n        });\r\n        if (!node) {\r\n            return console.warn('Failed to snapshot the document');\r\n        }\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.FullSnapshot,\r\n            data: {\r\n                node,\r\n                initialOffset: getWindowScroll(window),\r\n            },\r\n        }), isCheckout);\r\n        mutationBuffers.forEach((buf) => buf.unlock());\r\n        if (document.adoptedStyleSheets && document.adoptedStyleSheets.length > 0)\r\n            stylesheetManager.adoptStyleSheets(document.adoptedStyleSheets, mirror.getId(document));\r\n    };\r\n    try {\r\n        const handlers = [];\r\n        const observe = (doc) => {\r\n            var _a;\r\n            return callbackWrapper(initObservers)({\r\n                mutationCb: wrappedMutationEmit,\r\n                mousemoveCb: (positions, source) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source,\r\n                        positions,\r\n                    },\r\n                })),\r\n                mouseInteractionCb: (d) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MouseInteraction }, d),\r\n                })),\r\n                scrollCb: wrappedScrollEmit,\r\n                viewportResizeCb: (d) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.ViewportResize }, d),\r\n                })),\r\n                inputCb: (v) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Input }, v),\r\n                })),\r\n                mediaInteractionCb: (p) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MediaInteraction }, p),\r\n                })),\r\n                styleSheetRuleCb: (r) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleSheetRule }, r),\r\n                })),\r\n                styleDeclarationCb: (r) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleDeclaration }, r),\r\n                })),\r\n                canvasMutationCb: wrappedCanvasMutationEmit,\r\n                fontCb: (p) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Font }, p),\r\n                })),\r\n                selectionCb: (p) => {\r\n                    wrappedEmit(wrapEvent({\r\n                        type: EventType.IncrementalSnapshot,\r\n                        data: Object.assign({ source: IncrementalSource.Selection }, p),\r\n                    }));\r\n                },\r\n                blockClass,\r\n                ignoreClass,\r\n                ignoreSelector,\r\n                maskTextClass,\r\n                maskTextSelector,\r\n                maskInputOptions,\r\n                inlineStylesheet,\r\n                sampling,\r\n                recordCanvas,\r\n                inlineImages,\r\n                userTriggeredOnInput,\r\n                collectFonts,\r\n                doc,\r\n                maskInputFn,\r\n                maskTextFn,\r\n                keepIframeSrcFn,\r\n                blockSelector,\r\n                slimDOMOptions,\r\n                dataURLOptions,\r\n                mirror,\r\n                iframeManager,\r\n                stylesheetManager,\r\n                shadowDomManager,\r\n                processedNodeManager,\r\n                canvasManager,\r\n                ignoreCSSAttributes,\r\n                plugins: ((_a = plugins === null || plugins === void 0 ? void 0 : plugins.filter((p) => p.observer)) === null || _a === void 0 ? void 0 : _a.map((p) => ({\r\n                    observer: p.observer,\r\n                    options: p.options,\r\n                    callback: (payload) => wrappedEmit(wrapEvent({\r\n                        type: EventType.Plugin,\r\n                        data: {\r\n                            plugin: p.name,\r\n                            payload,\r\n                        },\r\n                    })),\r\n                }))) || [],\r\n            }, hooks);\r\n        };\r\n        iframeManager.addLoadListener((iframeEl) => {\r\n            try {\r\n                handlers.push(observe(iframeEl.contentDocument));\r\n            }\r\n            catch (error) {\r\n                console.warn(error);\r\n            }\r\n        });\r\n        const init = () => {\r\n            takeFullSnapshot();\r\n            handlers.push(observe(document));\r\n            recording = true;\r\n        };\r\n        if (document.readyState === 'interactive' ||\r\n            document.readyState === 'complete') {\r\n            init();\r\n        }\r\n        else {\r\n            handlers.push(on('DOMContentLoaded', () => {\r\n                wrappedEmit(wrapEvent({\r\n                    type: EventType.DomContentLoaded,\r\n                    data: {},\r\n                }));\r\n                if (recordAfter === 'DOMContentLoaded')\r\n                    init();\r\n            }));\r\n            handlers.push(on('load', () => {\r\n                wrappedEmit(wrapEvent({\r\n                    type: EventType.Load,\r\n                    data: {},\r\n                }));\r\n                if (recordAfter === 'load')\r\n                    init();\r\n            }, window));\r\n        }\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n            processedNodeManager.destroy();\r\n            recording = false;\r\n            unregisterErrorHandler();\r\n        };\r\n    }\r\n    catch (error) {\r\n        console.warn(error);\r\n    }\r\n}\r\nrecord.addCustomEvent = (tag, payload) => {\r\n    if (!recording) {\r\n        throw new Error('please add custom event after start recording');\r\n    }\r\n    wrappedEmit(wrapEvent({\r\n        type: EventType.Custom,\r\n        data: {\r\n            tag,\r\n            payload,\r\n        },\r\n    }));\r\n};\r\nrecord.freezePage = () => {\r\n    mutationBuffers.forEach((buf) => buf.freeze());\r\n};\r\nrecord.takeFullSnapshot = (isCheckout) => {\r\n    if (!recording) {\r\n        throw new Error('please take full snapshot after start recording');\r\n    }\r\n    takeFullSnapshot(isCheckout);\r\n};\r\nrecord.mirror = mirror;\n\nexport { record as default };\n","import { __rest, __awaiter } from './../../../../../../ext/tslib/tslib.es6.js';\nimport { isBlocked } from '../../../utils.js';\nimport { CanvasContext } from '../../../../../types/dist/types.js';\nimport initCanvas2DMutationObserver from './2d.js';\nimport initCanvasContextObserver from './canvas.js';\nimport initCanvasWebGLMutationObserver from './webgl.js';\nimport WorkerFactory from '../../../../../../_virtual/image-bitmap-data-url-worker.js';\n\nclass CanvasManager {\r\n    reset() {\r\n        this.pendingCanvasMutations.clear();\r\n        this.resetObservers && this.resetObservers();\r\n    }\r\n    freeze() {\r\n        this.frozen = true;\r\n    }\r\n    unfreeze() {\r\n        this.frozen = false;\r\n    }\r\n    lock() {\r\n        this.locked = true;\r\n    }\r\n    unlock() {\r\n        this.locked = false;\r\n    }\r\n    constructor(options) {\r\n        this.pendingCanvasMutations = new Map();\r\n        this.rafStamps = { latestId: 0, invokeId: null };\r\n        this.frozen = false;\r\n        this.locked = false;\r\n        this.processMutation = (target, mutation) => {\r\n            const newFrame = this.rafStamps.invokeId &&\r\n                this.rafStamps.latestId !== this.rafStamps.invokeId;\r\n            if (newFrame || !this.rafStamps.invokeId)\r\n                this.rafStamps.invokeId = this.rafStamps.latestId;\r\n            if (!this.pendingCanvasMutations.has(target)) {\r\n                this.pendingCanvasMutations.set(target, []);\r\n            }\r\n            this.pendingCanvasMutations.get(target).push(mutation);\r\n        };\r\n        const { sampling = 'all', win, blockClass, blockSelector, recordCanvas, dataURLOptions, } = options;\r\n        this.mutationCb = options.mutationCb;\r\n        this.mirror = options.mirror;\r\n        if (recordCanvas && sampling === 'all')\r\n            this.initCanvasMutationObserver(win, blockClass, blockSelector);\r\n        if (recordCanvas && typeof sampling === 'number')\r\n            this.initCanvasFPSObserver(sampling, win, blockClass, blockSelector, {\r\n                dataURLOptions,\r\n            });\r\n    }\r\n    initCanvasFPSObserver(fps, win, blockClass, blockSelector, options) {\r\n        const canvasContextReset = initCanvasContextObserver(win, blockClass, blockSelector, true);\r\n        const snapshotInProgressMap = new Map();\r\n        const worker = new WorkerFactory();\r\n        worker.onmessage = (e) => {\r\n            const { id } = e.data;\r\n            snapshotInProgressMap.set(id, false);\r\n            if (!('base64' in e.data))\r\n                return;\r\n            const { base64, type, width, height } = e.data;\r\n            this.mutationCb({\r\n                id,\r\n                type: CanvasContext['2D'],\r\n                commands: [\r\n                    {\r\n                        property: 'clearRect',\r\n                        args: [0, 0, width, height],\r\n                    },\r\n                    {\r\n                        property: 'drawImage',\r\n                        args: [\r\n                            {\r\n                                rr_type: 'ImageBitmap',\r\n                                args: [\r\n                                    {\r\n                                        rr_type: 'Blob',\r\n                                        data: [{ rr_type: 'ArrayBuffer', base64 }],\r\n                                        type,\r\n                                    },\r\n                                ],\r\n                            },\r\n                            0,\r\n                            0,\r\n                        ],\r\n                    },\r\n                ],\r\n            });\r\n        };\r\n        const timeBetweenSnapshots = 1000 / fps;\r\n        let lastSnapshotTime = 0;\r\n        let rafId;\r\n        const getCanvas = () => {\r\n            const matchedCanvas = [];\r\n            win.document.querySelectorAll('canvas').forEach((canvas) => {\r\n                if (!isBlocked(canvas, blockClass, blockSelector, true)) {\r\n                    matchedCanvas.push(canvas);\r\n                }\r\n            });\r\n            return matchedCanvas;\r\n        };\r\n        const takeCanvasSnapshots = (timestamp) => {\r\n            if (lastSnapshotTime &&\r\n                timestamp - lastSnapshotTime < timeBetweenSnapshots) {\r\n                rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n                return;\r\n            }\r\n            lastSnapshotTime = timestamp;\r\n            getCanvas()\r\n                .forEach((canvas) => __awaiter(this, void 0, void 0, function* () {\r\n                var _a;\r\n                const id = this.mirror.getId(canvas);\r\n                if (snapshotInProgressMap.get(id))\r\n                    return;\r\n                snapshotInProgressMap.set(id, true);\r\n                if (['webgl', 'webgl2'].includes(canvas.__context)) {\r\n                    const context = canvas.getContext(canvas.__context);\r\n                    if (((_a = context === null || context === void 0 ? void 0 : context.getContextAttributes()) === null || _a === void 0 ? void 0 : _a.preserveDrawingBuffer) === false) {\r\n                        context.clear(context.COLOR_BUFFER_BIT);\r\n                    }\r\n                }\r\n                const bitmap = yield createImageBitmap(canvas);\r\n                worker.postMessage({\r\n                    id,\r\n                    bitmap,\r\n                    width: canvas.width,\r\n                    height: canvas.height,\r\n                    dataURLOptions: options.dataURLOptions,\r\n                }, [bitmap]);\r\n            }));\r\n            rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n        };\r\n        rafId = requestAnimationFrame(takeCanvasSnapshots);\r\n        this.resetObservers = () => {\r\n            canvasContextReset();\r\n            cancelAnimationFrame(rafId);\r\n        };\r\n    }\r\n    initCanvasMutationObserver(win, blockClass, blockSelector) {\r\n        this.startRAFTimestamping();\r\n        this.startPendingCanvasMutationFlusher();\r\n        const canvasContextReset = initCanvasContextObserver(win, blockClass, blockSelector, false);\r\n        const canvas2DReset = initCanvas2DMutationObserver(this.processMutation.bind(this), win, blockClass, blockSelector);\r\n        const canvasWebGL1and2Reset = initCanvasWebGLMutationObserver(this.processMutation.bind(this), win, blockClass, blockSelector, this.mirror);\r\n        this.resetObservers = () => {\r\n            canvasContextReset();\r\n            canvas2DReset();\r\n            canvasWebGL1and2Reset();\r\n        };\r\n    }\r\n    startPendingCanvasMutationFlusher() {\r\n        requestAnimationFrame(() => this.flushPendingCanvasMutations());\r\n    }\r\n    startRAFTimestamping() {\r\n        const setLatestRAFTimestamp = (timestamp) => {\r\n            this.rafStamps.latestId = timestamp;\r\n            requestAnimationFrame(setLatestRAFTimestamp);\r\n        };\r\n        requestAnimationFrame(setLatestRAFTimestamp);\r\n    }\r\n    flushPendingCanvasMutations() {\r\n        this.pendingCanvasMutations.forEach((values, canvas) => {\r\n            const id = this.mirror.getId(canvas);\r\n            this.flushPendingCanvasMutationFor(canvas, id);\r\n        });\r\n        requestAnimationFrame(() => this.flushPendingCanvasMutations());\r\n    }\r\n    flushPendingCanvasMutationFor(canvas, id) {\r\n        if (this.frozen || this.locked) {\r\n            return;\r\n        }\r\n        const valuesWithType = this.pendingCanvasMutations.get(canvas);\r\n        if (!valuesWithType || id === -1)\r\n            return;\r\n        const values = valuesWithType.map((value) => {\r\n            const rest = __rest(value, [\"type\"]);\r\n            return rest;\r\n        });\r\n        const { type } = valuesWithType[0];\r\n        this.mutationCb({ id, type, commands: values });\r\n        this.pendingCanvasMutations.delete(canvas);\r\n    }\r\n}\n\nexport { CanvasManager };\n","import { CanvasContext } from '../../../../../types/dist/types.js';\nimport { patch, isBlocked, hookSetter } from '../../../utils.js';\nimport { serializeArgs } from './serialize-args.js';\n\nfunction initCanvas2DMutationObserver(cb, win, blockClass, blockSelector) {\r\n    const handlers = [];\r\n    const props2D = Object.getOwnPropertyNames(win.CanvasRenderingContext2D.prototype);\r\n    for (const prop of props2D) {\r\n        try {\r\n            if (typeof win.CanvasRenderingContext2D.prototype[prop] !== 'function') {\r\n                continue;\r\n            }\r\n            const restoreHandler = patch(win.CanvasRenderingContext2D.prototype, prop, function (original) {\r\n                return function (...args) {\r\n                    if (!isBlocked(this.canvas, blockClass, blockSelector, true)) {\r\n                        setTimeout(() => {\r\n                            const recordArgs = serializeArgs([...args], win, this);\r\n                            cb(this.canvas, {\r\n                                type: CanvasContext['2D'],\r\n                                property: prop,\r\n                                args: recordArgs,\r\n                            });\r\n                        }, 0);\r\n                    }\r\n                    return original.apply(this, args);\r\n                };\r\n            });\r\n            handlers.push(restoreHandler);\r\n        }\r\n        catch (_a) {\r\n            const hookHandler = hookSetter(win.CanvasRenderingContext2D.prototype, prop, {\r\n                set(v) {\r\n                    cb(this.canvas, {\r\n                        type: CanvasContext['2D'],\r\n                        property: prop,\r\n                        args: [v],\r\n                        setter: true,\r\n                    });\r\n                },\r\n            });\r\n            handlers.push(hookHandler);\r\n        }\r\n    }\r\n    return () => {\r\n        handlers.forEach((h) => h());\r\n    };\r\n}\n\nexport { initCanvas2DMutationObserver as default };\n","import { stringifyRule } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { StyleSheetMirror } from '../utils.js';\n\nclass StylesheetManager {\r\n    constructor(options) {\r\n        this.trackedLinkElements = new WeakSet();\r\n        this.styleMirror = new StyleSheetMirror();\r\n        this.mutationCb = options.mutationCb;\r\n        this.adoptedStyleSheetCb = options.adoptedStyleSheetCb;\r\n    }\r\n    attachLinkElement(linkEl, childSn) {\r\n        if ('_cssText' in childSn.attributes)\r\n            this.mutationCb({\r\n                adds: [],\r\n                removes: [],\r\n                texts: [],\r\n                attributes: [\r\n                    {\r\n                        id: childSn.id,\r\n                        attributes: childSn\r\n                            .attributes,\r\n                    },\r\n                ],\r\n            });\r\n        this.trackLinkElement(linkEl);\r\n    }\r\n    trackLinkElement(linkEl) {\r\n        if (this.trackedLinkElements.has(linkEl))\r\n            return;\r\n        this.trackedLinkElements.add(linkEl);\r\n        this.trackStylesheetInLinkElement(linkEl);\r\n    }\r\n    adoptStyleSheets(sheets, hostId) {\r\n        if (sheets.length === 0)\r\n            return;\r\n        const adoptedStyleSheetData = {\r\n            id: hostId,\r\n            styleIds: [],\r\n        };\r\n        const styles = [];\r\n        for (const sheet of sheets) {\r\n            let styleId;\r\n            if (!this.styleMirror.has(sheet)) {\r\n                styleId = this.styleMirror.add(sheet);\r\n                const rules = Array.from(sheet.rules || CSSRule);\r\n                styles.push({\r\n                    styleId,\r\n                    rules: rules.map((r, index) => {\r\n                        return {\r\n                            rule: stringifyRule(r),\r\n                            index,\r\n                        };\r\n                    }),\r\n                });\r\n            }\r\n            else\r\n                styleId = this.styleMirror.getId(sheet);\r\n            adoptedStyleSheetData.styleIds.push(styleId);\r\n        }\r\n        if (styles.length > 0)\r\n            adoptedStyleSheetData.styles = styles;\r\n        this.adoptedStyleSheetCb(adoptedStyleSheetData);\r\n    }\r\n    reset() {\r\n        this.styleMirror.reset();\r\n        this.trackedLinkElements = new WeakSet();\r\n    }\r\n    trackStylesheetInLinkElement(linkEl) {\r\n    }\r\n}\n\nexport { StylesheetManager };\n","class ProcessedNodeManager {\r\n    constructor() {\r\n        this.nodeMap = new WeakMap();\r\n        this.loop = true;\r\n        this.periodicallyClear();\r\n    }\r\n    periodicallyClear() {\r\n        requestAnimationFrame(() => {\r\n            this.clear();\r\n            if (this.loop)\r\n                this.periodicallyClear();\r\n        });\r\n    }\r\n    inOtherBuffer(node, thisBuffer) {\r\n        const buffers = this.nodeMap.get(node);\r\n        return (buffers && Array.from(buffers).some((buffer) => buffer !== thisBuffer));\r\n    }\r\n    add(node, buffer) {\r\n        this.nodeMap.set(node, (this.nodeMap.get(node) || new Set()).add(buffer));\r\n    }\r\n    clear() {\r\n        this.nodeMap = new WeakMap();\r\n    }\r\n    destroy() {\r\n        this.loop = false;\r\n    }\r\n}\n\nexport { ProcessedNodeManager as default };\n","import record from './record/index.js';\nexport { default as record } from './record/index.js';\nimport '../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport '../../rrdom/es/rrdom.js';\nimport * as utils from './utils.js';\nexport { utils };\nexport { _mirror as mirror } from './utils.js';\nimport './../../../ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js';\n\nconst { addCustomEvent } = record;\r\nconst { freezePage } = record;\n\nexport { addCustomEvent, freezePage };\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i)\n            co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8)) >>> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >>> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) >> 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                if (!noSt && pos + tl * (clb + 7) > tbts)\n                    break;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts)\n                throw 'unexpected EOF';\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var mxa = lbt + dbt + 18;\n        while (noSt || pos + mxa < tbts) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts)\n                throw 'unexpected EOF';\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts)\n                    throw 'unexpected EOF';\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = pos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [new u8(0), 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768\n            var imod = i & 32767;\n            // previous index with this value\n            var pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst)\n            pos = wfblk(w, pos, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 5552, l);\n                for (; i < e; ++i)\n                    n += d[i], m += n;\n                n %= 65521, m %= 65521;\n            }\n            a = n, b = m;\n        },\n        d: function () { return ((a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8)) + ((a & 255) << 23) * 2; }\n    };\n};\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nfunction zlibSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nfunction unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nfunction strToU8(str, latin1) {\n    var l = str.length;\n    if (!latin1 && typeof TextEncoder != 'undefined')\n        return new TextEncoder().encode(str);\n    var ar = new u8(str.length + (str.length >>> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >>> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >>> 18)), w(128 | ((c >>> 12) & 63)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >>> 12)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nfunction strFromU8(dat, latin1) {\n    var r = '';\n    if (!latin1 && typeof TextDecoder != 'undefined')\n        return new TextDecoder().decode(dat);\n    for (var i = 0; i < dat.length;) {\n        var c = dat[i++];\n        if (c < 128 || latin1)\n            r += String.fromCharCode(c);\n        else if (c < 224)\n            r += String.fromCharCode((c & 31) << 6 | (dat[i++] & 63));\n        else if (c < 240)\n            r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63));\n        else\n            c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n    }\n    return r;\n}\n\nexport { strFromU8, strToU8, unzlibSync, zlibSync };\n","const MARK = 'v1';\n\nexport { MARK };\n","import { strFromU8, zlibSync, strToU8 } from './../../../../ext/fflate/esm/browser.js';\nimport { MARK } from './base.js';\n\nconst pack = (event) => {\r\n    const _e = Object.assign(Object.assign({}, event), { v: MARK });\r\n    return strFromU8(zlibSync(strToU8(JSON.stringify(_e))), true);\r\n};\n\nexport { pack };\n","import { strFromU8, unzlibSync, strToU8 } from './../../../../ext/fflate/esm/browser.js';\nimport { MARK } from './base.js';\n\nconst unpack = (raw) => {\r\n    if (typeof raw !== 'string') {\r\n        return raw;\r\n    }\r\n    try {\r\n        const e = JSON.parse(raw);\r\n        if (e.timestamp) {\r\n            return e;\r\n        }\r\n    }\r\n    catch (error) {\r\n    }\r\n    try {\r\n        const e = JSON.parse(strFromU8(unzlibSync(strToU8(raw, true))));\r\n        if (e.v === MARK) {\r\n            return e;\r\n        }\r\n        throw new Error(`These events were packed with packer ${e.v} which is incompatible with current packer ${MARK}.`);\r\n    }\r\n    catch (error) {\r\n        console.error(error);\r\n        throw new Error('Unknown data format.');\r\n    }\r\n};\n\nexport { unpack };\n","class StackFrame {\r\n    constructor(obj) {\r\n        this.fileName = obj.fileName || '';\r\n        this.functionName = obj.functionName || '';\r\n        this.lineNumber = obj.lineNumber;\r\n        this.columnNumber = obj.columnNumber;\r\n    }\r\n    toString() {\r\n        const lineNumber = this.lineNumber || '';\r\n        const columnNumber = this.columnNumber || '';\r\n        if (this.functionName)\r\n            return `${this.functionName} (${this.fileName}:${lineNumber}:${columnNumber})`;\r\n        return `${this.fileName}:${lineNumber}:${columnNumber}`;\r\n    }\r\n}\r\nconst FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\r\nconst CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\r\nconst SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\r\nconst ErrorStackParser = {\r\n    parse: function (error) {\r\n        if (!error) {\r\n            return [];\r\n        }\r\n        if (typeof error.stacktrace !== 'undefined' ||\r\n            typeof error['opera#sourceloc'] !== 'undefined') {\r\n            return this.parseOpera(error);\r\n        }\r\n        else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\r\n            return this.parseV8OrIE(error);\r\n        }\r\n        else if (error.stack) {\r\n            return this.parseFFOrSafari(error);\r\n        }\r\n        else {\r\n            console.warn('[console-record-plugin]: Failed to parse error object:', error);\r\n            return [];\r\n        }\r\n    },\r\n    extractLocation: function (urlLike) {\r\n        if (urlLike.indexOf(':') === -1) {\r\n            return [urlLike];\r\n        }\r\n        const regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\r\n        const parts = regExp.exec(urlLike.replace(/[()]/g, ''));\r\n        if (!parts)\r\n            throw new Error(`Cannot parse given url: ${urlLike}`);\r\n        return [parts[1], parts[2] || undefined, parts[3] || undefined];\r\n    },\r\n    parseV8OrIE: function (error) {\r\n        const filtered = error.stack.split('\\n').filter(function (line) {\r\n            return !!line.match(CHROME_IE_STACK_REGEXP);\r\n        }, this);\r\n        return filtered.map(function (line) {\r\n            if (line.indexOf('(eval ') > -1) {\r\n                line = line\r\n                    .replace(/eval code/g, 'eval')\r\n                    .replace(/(\\(eval at [^()]*)|(\\),.*$)/g, '');\r\n            }\r\n            let sanitizedLine = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(');\r\n            const location = sanitizedLine.match(/ (\\((.+):(\\d+):(\\d+)\\)$)/);\r\n            sanitizedLine = location\r\n                ? sanitizedLine.replace(location[0], '')\r\n                : sanitizedLine;\r\n            const tokens = sanitizedLine.split(/\\s+/).slice(1);\r\n            const locationParts = this.extractLocation(location ? location[1] : tokens.pop());\r\n            const functionName = tokens.join(' ') || undefined;\r\n            const fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1\r\n                ? undefined\r\n                : locationParts[0];\r\n            return new StackFrame({\r\n                functionName,\r\n                fileName,\r\n                lineNumber: locationParts[1],\r\n                columnNumber: locationParts[2],\r\n            });\r\n        }, this);\r\n    },\r\n    parseFFOrSafari: function (error) {\r\n        const filtered = error.stack.split('\\n').filter(function (line) {\r\n            return !line.match(SAFARI_NATIVE_CODE_REGEXP);\r\n        }, this);\r\n        return filtered.map(function (line) {\r\n            if (line.indexOf(' > eval') > -1) {\r\n                line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g, ':$1');\r\n            }\r\n            if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\r\n                return new StackFrame({\r\n                    functionName: line,\r\n                });\r\n            }\r\n            else {\r\n                const functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\r\n                const matches = line.match(functionNameRegex);\r\n                const functionName = matches && matches[1] ? matches[1] : undefined;\r\n                const locationParts = this.extractLocation(line.replace(functionNameRegex, ''));\r\n                return new StackFrame({\r\n                    functionName,\r\n                    fileName: locationParts[0],\r\n                    lineNumber: locationParts[1],\r\n                    columnNumber: locationParts[2],\r\n                });\r\n            }\r\n        }, this);\r\n    },\r\n    parseOpera: function (e) {\r\n        if (!e.stacktrace ||\r\n            (e.message.indexOf('\\n') > -1 &&\r\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\r\n            return this.parseOpera9(e);\r\n        }\r\n        else if (!e.stack) {\r\n            return this.parseOpera10(e);\r\n        }\r\n        else {\r\n            return this.parseOpera11(e);\r\n        }\r\n    },\r\n    parseOpera9: function (e) {\r\n        const lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\r\n        const lines = e.message.split('\\n');\r\n        const result = [];\r\n        for (let i = 2, len = lines.length; i < len; i += 2) {\r\n            const match = lineRE.exec(lines[i]);\r\n            if (match) {\r\n                result.push(new StackFrame({\r\n                    fileName: match[2],\r\n                    lineNumber: parseFloat(match[1]),\r\n                }));\r\n            }\r\n        }\r\n        return result;\r\n    },\r\n    parseOpera10: function (e) {\r\n        const lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\r\n        const lines = e.stacktrace.split('\\n');\r\n        const result = [];\r\n        for (let i = 0, len = lines.length; i < len; i += 2) {\r\n            const match = lineRE.exec(lines[i]);\r\n            if (match) {\r\n                result.push(new StackFrame({\r\n                    functionName: match[3] || undefined,\r\n                    fileName: match[2],\r\n                    lineNumber: parseFloat(match[1]),\r\n                }));\r\n            }\r\n        }\r\n        return result;\r\n    },\r\n    parseOpera11: function (error) {\r\n        const filtered = error.stack.split('\\n').filter(function (line) {\r\n            return (!!line.match(FIREFOX_SAFARI_STACK_REGEXP) &&\r\n                !line.match(/^Error created at/));\r\n        }, this);\r\n        return filtered.map(function (line) {\r\n            const tokens = line.split('@');\r\n            const locationParts = this.extractLocation(tokens.pop());\r\n            const functionCall = tokens.shift() || '';\r\n            const functionName = functionCall\r\n                .replace(/<anonymous function(: (\\w+))?>/, '$2')\r\n                .replace(/\\([^)]*\\)/g, '') || undefined;\r\n            return new StackFrame({\r\n                functionName,\r\n                fileName: locationParts[0],\r\n                lineNumber: locationParts[1],\r\n                columnNumber: locationParts[2],\r\n            });\r\n        }, this);\r\n    },\r\n};\n\nexport { ErrorStackParser, StackFrame };\n","function pathToSelector(node) {\r\n    if (!node || !node.outerHTML) {\r\n        return '';\r\n    }\r\n    let path = '';\r\n    while (node.parentElement) {\r\n        let name = node.localName;\r\n        if (!name) {\r\n            break;\r\n        }\r\n        name = name.toLowerCase();\r\n        const parent = node.parentElement;\r\n        const domSiblings = [];\r\n        if (parent.children && parent.children.length > 0) {\r\n            for (let i = 0; i < parent.children.length; i++) {\r\n                const sibling = parent.children[i];\r\n                if (sibling.localName && sibling.localName.toLowerCase) {\r\n                    if (sibling.localName.toLowerCase() === name) {\r\n                        domSiblings.push(sibling);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (domSiblings.length > 1) {\r\n            name += `:eq(${domSiblings.indexOf(node)})`;\r\n        }\r\n        path = name + (path ? '>' + path : '');\r\n        node = parent;\r\n    }\r\n    return path;\r\n}\r\nfunction isObject(obj) {\r\n    return Object.prototype.toString.call(obj) === '[object Object]';\r\n}\r\nfunction isObjTooDeep(obj, limit) {\r\n    if (limit === 0) {\r\n        return true;\r\n    }\r\n    const keys = Object.keys(obj);\r\n    for (const key of keys) {\r\n        if (isObject(obj[key]) &&\r\n            isObjTooDeep(obj[key], limit - 1)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction stringify(obj, stringifyOptions) {\r\n    const options = {\r\n        numOfKeysLimit: 50,\r\n        depthOfLimit: 4,\r\n    };\r\n    Object.assign(options, stringifyOptions);\r\n    const stack = [];\r\n    const keys = [];\r\n    return JSON.stringify(obj, function (key, value) {\r\n        if (stack.length > 0) {\r\n            const thisPos = stack.indexOf(this);\r\n            ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\r\n            ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\r\n            if (~stack.indexOf(value)) {\r\n                if (stack[0] === value) {\r\n                    value = '[Circular ~]';\r\n                }\r\n                else {\r\n                    value =\r\n                        '[Circular ~.' +\r\n                            keys.slice(0, stack.indexOf(value)).join('.') +\r\n                            ']';\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            stack.push(value);\r\n        }\r\n        if (value === null)\r\n            return value;\r\n        if (value === undefined)\r\n            return 'undefined';\r\n        if (shouldIgnore(value)) {\r\n            return toString(value);\r\n        }\r\n        if (value instanceof Event) {\r\n            const eventResult = {};\r\n            for (const eventKey in value) {\r\n                const eventValue = value[eventKey];\r\n                if (Array.isArray(eventValue)) {\r\n                    eventResult[eventKey] = pathToSelector((eventValue.length ? eventValue[0] : null));\r\n                }\r\n                else {\r\n                    eventResult[eventKey] = eventValue;\r\n                }\r\n            }\r\n            return eventResult;\r\n        }\r\n        else if (value instanceof Node) {\r\n            if (value instanceof HTMLElement) {\r\n                return value ? value.outerHTML : '';\r\n            }\r\n            return value.nodeName;\r\n        }\r\n        else if (value instanceof Error) {\r\n            return value.stack\r\n                ? value.stack + '\\nEnd of stack for Error object'\r\n                : value.name + ': ' + value.message;\r\n        }\r\n        return value;\r\n    });\r\n    function shouldIgnore(_obj) {\r\n        if (isObject(_obj) && Object.keys(_obj).length > options.numOfKeysLimit) {\r\n            return true;\r\n        }\r\n        if (typeof _obj === 'function') {\r\n            return true;\r\n        }\r\n        if (isObject(_obj) &&\r\n            isObjTooDeep(_obj, options.depthOfLimit)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    function toString(_obj) {\r\n        let str = _obj.toString();\r\n        if (options.stringLengthLimit && str.length > options.stringLengthLimit) {\r\n            str = `${str.slice(0, options.stringLengthLimit)}...`;\r\n        }\r\n        return str;\r\n    }\r\n}\n\nexport { stringify };\n","import { patch } from '../../../utils.js';\nimport { ErrorStackParser } from './error-stack-parser.js';\nimport { stringify } from './stringify.js';\n\nconst defaultLogOptions = {\r\n    level: [\r\n        'assert',\r\n        'clear',\r\n        'count',\r\n        'countReset',\r\n        'debug',\r\n        'dir',\r\n        'dirxml',\r\n        'error',\r\n        'group',\r\n        'groupCollapsed',\r\n        'groupEnd',\r\n        'info',\r\n        'log',\r\n        'table',\r\n        'time',\r\n        'timeEnd',\r\n        'timeLog',\r\n        'trace',\r\n        'warn',\r\n    ],\r\n    lengthThreshold: 1000,\r\n    logger: 'console',\r\n};\r\nfunction initLogObserver(cb, win, options) {\r\n    const logOptions = (options ? Object.assign({}, defaultLogOptions, options) : defaultLogOptions);\r\n    const loggerType = logOptions.logger;\r\n    if (!loggerType) {\r\n        return () => {\r\n        };\r\n    }\r\n    let logger;\r\n    if (typeof loggerType === 'string') {\r\n        logger = win[loggerType];\r\n    }\r\n    else {\r\n        logger = loggerType;\r\n    }\r\n    let logCount = 0;\r\n    let inStack = false;\r\n    const cancelHandlers = [];\r\n    if (logOptions.level.includes('error')) {\r\n        const errorHandler = (event) => {\r\n            const message = event.message, error = event.error;\r\n            const trace = ErrorStackParser.parse(error).map((stackFrame) => stackFrame.toString());\r\n            const payload = [stringify(message, logOptions.stringifyOptions)];\r\n            cb({\r\n                level: 'error',\r\n                trace,\r\n                payload,\r\n            });\r\n        };\r\n        win.addEventListener('error', errorHandler);\r\n        cancelHandlers.push(() => {\r\n            win.removeEventListener('error', errorHandler);\r\n        });\r\n        const unhandledrejectionHandler = (event) => {\r\n            let error;\r\n            let payload;\r\n            if (event.reason instanceof Error) {\r\n                error = event.reason;\r\n                payload = [\r\n                    stringify(`Uncaught (in promise) ${error.name}: ${error.message}`, logOptions.stringifyOptions),\r\n                ];\r\n            }\r\n            else {\r\n                error = new Error();\r\n                payload = [\r\n                    stringify('Uncaught (in promise)', logOptions.stringifyOptions),\r\n                    stringify(event.reason, logOptions.stringifyOptions),\r\n                ];\r\n            }\r\n            const trace = ErrorStackParser.parse(error).map((stackFrame) => stackFrame.toString());\r\n            cb({\r\n                level: 'error',\r\n                trace,\r\n                payload,\r\n            });\r\n        };\r\n        win.addEventListener('unhandledrejection', unhandledrejectionHandler);\r\n        cancelHandlers.push(() => {\r\n            win.removeEventListener('unhandledrejection', unhandledrejectionHandler);\r\n        });\r\n    }\r\n    for (const levelType of logOptions.level) {\r\n        cancelHandlers.push(replace(logger, levelType));\r\n    }\r\n    return () => {\r\n        cancelHandlers.forEach((h) => h());\r\n    };\r\n    function replace(_logger, level) {\r\n        if (!_logger[level]) {\r\n            return () => {\r\n            };\r\n        }\r\n        return patch(_logger, level, (original) => {\r\n            return (...args) => {\r\n                original.apply(this, args);\r\n                if (inStack) {\r\n                    return;\r\n                }\r\n                inStack = true;\r\n                try {\r\n                    const trace = ErrorStackParser.parse(new Error())\r\n                        .map((stackFrame) => stackFrame.toString())\r\n                        .splice(1);\r\n                    const payload = args.map((s) => stringify(s, logOptions.stringifyOptions));\r\n                    logCount++;\r\n                    if (logCount < logOptions.lengthThreshold) {\r\n                        cb({\r\n                            level,\r\n                            trace,\r\n                            payload,\r\n                        });\r\n                    }\r\n                    else if (logCount === logOptions.lengthThreshold) {\r\n                        cb({\r\n                            level: 'warn',\r\n                            trace: [],\r\n                            payload: [\r\n                                stringify('The number of log records reached the threshold.'),\r\n                            ],\r\n                        });\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    original('rrweb logger error:', error, ...args);\r\n                }\r\n                finally {\r\n                    inStack = false;\r\n                }\r\n            };\r\n        });\r\n    }\r\n}\r\nconst PLUGIN_NAME = 'rrweb/console@1';\r\nconst getRecordConsolePlugin = (options) => ({\r\n    name: PLUGIN_NAME,\r\n    observer: initLogObserver,\r\n    options: options,\r\n});\n\nexport { PLUGIN_NAME, getRecordConsolePlugin };\n","import { PLUGIN_NAME } from '../record/index.js';\nimport { EventType, IncrementalSource } from '../../../../../types/dist/types.js';\n\nconst ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\r\nconst defaultLogConfig = {\r\n    level: [\r\n        'assert',\r\n        'clear',\r\n        'count',\r\n        'countReset',\r\n        'debug',\r\n        'dir',\r\n        'dirxml',\r\n        'error',\r\n        'group',\r\n        'groupCollapsed',\r\n        'groupEnd',\r\n        'info',\r\n        'log',\r\n        'table',\r\n        'time',\r\n        'timeEnd',\r\n        'timeLog',\r\n        'trace',\r\n        'warn',\r\n    ],\r\n    replayLogger: undefined,\r\n};\r\nclass LogReplayPlugin {\r\n    constructor(config) {\r\n        this.config = Object.assign(defaultLogConfig, config);\r\n    }\r\n    getConsoleLogger() {\r\n        const replayLogger = {};\r\n        for (const level of this.config.level) {\r\n            if (level === 'trace') {\r\n                replayLogger[level] = (data) => {\r\n                    const logger = console.log[ORIGINAL_ATTRIBUTE_NAME]\r\n                        ? console.log[ORIGINAL_ATTRIBUTE_NAME]\r\n                        : console.log;\r\n                    logger(...data.payload.map((s) => JSON.parse(s)), this.formatMessage(data));\r\n                };\r\n            }\r\n            else {\r\n                replayLogger[level] = (data) => {\r\n                    const logger = console[level][ORIGINAL_ATTRIBUTE_NAME]\r\n                        ? console[level][ORIGINAL_ATTRIBUTE_NAME]\r\n                        : console[level];\r\n                    logger(...data.payload.map((s) => JSON.parse(s)), this.formatMessage(data));\r\n                };\r\n            }\r\n        }\r\n        return replayLogger;\r\n    }\r\n    formatMessage(data) {\r\n        if (data.trace.length === 0) {\r\n            return '';\r\n        }\r\n        const stackPrefix = '\\n\\tat ';\r\n        let result = stackPrefix;\r\n        result += data.trace.join(stackPrefix);\r\n        return result;\r\n    }\r\n}\r\nconst getReplayConsolePlugin = (options) => {\r\n    const replayLogger = (options === null || options === void 0 ? void 0 : options.replayLogger) || new LogReplayPlugin(options).getConsoleLogger();\r\n    return {\r\n        handler(event, _isSync, context) {\r\n            let logData = null;\r\n            if (event.type === EventType.IncrementalSnapshot &&\r\n                event.data.source === IncrementalSource.Log) {\r\n                logData = event.data;\r\n            }\r\n            else if (event.type === EventType.Plugin &&\r\n                event.data.plugin === PLUGIN_NAME) {\r\n                logData = event.data.payload;\r\n            }\r\n            if (logData) {\r\n                try {\r\n                    if (typeof replayLogger[logData.level] === 'function') {\r\n                        replayLogger[logData.level](logData);\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (context.replayer.config.showWarning) {\r\n                        console.warn(error);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n    };\r\n};\n\nexport { getReplayConsolePlugin };\n","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","var NodeType$1;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\r\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\r\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\r\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\r\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\r\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\r\n})(NodeType$1 || (NodeType$1 = {}));\nvar Mirror$1 = (function () {\r\n    function Mirror() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    Mirror.prototype.getId = function (n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        var id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    };\r\n    Mirror.prototype.getNode = function (id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    };\r\n    Mirror.prototype.getIds = function () {\r\n        return Array.from(this.idNodeMap.keys());\r\n    };\r\n    Mirror.prototype.getMeta = function (n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    };\r\n    Mirror.prototype.removeNodeFromMap = function (n) {\r\n        var _this = this;\r\n        var id = this.getId(n);\r\n        this.idNodeMap[\"delete\"](id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach(function (childNode) {\r\n                return _this.removeNodeFromMap(childNode);\r\n            });\r\n        }\r\n    };\r\n    Mirror.prototype.has = function (id) {\r\n        return this.idNodeMap.has(id);\r\n    };\r\n    Mirror.prototype.hasNode = function (node) {\r\n        return this.nodeMetaMap.has(node);\r\n    };\r\n    Mirror.prototype.add = function (n, meta) {\r\n        var id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    };\r\n    Mirror.prototype.replace = function (id, n) {\r\n        var oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            var meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    };\r\n    Mirror.prototype.reset = function () {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    };\r\n    return Mirror;\r\n}());\r\nfunction createMirror$1() {\r\n    return new Mirror$1();\r\n}\n\nfunction parseCSSText(cssText) {\r\n    const res = {};\r\n    const listDelimiter = /;(?![^(]*\\))/g;\r\n    const propertyDelimiter = /:(.+)/;\r\n    const comment = /\\/\\*.*?\\*\\//g;\r\n    cssText\r\n        .replace(comment, '')\r\n        .split(listDelimiter)\r\n        .forEach(function (item) {\r\n        if (item) {\r\n            const tmp = item.split(propertyDelimiter);\r\n            tmp.length > 1 && (res[camelize(tmp[0].trim())] = tmp[1].trim());\r\n        }\r\n    });\r\n    return res;\r\n}\r\nfunction toCSSText(style) {\r\n    const properties = [];\r\n    for (const name in style) {\r\n        const value = style[name];\r\n        if (typeof value !== 'string')\r\n            continue;\r\n        const normalizedName = hyphenate(name);\r\n        properties.push(`${normalizedName}: ${value};`);\r\n    }\r\n    return properties.join(' ');\r\n}\r\nconst camelizeRE = /-([a-z])/g;\r\nconst CUSTOM_PROPERTY_REGEX = /^--[a-zA-Z0-9-]+$/;\r\nconst camelize = (str) => {\r\n    if (CUSTOM_PROPERTY_REGEX.test(str))\r\n        return str;\r\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\r\n};\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\nconst hyphenate = (str) => {\r\n    return str.replace(hyphenateRE, '-$1').toLowerCase();\r\n};\n\nclass BaseRRNode {\r\n    constructor(..._args) {\r\n        this.parentElement = null;\r\n        this.parentNode = null;\r\n        this.firstChild = null;\r\n        this.lastChild = null;\r\n        this.previousSibling = null;\r\n        this.nextSibling = null;\r\n        this.ELEMENT_NODE = NodeType.ELEMENT_NODE;\r\n        this.TEXT_NODE = NodeType.TEXT_NODE;\r\n    }\r\n    get childNodes() {\r\n        const childNodes = [];\r\n        let childIterator = this.firstChild;\r\n        while (childIterator) {\r\n            childNodes.push(childIterator);\r\n            childIterator = childIterator.nextSibling;\r\n        }\r\n        return childNodes;\r\n    }\r\n    contains(node) {\r\n        if (!(node instanceof BaseRRNode))\r\n            return false;\r\n        else if (node.ownerDocument !== this.ownerDocument)\r\n            return false;\r\n        else if (node === this)\r\n            return true;\r\n        while (node.parentNode) {\r\n            if (node.parentNode === this)\r\n                return true;\r\n            node = node.parentNode;\r\n        }\r\n        return false;\r\n    }\r\n    appendChild(_newChild) {\r\n        throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.`);\r\n    }\r\n    insertBefore(_newChild, _refChild) {\r\n        throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.`);\r\n    }\r\n    removeChild(_node) {\r\n        throw new Error(`RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.`);\r\n    }\r\n    toString() {\r\n        return 'RRNode';\r\n    }\r\n}\r\nfunction BaseRRDocumentImpl(RRNodeClass) {\r\n    return class BaseRRDocument extends RRNodeClass {\r\n        constructor(...args) {\r\n            super(args);\r\n            this.nodeType = NodeType.DOCUMENT_NODE;\r\n            this.nodeName = '#document';\r\n            this.compatMode = 'CSS1Compat';\r\n            this.RRNodeType = NodeType$1.Document;\r\n            this.textContent = null;\r\n            this.ownerDocument = this;\r\n        }\r\n        get documentElement() {\r\n            return (this.childNodes.find((node) => node.RRNodeType === NodeType$1.Element &&\r\n                node.tagName === 'HTML') || null);\r\n        }\r\n        get body() {\r\n            var _a;\r\n            return (((_a = this.documentElement) === null || _a === void 0 ? void 0 : _a.childNodes.find((node) => node.RRNodeType === NodeType$1.Element &&\r\n                node.tagName === 'BODY')) || null);\r\n        }\r\n        get head() {\r\n            var _a;\r\n            return (((_a = this.documentElement) === null || _a === void 0 ? void 0 : _a.childNodes.find((node) => node.RRNodeType === NodeType$1.Element &&\r\n                node.tagName === 'HEAD')) || null);\r\n        }\r\n        get implementation() {\r\n            return this;\r\n        }\r\n        get firstElementChild() {\r\n            return this.documentElement;\r\n        }\r\n        appendChild(newChild) {\r\n            const nodeType = newChild.RRNodeType;\r\n            if (nodeType === NodeType$1.Element ||\r\n                nodeType === NodeType$1.DocumentType) {\r\n                if (this.childNodes.some((s) => s.RRNodeType === nodeType)) {\r\n                    throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${nodeType === NodeType$1.Element ? 'RRElement' : 'RRDoctype'} on RRDocument allowed.`);\r\n                }\r\n            }\r\n            const child = appendChild(this, newChild);\r\n            child.parentElement = null;\r\n            return child;\r\n        }\r\n        insertBefore(newChild, refChild) {\r\n            const nodeType = newChild.RRNodeType;\r\n            if (nodeType === NodeType$1.Element ||\r\n                nodeType === NodeType$1.DocumentType) {\r\n                if (this.childNodes.some((s) => s.RRNodeType === nodeType)) {\r\n                    throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${nodeType === NodeType$1.Element ? 'RRElement' : 'RRDoctype'} on RRDocument allowed.`);\r\n                }\r\n            }\r\n            const child = insertBefore(this, newChild, refChild);\r\n            child.parentElement = null;\r\n            return child;\r\n        }\r\n        removeChild(node) {\r\n            return removeChild(this, node);\r\n        }\r\n        open() {\r\n            this.firstChild = null;\r\n            this.lastChild = null;\r\n        }\r\n        close() {\r\n        }\r\n        write(content) {\r\n            let publicId;\r\n            if (content ===\r\n                '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">')\r\n                publicId = '-//W3C//DTD XHTML 1.0 Transitional//EN';\r\n            else if (content ===\r\n                '<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">')\r\n                publicId = '-//W3C//DTD HTML 4.0 Transitional//EN';\r\n            if (publicId) {\r\n                const doctype = this.createDocumentType('html', publicId, '');\r\n                this.open();\r\n                this.appendChild(doctype);\r\n            }\r\n        }\r\n        createDocument(_namespace, _qualifiedName, _doctype) {\r\n            return new BaseRRDocument();\r\n        }\r\n        createDocumentType(qualifiedName, publicId, systemId) {\r\n            const doctype = new (BaseRRDocumentTypeImpl(BaseRRNode))(qualifiedName, publicId, systemId);\r\n            doctype.ownerDocument = this;\r\n            return doctype;\r\n        }\r\n        createElement(tagName) {\r\n            const element = new (BaseRRElementImpl(BaseRRNode))(tagName);\r\n            element.ownerDocument = this;\r\n            return element;\r\n        }\r\n        createElementNS(_namespaceURI, qualifiedName) {\r\n            return this.createElement(qualifiedName);\r\n        }\r\n        createTextNode(data) {\r\n            const text = new (BaseRRTextImpl(BaseRRNode))(data);\r\n            text.ownerDocument = this;\r\n            return text;\r\n        }\r\n        createComment(data) {\r\n            const comment = new (BaseRRCommentImpl(BaseRRNode))(data);\r\n            comment.ownerDocument = this;\r\n            return comment;\r\n        }\r\n        createCDATASection(data) {\r\n            const CDATASection = new (BaseRRCDATASectionImpl(BaseRRNode))(data);\r\n            CDATASection.ownerDocument = this;\r\n            return CDATASection;\r\n        }\r\n        toString() {\r\n            return 'RRDocument';\r\n        }\r\n    };\r\n}\r\nfunction BaseRRDocumentTypeImpl(RRNodeClass) {\r\n    return class BaseRRDocumentType extends RRNodeClass {\r\n        constructor(qualifiedName, publicId, systemId) {\r\n            super();\r\n            this.nodeType = NodeType.DOCUMENT_TYPE_NODE;\r\n            this.RRNodeType = NodeType$1.DocumentType;\r\n            this.name = qualifiedName;\r\n            this.publicId = publicId;\r\n            this.systemId = systemId;\r\n            this.nodeName = qualifiedName;\r\n            this.textContent = null;\r\n        }\r\n        toString() {\r\n            return 'RRDocumentType';\r\n        }\r\n    };\r\n}\r\nfunction BaseRRElementImpl(RRNodeClass) {\r\n    return class BaseRRElement extends RRNodeClass {\r\n        constructor(tagName) {\r\n            super();\r\n            this.nodeType = NodeType.ELEMENT_NODE;\r\n            this.RRNodeType = NodeType$1.Element;\r\n            this.attributes = {};\r\n            this.shadowRoot = null;\r\n            this.tagName = tagName.toUpperCase();\r\n            this.nodeName = tagName.toUpperCase();\r\n        }\r\n        get textContent() {\r\n            let result = '';\r\n            this.childNodes.forEach((node) => (result += node.textContent));\r\n            return result;\r\n        }\r\n        set textContent(textContent) {\r\n            this.firstChild = null;\r\n            this.lastChild = null;\r\n            this.appendChild(this.ownerDocument.createTextNode(textContent));\r\n        }\r\n        get classList() {\r\n            return new ClassList(this.attributes.class, (newClassName) => {\r\n                this.attributes.class = newClassName;\r\n            });\r\n        }\r\n        get id() {\r\n            return this.attributes.id || '';\r\n        }\r\n        get className() {\r\n            return this.attributes.class || '';\r\n        }\r\n        get style() {\r\n            const style = (this.attributes.style ? parseCSSText(this.attributes.style) : {});\r\n            const hyphenateRE = /\\B([A-Z])/g;\r\n            style.setProperty = (name, value, priority) => {\r\n                if (hyphenateRE.test(name))\r\n                    return;\r\n                const normalizedName = camelize(name);\r\n                if (!value)\r\n                    delete style[normalizedName];\r\n                else\r\n                    style[normalizedName] = value;\r\n                if (priority === 'important')\r\n                    style[normalizedName] += ' !important';\r\n                this.attributes.style = toCSSText(style);\r\n            };\r\n            style.removeProperty = (name) => {\r\n                if (hyphenateRE.test(name))\r\n                    return '';\r\n                const normalizedName = camelize(name);\r\n                const value = style[normalizedName] || '';\r\n                delete style[normalizedName];\r\n                this.attributes.style = toCSSText(style);\r\n                return value;\r\n            };\r\n            return style;\r\n        }\r\n        getAttribute(name) {\r\n            return this.attributes[name] || null;\r\n        }\r\n        setAttribute(name, attribute) {\r\n            this.attributes[name] = attribute;\r\n        }\r\n        setAttributeNS(_namespace, qualifiedName, value) {\r\n            this.setAttribute(qualifiedName, value);\r\n        }\r\n        removeAttribute(name) {\r\n            delete this.attributes[name];\r\n        }\r\n        appendChild(newChild) {\r\n            return appendChild(this, newChild);\r\n        }\r\n        insertBefore(newChild, refChild) {\r\n            return insertBefore(this, newChild, refChild);\r\n        }\r\n        removeChild(node) {\r\n            return removeChild(this, node);\r\n        }\r\n        attachShadow(_init) {\r\n            const shadowRoot = this.ownerDocument.createElement('SHADOWROOT');\r\n            this.shadowRoot = shadowRoot;\r\n            return shadowRoot;\r\n        }\r\n        dispatchEvent(_event) {\r\n            return true;\r\n        }\r\n        toString() {\r\n            let attributeString = '';\r\n            for (const attribute in this.attributes) {\r\n                attributeString += `${attribute}=\"${this.attributes[attribute]}\" `;\r\n            }\r\n            return `${this.tagName} ${attributeString}`;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRMediaElementImpl(RRElementClass) {\r\n    return class BaseRRMediaElement extends RRElementClass {\r\n        attachShadow(_init) {\r\n            throw new Error(`RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow`);\r\n        }\r\n        play() {\r\n            this.paused = false;\r\n        }\r\n        pause() {\r\n            this.paused = true;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRTextImpl(RRNodeClass) {\r\n    return class BaseRRText extends RRNodeClass {\r\n        constructor(data) {\r\n            super();\r\n            this.nodeType = NodeType.TEXT_NODE;\r\n            this.nodeName = '#text';\r\n            this.RRNodeType = NodeType$1.Text;\r\n            this.data = data;\r\n        }\r\n        get textContent() {\r\n            return this.data;\r\n        }\r\n        set textContent(textContent) {\r\n            this.data = textContent;\r\n        }\r\n        toString() {\r\n            return `RRText text=${JSON.stringify(this.data)}`;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRCommentImpl(RRNodeClass) {\r\n    return class BaseRRComment extends RRNodeClass {\r\n        constructor(data) {\r\n            super();\r\n            this.nodeType = NodeType.COMMENT_NODE;\r\n            this.nodeName = '#comment';\r\n            this.RRNodeType = NodeType$1.Comment;\r\n            this.data = data;\r\n        }\r\n        get textContent() {\r\n            return this.data;\r\n        }\r\n        set textContent(textContent) {\r\n            this.data = textContent;\r\n        }\r\n        toString() {\r\n            return `RRComment text=${JSON.stringify(this.data)}`;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRCDATASectionImpl(RRNodeClass) {\r\n    return class BaseRRCDATASection extends RRNodeClass {\r\n        constructor(data) {\r\n            super();\r\n            this.nodeName = '#cdata-section';\r\n            this.nodeType = NodeType.CDATA_SECTION_NODE;\r\n            this.RRNodeType = NodeType$1.CDATA;\r\n            this.data = data;\r\n        }\r\n        get textContent() {\r\n            return this.data;\r\n        }\r\n        set textContent(textContent) {\r\n            this.data = textContent;\r\n        }\r\n        toString() {\r\n            return `RRCDATASection data=${JSON.stringify(this.data)}`;\r\n        }\r\n    };\r\n}\r\nclass ClassList {\r\n    constructor(classText, onChange) {\r\n        this.classes = [];\r\n        this.add = (...classNames) => {\r\n            for (const item of classNames) {\r\n                const className = String(item);\r\n                if (this.classes.indexOf(className) >= 0)\r\n                    continue;\r\n                this.classes.push(className);\r\n            }\r\n            this.onChange && this.onChange(this.classes.join(' '));\r\n        };\r\n        this.remove = (...classNames) => {\r\n            this.classes = this.classes.filter((item) => classNames.indexOf(item) === -1);\r\n            this.onChange && this.onChange(this.classes.join(' '));\r\n        };\r\n        if (classText) {\r\n            const classes = classText.trim().split(/\\s+/);\r\n            this.classes.push(...classes);\r\n        }\r\n        this.onChange = onChange;\r\n    }\r\n}\r\nfunction appendChild(parent, newChild) {\r\n    if (newChild.parentNode)\r\n        newChild.parentNode.removeChild(newChild);\r\n    if (parent.lastChild) {\r\n        parent.lastChild.nextSibling = newChild;\r\n        newChild.previousSibling = parent.lastChild;\r\n    }\r\n    else {\r\n        parent.firstChild = newChild;\r\n        newChild.previousSibling = null;\r\n    }\r\n    parent.lastChild = newChild;\r\n    newChild.nextSibling = null;\r\n    newChild.parentNode = parent;\r\n    newChild.parentElement = parent;\r\n    newChild.ownerDocument = parent.ownerDocument;\r\n    return newChild;\r\n}\r\nfunction insertBefore(parent, newChild, refChild) {\r\n    if (!refChild)\r\n        return appendChild(parent, newChild);\r\n    if (refChild.parentNode !== parent)\r\n        throw new Error(\"Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.\");\r\n    if (newChild === refChild)\r\n        return newChild;\r\n    if (newChild.parentNode)\r\n        newChild.parentNode.removeChild(newChild);\r\n    newChild.previousSibling = refChild.previousSibling;\r\n    refChild.previousSibling = newChild;\r\n    newChild.nextSibling = refChild;\r\n    if (newChild.previousSibling)\r\n        newChild.previousSibling.nextSibling = newChild;\r\n    else\r\n        parent.firstChild = newChild;\r\n    newChild.parentElement = parent;\r\n    newChild.parentNode = parent;\r\n    newChild.ownerDocument = parent.ownerDocument;\r\n    return newChild;\r\n}\r\nfunction removeChild(parent, child) {\r\n    if (child.parentNode !== parent)\r\n        throw new Error(\"Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.\");\r\n    if (child.previousSibling)\r\n        child.previousSibling.nextSibling = child.nextSibling;\r\n    else\r\n        parent.firstChild = child.nextSibling;\r\n    if (child.nextSibling)\r\n        child.nextSibling.previousSibling = child.previousSibling;\r\n    else\r\n        parent.lastChild = child.previousSibling;\r\n    child.previousSibling = null;\r\n    child.nextSibling = null;\r\n    child.parentElement = null;\r\n    child.parentNode = null;\r\n    return child;\r\n}\r\nvar NodeType;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"PLACEHOLDER\"] = 0] = \"PLACEHOLDER\";\r\n    NodeType[NodeType[\"ELEMENT_NODE\"] = 1] = \"ELEMENT_NODE\";\r\n    NodeType[NodeType[\"ATTRIBUTE_NODE\"] = 2] = \"ATTRIBUTE_NODE\";\r\n    NodeType[NodeType[\"TEXT_NODE\"] = 3] = \"TEXT_NODE\";\r\n    NodeType[NodeType[\"CDATA_SECTION_NODE\"] = 4] = \"CDATA_SECTION_NODE\";\r\n    NodeType[NodeType[\"ENTITY_REFERENCE_NODE\"] = 5] = \"ENTITY_REFERENCE_NODE\";\r\n    NodeType[NodeType[\"ENTITY_NODE\"] = 6] = \"ENTITY_NODE\";\r\n    NodeType[NodeType[\"PROCESSING_INSTRUCTION_NODE\"] = 7] = \"PROCESSING_INSTRUCTION_NODE\";\r\n    NodeType[NodeType[\"COMMENT_NODE\"] = 8] = \"COMMENT_NODE\";\r\n    NodeType[NodeType[\"DOCUMENT_NODE\"] = 9] = \"DOCUMENT_NODE\";\r\n    NodeType[NodeType[\"DOCUMENT_TYPE_NODE\"] = 10] = \"DOCUMENT_TYPE_NODE\";\r\n    NodeType[NodeType[\"DOCUMENT_FRAGMENT_NODE\"] = 11] = \"DOCUMENT_FRAGMENT_NODE\";\r\n})(NodeType || (NodeType = {}));\n\nconst NAMESPACES = {\r\n    svg: 'http://www.w3.org/2000/svg',\r\n    'xlink:href': 'http://www.w3.org/1999/xlink',\r\n    xmlns: 'http://www.w3.org/2000/xmlns/',\r\n};\r\nconst SVGTagMap = {\r\n    altglyph: 'altGlyph',\r\n    altglyphdef: 'altGlyphDef',\r\n    altglyphitem: 'altGlyphItem',\r\n    animatecolor: 'animateColor',\r\n    animatemotion: 'animateMotion',\r\n    animatetransform: 'animateTransform',\r\n    clippath: 'clipPath',\r\n    feblend: 'feBlend',\r\n    fecolormatrix: 'feColorMatrix',\r\n    fecomponenttransfer: 'feComponentTransfer',\r\n    fecomposite: 'feComposite',\r\n    feconvolvematrix: 'feConvolveMatrix',\r\n    fediffuselighting: 'feDiffuseLighting',\r\n    fedisplacementmap: 'feDisplacementMap',\r\n    fedistantlight: 'feDistantLight',\r\n    fedropshadow: 'feDropShadow',\r\n    feflood: 'feFlood',\r\n    fefunca: 'feFuncA',\r\n    fefuncb: 'feFuncB',\r\n    fefuncg: 'feFuncG',\r\n    fefuncr: 'feFuncR',\r\n    fegaussianblur: 'feGaussianBlur',\r\n    feimage: 'feImage',\r\n    femerge: 'feMerge',\r\n    femergenode: 'feMergeNode',\r\n    femorphology: 'feMorphology',\r\n    feoffset: 'feOffset',\r\n    fepointlight: 'fePointLight',\r\n    fespecularlighting: 'feSpecularLighting',\r\n    fespotlight: 'feSpotLight',\r\n    fetile: 'feTile',\r\n    feturbulence: 'feTurbulence',\r\n    foreignobject: 'foreignObject',\r\n    glyphref: 'glyphRef',\r\n    lineargradient: 'linearGradient',\r\n    radialgradient: 'radialGradient',\r\n};\r\nlet createdNodeSet = null;\r\nfunction diff(oldTree, newTree, replayer, rrnodeMirror = newTree.mirror ||\r\n    newTree.ownerDocument.mirror) {\r\n    oldTree = diffBeforeUpdatingChildren(oldTree, newTree, replayer, rrnodeMirror);\r\n    diffChildren(oldTree, newTree, replayer, rrnodeMirror);\r\n    diffAfterUpdatingChildren(oldTree, newTree, replayer, rrnodeMirror);\r\n}\r\nfunction diffBeforeUpdatingChildren(oldTree, newTree, replayer, rrnodeMirror) {\r\n    var _a;\r\n    if (replayer.afterAppend && !createdNodeSet) {\r\n        createdNodeSet = new WeakSet();\r\n        setTimeout(() => {\r\n            createdNodeSet = null;\r\n        }, 0);\r\n    }\r\n    if (!sameNodeType(oldTree, newTree)) {\r\n        const calibratedOldTree = createOrGetNode(newTree, replayer.mirror, rrnodeMirror);\r\n        (_a = oldTree.parentNode) === null || _a === void 0 ? void 0 : _a.replaceChild(calibratedOldTree, oldTree);\r\n        oldTree = calibratedOldTree;\r\n    }\r\n    switch (newTree.RRNodeType) {\r\n        case NodeType$1.Document: {\r\n            if (!nodeMatching(oldTree, newTree, replayer.mirror, rrnodeMirror)) {\r\n                const newMeta = rrnodeMirror.getMeta(newTree);\r\n                if (newMeta) {\r\n                    replayer.mirror.removeNodeFromMap(oldTree);\r\n                    oldTree.close();\r\n                    oldTree.open();\r\n                    replayer.mirror.add(oldTree, newMeta);\r\n                    createdNodeSet === null || createdNodeSet === void 0 ? void 0 : createdNodeSet.add(oldTree);\r\n                }\r\n            }\r\n            break;\r\n        }\r\n        case NodeType$1.Element: {\r\n            const oldElement = oldTree;\r\n            const newRRElement = newTree;\r\n            switch (newRRElement.tagName) {\r\n                case 'IFRAME': {\r\n                    const oldContentDocument = oldTree\r\n                        .contentDocument;\r\n                    if (!oldContentDocument)\r\n                        break;\r\n                    diff(oldContentDocument, newTree.contentDocument, replayer, rrnodeMirror);\r\n                    break;\r\n                }\r\n            }\r\n            if (newRRElement.shadowRoot) {\r\n                if (!oldElement.shadowRoot)\r\n                    oldElement.attachShadow({ mode: 'open' });\r\n                diffChildren(oldElement.shadowRoot, newRRElement.shadowRoot, replayer, rrnodeMirror);\r\n            }\r\n            break;\r\n        }\r\n    }\r\n    return oldTree;\r\n}\r\nfunction diffAfterUpdatingChildren(oldTree, newTree, replayer, rrnodeMirror) {\r\n    var _a;\r\n    switch (newTree.RRNodeType) {\r\n        case NodeType$1.Document: {\r\n            const scrollData = newTree.scrollData;\r\n            scrollData && replayer.applyScroll(scrollData, true);\r\n            break;\r\n        }\r\n        case NodeType$1.Element: {\r\n            const oldElement = oldTree;\r\n            const newRRElement = newTree;\r\n            diffProps(oldElement, newRRElement, rrnodeMirror);\r\n            newRRElement.scrollData &&\r\n                replayer.applyScroll(newRRElement.scrollData, true);\r\n            newRRElement.inputData && replayer.applyInput(newRRElement.inputData);\r\n            switch (newRRElement.tagName) {\r\n                case 'AUDIO':\r\n                case 'VIDEO': {\r\n                    const oldMediaElement = oldTree;\r\n                    const newMediaRRElement = newRRElement;\r\n                    if (newMediaRRElement.paused !== undefined)\r\n                        newMediaRRElement.paused\r\n                            ? void oldMediaElement.pause()\r\n                            : void oldMediaElement.play();\r\n                    if (newMediaRRElement.muted !== undefined)\r\n                        oldMediaElement.muted = newMediaRRElement.muted;\r\n                    if (newMediaRRElement.volume !== undefined)\r\n                        oldMediaElement.volume = newMediaRRElement.volume;\r\n                    if (newMediaRRElement.currentTime !== undefined)\r\n                        oldMediaElement.currentTime = newMediaRRElement.currentTime;\r\n                    if (newMediaRRElement.playbackRate !== undefined)\r\n                        oldMediaElement.playbackRate = newMediaRRElement.playbackRate;\r\n                    break;\r\n                }\r\n                case 'CANVAS': {\r\n                    const rrCanvasElement = newTree;\r\n                    if (rrCanvasElement.rr_dataURL !== null) {\r\n                        const image = document.createElement('img');\r\n                        image.onload = () => {\r\n                            const ctx = oldElement.getContext('2d');\r\n                            if (ctx) {\r\n                                ctx.drawImage(image, 0, 0, image.width, image.height);\r\n                            }\r\n                        };\r\n                        image.src = rrCanvasElement.rr_dataURL;\r\n                    }\r\n                    rrCanvasElement.canvasMutations.forEach((canvasMutation) => replayer.applyCanvas(canvasMutation.event, canvasMutation.mutation, oldTree));\r\n                    break;\r\n                }\r\n                case 'STYLE': {\r\n                    const styleSheet = oldElement.sheet;\r\n                    styleSheet &&\r\n                        newTree.rules.forEach((data) => replayer.applyStyleSheetMutation(data, styleSheet));\r\n                    break;\r\n                }\r\n            }\r\n            break;\r\n        }\r\n        case NodeType$1.Text:\r\n        case NodeType$1.Comment:\r\n        case NodeType$1.CDATA: {\r\n            if (oldTree.textContent !==\r\n                newTree.data)\r\n                oldTree.textContent = newTree.data;\r\n            break;\r\n        }\r\n    }\r\n    if (createdNodeSet === null || createdNodeSet === void 0 ? void 0 : createdNodeSet.has(oldTree)) {\r\n        createdNodeSet.delete(oldTree);\r\n        (_a = replayer.afterAppend) === null || _a === void 0 ? void 0 : _a.call(replayer, oldTree, replayer.mirror.getId(oldTree));\r\n    }\r\n}\r\nfunction diffProps(oldTree, newTree, rrnodeMirror) {\r\n    const oldAttributes = oldTree.attributes;\r\n    const newAttributes = newTree.attributes;\r\n    for (const name in newAttributes) {\r\n        const newValue = newAttributes[name];\r\n        const sn = rrnodeMirror.getMeta(newTree);\r\n        if ((sn === null || sn === void 0 ? void 0 : sn.isSVG) && NAMESPACES[name])\r\n            oldTree.setAttributeNS(NAMESPACES[name], name, newValue);\r\n        else if (newTree.tagName === 'CANVAS' && name === 'rr_dataURL') {\r\n            const image = document.createElement('img');\r\n            image.src = newValue;\r\n            image.onload = () => {\r\n                const ctx = oldTree.getContext('2d');\r\n                if (ctx) {\r\n                    ctx.drawImage(image, 0, 0, image.width, image.height);\r\n                }\r\n            };\r\n        }\r\n        else if (newTree.tagName === 'IFRAME' && name === 'srcdoc')\r\n            continue;\r\n        else\r\n            oldTree.setAttribute(name, newValue);\r\n    }\r\n    for (const { name } of Array.from(oldAttributes))\r\n        if (!(name in newAttributes))\r\n            oldTree.removeAttribute(name);\r\n    newTree.scrollLeft && (oldTree.scrollLeft = newTree.scrollLeft);\r\n    newTree.scrollTop && (oldTree.scrollTop = newTree.scrollTop);\r\n}\r\nfunction diffChildren(oldTree, newTree, replayer, rrnodeMirror) {\r\n    const oldChildren = Array.from(oldTree.childNodes);\r\n    const newChildren = newTree.childNodes;\r\n    if (oldChildren.length === 0 && newChildren.length === 0)\r\n        return;\r\n    let oldStartIndex = 0, oldEndIndex = oldChildren.length - 1, newStartIndex = 0, newEndIndex = newChildren.length - 1;\r\n    let oldStartNode = oldChildren[oldStartIndex], oldEndNode = oldChildren[oldEndIndex], newStartNode = newChildren[newStartIndex], newEndNode = newChildren[newEndIndex];\r\n    let oldIdToIndex = undefined, indexInOld = undefined;\r\n    while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n        if (oldStartNode === undefined) {\r\n            oldStartNode = oldChildren[++oldStartIndex];\r\n        }\r\n        else if (oldEndNode === undefined) {\r\n            oldEndNode = oldChildren[--oldEndIndex];\r\n        }\r\n        else if (nodeMatching(oldStartNode, newStartNode, replayer.mirror, rrnodeMirror)) {\r\n            oldStartNode = oldChildren[++oldStartIndex];\r\n            newStartNode = newChildren[++newStartIndex];\r\n        }\r\n        else if (nodeMatching(oldEndNode, newEndNode, replayer.mirror, rrnodeMirror)) {\r\n            oldEndNode = oldChildren[--oldEndIndex];\r\n            newEndNode = newChildren[--newEndIndex];\r\n        }\r\n        else if (nodeMatching(oldStartNode, newEndNode, replayer.mirror, rrnodeMirror)) {\r\n            try {\r\n                oldTree.insertBefore(oldStartNode, oldEndNode.nextSibling);\r\n            }\r\n            catch (e) {\r\n                console.warn(e);\r\n            }\r\n            oldStartNode = oldChildren[++oldStartIndex];\r\n            newEndNode = newChildren[--newEndIndex];\r\n        }\r\n        else if (nodeMatching(oldEndNode, newStartNode, replayer.mirror, rrnodeMirror)) {\r\n            try {\r\n                oldTree.insertBefore(oldEndNode, oldStartNode);\r\n            }\r\n            catch (e) {\r\n                console.warn(e);\r\n            }\r\n            oldEndNode = oldChildren[--oldEndIndex];\r\n            newStartNode = newChildren[++newStartIndex];\r\n        }\r\n        else {\r\n            if (!oldIdToIndex) {\r\n                oldIdToIndex = {};\r\n                for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n                    const oldChild = oldChildren[i];\r\n                    if (oldChild && replayer.mirror.hasNode(oldChild))\r\n                        oldIdToIndex[replayer.mirror.getId(oldChild)] = i;\r\n                }\r\n            }\r\n            indexInOld = oldIdToIndex[rrnodeMirror.getId(newStartNode)];\r\n            const nodeToMove = oldChildren[indexInOld];\r\n            if (indexInOld !== undefined &&\r\n                nodeToMove &&\r\n                nodeMatching(nodeToMove, newStartNode, replayer.mirror, rrnodeMirror)) {\r\n                try {\r\n                    oldTree.insertBefore(nodeToMove, oldStartNode);\r\n                }\r\n                catch (e) {\r\n                    console.warn(e);\r\n                }\r\n                oldChildren[indexInOld] = undefined;\r\n            }\r\n            else {\r\n                const newNode = createOrGetNode(newStartNode, replayer.mirror, rrnodeMirror);\r\n                if (oldTree.nodeName === '#document' &&\r\n                    oldStartNode &&\r\n                    ((newNode.nodeType === newNode.DOCUMENT_TYPE_NODE &&\r\n                        oldStartNode.nodeType === oldStartNode.DOCUMENT_TYPE_NODE) ||\r\n                        (newNode.nodeType === newNode.ELEMENT_NODE &&\r\n                            oldStartNode.nodeType === oldStartNode.ELEMENT_NODE))) {\r\n                    oldTree.removeChild(oldStartNode);\r\n                    replayer.mirror.removeNodeFromMap(oldStartNode);\r\n                    oldStartNode = oldChildren[++oldStartIndex];\r\n                }\r\n                try {\r\n                    oldTree.insertBefore(newNode, oldStartNode || null);\r\n                }\r\n                catch (e) {\r\n                    console.warn(e);\r\n                }\r\n            }\r\n            newStartNode = newChildren[++newStartIndex];\r\n        }\r\n    }\r\n    if (oldStartIndex > oldEndIndex) {\r\n        const referenceRRNode = newChildren[newEndIndex + 1];\r\n        let referenceNode = null;\r\n        if (referenceRRNode)\r\n            referenceNode = replayer.mirror.getNode(rrnodeMirror.getId(referenceRRNode));\r\n        for (; newStartIndex <= newEndIndex; ++newStartIndex) {\r\n            const newNode = createOrGetNode(newChildren[newStartIndex], replayer.mirror, rrnodeMirror);\r\n            try {\r\n                oldTree.insertBefore(newNode, referenceNode);\r\n            }\r\n            catch (e) {\r\n                console.warn(e);\r\n            }\r\n        }\r\n    }\r\n    else if (newStartIndex > newEndIndex) {\r\n        for (; oldStartIndex <= oldEndIndex; oldStartIndex++) {\r\n            const node = oldChildren[oldStartIndex];\r\n            if (!node || node.parentNode !== oldTree)\r\n                continue;\r\n            try {\r\n                oldTree.removeChild(node);\r\n                replayer.mirror.removeNodeFromMap(node);\r\n            }\r\n            catch (e) {\r\n                console.warn(e);\r\n            }\r\n        }\r\n    }\r\n    let oldChild = oldTree.firstChild;\r\n    let newChild = newTree.firstChild;\r\n    while (oldChild !== null && newChild !== null) {\r\n        diff(oldChild, newChild, replayer, rrnodeMirror);\r\n        oldChild = oldChild.nextSibling;\r\n        newChild = newChild.nextSibling;\r\n    }\r\n}\r\nfunction createOrGetNode(rrNode, domMirror, rrnodeMirror) {\r\n    const nodeId = rrnodeMirror.getId(rrNode);\r\n    const sn = rrnodeMirror.getMeta(rrNode);\r\n    let node = null;\r\n    if (nodeId > -1)\r\n        node = domMirror.getNode(nodeId);\r\n    if (node !== null && sameNodeType(node, rrNode))\r\n        return node;\r\n    switch (rrNode.RRNodeType) {\r\n        case NodeType$1.Document:\r\n            node = new Document();\r\n            break;\r\n        case NodeType$1.DocumentType:\r\n            node = document.implementation.createDocumentType(rrNode.name, rrNode.publicId, rrNode.systemId);\r\n            break;\r\n        case NodeType$1.Element: {\r\n            let tagName = rrNode.tagName.toLowerCase();\r\n            tagName = SVGTagMap[tagName] || tagName;\r\n            if (sn && 'isSVG' in sn && (sn === null || sn === void 0 ? void 0 : sn.isSVG)) {\r\n                node = document.createElementNS(NAMESPACES['svg'], tagName);\r\n            }\r\n            else\r\n                node = document.createElement(rrNode.tagName);\r\n            break;\r\n        }\r\n        case NodeType$1.Text:\r\n            node = document.createTextNode(rrNode.data);\r\n            break;\r\n        case NodeType$1.Comment:\r\n            node = document.createComment(rrNode.data);\r\n            break;\r\n        case NodeType$1.CDATA:\r\n            node = document.createCDATASection(rrNode.data);\r\n            break;\r\n    }\r\n    if (sn)\r\n        domMirror.add(node, Object.assign({}, sn));\r\n    try {\r\n        createdNodeSet === null || createdNodeSet === void 0 ? void 0 : createdNodeSet.add(node);\r\n    }\r\n    catch (e) {\r\n    }\r\n    return node;\r\n}\r\nfunction sameNodeType(node1, node2) {\r\n    if (node1.nodeType !== node2.nodeType)\r\n        return false;\r\n    return (node1.nodeType !== node1.ELEMENT_NODE ||\r\n        node1.tagName.toUpperCase() ===\r\n            node2.tagName);\r\n}\r\nfunction nodeMatching(node1, node2, domMirror, rrdomMirror) {\r\n    const node1Id = domMirror.getId(node1);\r\n    const node2Id = rrdomMirror.getId(node2);\r\n    if (node1Id === -1 || node1Id !== node2Id)\r\n        return false;\r\n    return sameNodeType(node1, node2);\r\n}\n\nclass RRDocument extends BaseRRDocumentImpl(BaseRRNode) {\r\n    get unserializedId() {\r\n        return this._unserializedId--;\r\n    }\r\n    constructor(mirror) {\r\n        super();\r\n        this.UNSERIALIZED_STARTING_ID = -2;\r\n        this._unserializedId = this.UNSERIALIZED_STARTING_ID;\r\n        this.mirror = createMirror();\r\n        this.scrollData = null;\r\n        if (mirror) {\r\n            this.mirror = mirror;\r\n        }\r\n    }\r\n    createDocument(_namespace, _qualifiedName, _doctype) {\r\n        return new RRDocument();\r\n    }\r\n    createDocumentType(qualifiedName, publicId, systemId) {\r\n        const documentTypeNode = new RRDocumentType(qualifiedName, publicId, systemId);\r\n        documentTypeNode.ownerDocument = this;\r\n        return documentTypeNode;\r\n    }\r\n    createElement(tagName) {\r\n        const upperTagName = tagName.toUpperCase();\r\n        let element;\r\n        switch (upperTagName) {\r\n            case 'AUDIO':\r\n            case 'VIDEO':\r\n                element = new RRMediaElement(upperTagName);\r\n                break;\r\n            case 'IFRAME':\r\n                element = new RRIFrameElement(upperTagName, this.mirror);\r\n                break;\r\n            case 'CANVAS':\r\n                element = new RRCanvasElement(upperTagName);\r\n                break;\r\n            case 'STYLE':\r\n                element = new RRStyleElement(upperTagName);\r\n                break;\r\n            default:\r\n                element = new RRElement(upperTagName);\r\n                break;\r\n        }\r\n        element.ownerDocument = this;\r\n        return element;\r\n    }\r\n    createComment(data) {\r\n        const commentNode = new RRComment(data);\r\n        commentNode.ownerDocument = this;\r\n        return commentNode;\r\n    }\r\n    createCDATASection(data) {\r\n        const sectionNode = new RRCDATASection(data);\r\n        sectionNode.ownerDocument = this;\r\n        return sectionNode;\r\n    }\r\n    createTextNode(data) {\r\n        const textNode = new RRText(data);\r\n        textNode.ownerDocument = this;\r\n        return textNode;\r\n    }\r\n    destroyTree() {\r\n        this.firstChild = null;\r\n        this.lastChild = null;\r\n        this.mirror.reset();\r\n    }\r\n    open() {\r\n        super.open();\r\n        this._unserializedId = this.UNSERIALIZED_STARTING_ID;\r\n    }\r\n}\r\nconst RRDocumentType = BaseRRDocumentTypeImpl(BaseRRNode);\r\nclass RRElement extends BaseRRElementImpl(BaseRRNode) {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.inputData = null;\r\n        this.scrollData = null;\r\n    }\r\n}\r\nclass RRMediaElement extends BaseRRMediaElementImpl(RRElement) {\r\n}\r\nclass RRCanvasElement extends RRElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.rr_dataURL = null;\r\n        this.canvasMutations = [];\r\n    }\r\n    getContext() {\r\n        return null;\r\n    }\r\n}\r\nclass RRStyleElement extends RRElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.rules = [];\r\n    }\r\n}\r\nclass RRIFrameElement extends RRElement {\r\n    constructor(upperTagName, mirror) {\r\n        super(upperTagName);\r\n        this.contentDocument = new RRDocument();\r\n        this.contentDocument.mirror = mirror;\r\n    }\r\n}\r\nconst RRText = BaseRRTextImpl(BaseRRNode);\r\nconst RRComment = BaseRRCommentImpl(BaseRRNode);\r\nconst RRCDATASection = BaseRRCDATASectionImpl(BaseRRNode);\r\nfunction getValidTagName(element) {\r\n    if (element instanceof HTMLFormElement) {\r\n        return 'FORM';\r\n    }\r\n    return element.tagName.toUpperCase();\r\n}\r\nfunction buildFromNode(node, rrdom, domMirror, parentRRNode) {\r\n    let rrNode;\r\n    switch (node.nodeType) {\r\n        case NodeType.DOCUMENT_NODE:\r\n            if (parentRRNode && parentRRNode.nodeName === 'IFRAME')\r\n                rrNode = parentRRNode.contentDocument;\r\n            else {\r\n                rrNode = rrdom;\r\n                rrNode.compatMode = node.compatMode;\r\n            }\r\n            break;\r\n        case NodeType.DOCUMENT_TYPE_NODE: {\r\n            const documentType = node;\r\n            rrNode = rrdom.createDocumentType(documentType.name, documentType.publicId, documentType.systemId);\r\n            break;\r\n        }\r\n        case NodeType.ELEMENT_NODE: {\r\n            const elementNode = node;\r\n            const tagName = getValidTagName(elementNode);\r\n            rrNode = rrdom.createElement(tagName);\r\n            const rrElement = rrNode;\r\n            for (const { name, value } of Array.from(elementNode.attributes)) {\r\n                rrElement.attributes[name] = value;\r\n            }\r\n            elementNode.scrollLeft && (rrElement.scrollLeft = elementNode.scrollLeft);\r\n            elementNode.scrollTop && (rrElement.scrollTop = elementNode.scrollTop);\r\n            break;\r\n        }\r\n        case NodeType.TEXT_NODE:\r\n            rrNode = rrdom.createTextNode(node.textContent || '');\r\n            break;\r\n        case NodeType.CDATA_SECTION_NODE:\r\n            rrNode = rrdom.createCDATASection(node.data);\r\n            break;\r\n        case NodeType.COMMENT_NODE:\r\n            rrNode = rrdom.createComment(node.textContent || '');\r\n            break;\r\n        case NodeType.DOCUMENT_FRAGMENT_NODE:\r\n            rrNode = parentRRNode.attachShadow({ mode: 'open' });\r\n            break;\r\n        default:\r\n            return null;\r\n    }\r\n    let sn = domMirror.getMeta(node);\r\n    if (rrdom instanceof RRDocument) {\r\n        if (!sn) {\r\n            sn = getDefaultSN(rrNode, rrdom.unserializedId);\r\n            domMirror.add(node, sn);\r\n        }\r\n        rrdom.mirror.add(rrNode, Object.assign({}, sn));\r\n    }\r\n    return rrNode;\r\n}\r\nfunction buildFromDom(dom, domMirror = createMirror$1(), rrdom = new RRDocument()) {\r\n    function walk(node, parentRRNode) {\r\n        const rrNode = buildFromNode(node, rrdom, domMirror, parentRRNode);\r\n        if (rrNode === null)\r\n            return;\r\n        if ((parentRRNode === null || parentRRNode === void 0 ? void 0 : parentRRNode.nodeName) !== 'IFRAME' &&\r\n            node.nodeType !== NodeType.DOCUMENT_FRAGMENT_NODE) {\r\n            parentRRNode === null || parentRRNode === void 0 ? void 0 : parentRRNode.appendChild(rrNode);\r\n            rrNode.parentNode = parentRRNode;\r\n            rrNode.parentElement = parentRRNode;\r\n        }\r\n        if (node.nodeName === 'IFRAME') {\r\n            const iframeDoc = node.contentDocument;\r\n            iframeDoc && walk(iframeDoc, rrNode);\r\n        }\r\n        else if (node.nodeType === NodeType.DOCUMENT_NODE ||\r\n            node.nodeType === NodeType.ELEMENT_NODE ||\r\n            node.nodeType === NodeType.DOCUMENT_FRAGMENT_NODE) {\r\n            if (node.nodeType === NodeType.ELEMENT_NODE &&\r\n                node.shadowRoot)\r\n                walk(node.shadowRoot, rrNode);\r\n            node.childNodes.forEach((childNode) => walk(childNode, rrNode));\r\n        }\r\n    }\r\n    walk(dom, null);\r\n    return rrdom;\r\n}\r\nfunction createMirror() {\r\n    return new Mirror();\r\n}\r\nclass Mirror {\r\n    constructor() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    getId(n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        const id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    }\r\n    getNode(id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    }\r\n    getIds() {\r\n        return Array.from(this.idNodeMap.keys());\r\n    }\r\n    getMeta(n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    }\r\n    removeNodeFromMap(n) {\r\n        const id = this.getId(n);\r\n        this.idNodeMap.delete(id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach((childNode) => this.removeNodeFromMap(childNode));\r\n        }\r\n    }\r\n    has(id) {\r\n        return this.idNodeMap.has(id);\r\n    }\r\n    hasNode(node) {\r\n        return this.nodeMetaMap.has(node);\r\n    }\r\n    add(n, meta) {\r\n        const id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    }\r\n    replace(id, n) {\r\n        const oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            const meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    }\r\n    reset() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n}\r\nfunction getDefaultSN(node, id) {\r\n    switch (node.RRNodeType) {\r\n        case NodeType$1.Document:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                childNodes: [],\r\n            };\r\n        case NodeType$1.DocumentType: {\r\n            const doctype = node;\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                name: doctype.name,\r\n                publicId: doctype.publicId,\r\n                systemId: doctype.systemId,\r\n            };\r\n        }\r\n        case NodeType$1.Element:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                tagName: node.tagName.toLowerCase(),\r\n                attributes: {},\r\n                childNodes: [],\r\n            };\r\n        case NodeType$1.Text:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                textContent: node.textContent || '',\r\n            };\r\n        case NodeType$1.Comment:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                textContent: node.textContent || '',\r\n            };\r\n        case NodeType$1.CDATA:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                textContent: '',\r\n            };\r\n    }\r\n}\n\nexport { BaseRRCDATASectionImpl, BaseRRCommentImpl, BaseRRDocumentImpl, BaseRRDocumentTypeImpl, BaseRRElementImpl, BaseRRMediaElementImpl, BaseRRNode, BaseRRTextImpl, ClassList, Mirror, NodeType, RRCDATASection, RRCanvasElement, RRComment, RRDocument, RRDocumentType, RRElement, RRIFrameElement, RRMediaElement, BaseRRNode as RRNode, RRStyleElement, RRText, buildFromDom, buildFromNode, createMirror, createOrGetNode, diff, getDefaultSN };\n","function mitt(n){return {all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e]);},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]));},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e);}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e);});}}}\n\nexport { mitt as default };\n","function polyfill(w = window, d = document) {\r\n    if ('scrollBehavior' in d.documentElement.style &&\r\n        w.__forceSmoothScrollPolyfill__ !== true) {\r\n        return;\r\n    }\r\n    const Element = w.HTMLElement || w.Element;\r\n    const SCROLL_TIME = 468;\r\n    const original = {\r\n        scroll: w.scroll || w.scrollTo,\r\n        scrollBy: w.scrollBy,\r\n        elementScroll: Element.prototype.scroll || scrollElement,\r\n        scrollIntoView: Element.prototype.scrollIntoView,\r\n    };\r\n    const now = w.performance && w.performance.now\r\n        ? w.performance.now.bind(w.performance)\r\n        : Date.now;\r\n    function isMicrosoftBrowser(userAgent) {\r\n        const userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\r\n        return new RegExp(userAgentPatterns.join('|')).test(userAgent);\r\n    }\r\n    const ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\r\n    function scrollElement(x, y) {\r\n        this.scrollLeft = x;\r\n        this.scrollTop = y;\r\n    }\r\n    function ease(k) {\r\n        return 0.5 * (1 - Math.cos(Math.PI * k));\r\n    }\r\n    function shouldBailOut(firstArg) {\r\n        if (firstArg === null ||\r\n            typeof firstArg !== 'object' ||\r\n            firstArg.behavior === undefined ||\r\n            firstArg.behavior === 'auto' ||\r\n            firstArg.behavior === 'instant') {\r\n            return true;\r\n        }\r\n        if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\r\n            return false;\r\n        }\r\n        throw new TypeError('behavior member of ScrollOptions ' +\r\n            firstArg.behavior +\r\n            ' is not a valid value for enumeration ScrollBehavior.');\r\n    }\r\n    function hasScrollableSpace(el, axis) {\r\n        if (axis === 'Y') {\r\n            return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\r\n        }\r\n        if (axis === 'X') {\r\n            return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\r\n        }\r\n    }\r\n    function canOverflow(el, axis) {\r\n        const overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\r\n        return overflowValue === 'auto' || overflowValue === 'scroll';\r\n    }\r\n    function isScrollable(el) {\r\n        const isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\r\n        const isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\r\n        return isScrollableY || isScrollableX;\r\n    }\r\n    function findScrollableParent(el) {\r\n        while (el !== d.body && isScrollable(el) === false) {\r\n            el = el.parentNode || el.host;\r\n        }\r\n        return el;\r\n    }\r\n    function step(context) {\r\n        const time = now();\r\n        let value;\r\n        let currentX;\r\n        let currentY;\r\n        let elapsed = (time - context.startTime) / SCROLL_TIME;\r\n        elapsed = elapsed > 1 ? 1 : elapsed;\r\n        value = ease(elapsed);\r\n        currentX = context.startX + (context.x - context.startX) * value;\r\n        currentY = context.startY + (context.y - context.startY) * value;\r\n        context.method.call(context.scrollable, currentX, currentY);\r\n        if (currentX !== context.x || currentY !== context.y) {\r\n            w.requestAnimationFrame(step.bind(w, context));\r\n        }\r\n    }\r\n    function smoothScroll(el, x, y) {\r\n        let scrollable;\r\n        let startX;\r\n        let startY;\r\n        let method;\r\n        const startTime = now();\r\n        if (el === d.body) {\r\n            scrollable = w;\r\n            startX = w.scrollX || w.pageXOffset;\r\n            startY = w.scrollY || w.pageYOffset;\r\n            method = original.scroll;\r\n        }\r\n        else {\r\n            scrollable = el;\r\n            startX = el.scrollLeft;\r\n            startY = el.scrollTop;\r\n            method = scrollElement;\r\n        }\r\n        step({\r\n            scrollable: scrollable,\r\n            method: method,\r\n            startTime: startTime,\r\n            startX: startX,\r\n            startY: startY,\r\n            x: x,\r\n            y: y,\r\n        });\r\n    }\r\n    w.scroll = w.scrollTo = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            original.scroll.call(w, arguments[0].left !== undefined\r\n                ? arguments[0].left\r\n                : typeof arguments[0] !== 'object'\r\n                    ? arguments[0]\r\n                    : w.scrollX || w.pageXOffset, arguments[0].top !== undefined\r\n                ? arguments[0].top\r\n                : arguments[1] !== undefined\r\n                    ? arguments[1]\r\n                    : w.scrollY || w.pageYOffset);\r\n            return;\r\n        }\r\n        smoothScroll.call(w, d.body, arguments[0].left !== undefined\r\n            ? ~~arguments[0].left\r\n            : w.scrollX || w.pageXOffset, arguments[0].top !== undefined\r\n            ? ~~arguments[0].top\r\n            : w.scrollY || w.pageYOffset);\r\n    };\r\n    w.scrollBy = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0])) {\r\n            original.scrollBy.call(w, arguments[0].left !== undefined\r\n                ? arguments[0].left\r\n                : typeof arguments[0] !== 'object'\r\n                    ? arguments[0]\r\n                    : 0, arguments[0].top !== undefined\r\n                ? arguments[0].top\r\n                : arguments[1] !== undefined\r\n                    ? arguments[1]\r\n                    : 0);\r\n            return;\r\n        }\r\n        smoothScroll.call(w, d.body, ~~arguments[0].left + (w.scrollX || w.pageXOffset), ~~arguments[0].top + (w.scrollY || w.pageYOffset));\r\n    };\r\n    Element.prototype.scroll = Element.prototype.scrollTo = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\r\n                throw new SyntaxError('Value could not be converted');\r\n            }\r\n            original.elementScroll.call(this, arguments[0].left !== undefined\r\n                ? ~~arguments[0].left\r\n                : typeof arguments[0] !== 'object'\r\n                    ? ~~arguments[0]\r\n                    : this.scrollLeft, arguments[0].top !== undefined\r\n                ? ~~arguments[0].top\r\n                : arguments[1] !== undefined\r\n                    ? ~~arguments[1]\r\n                    : this.scrollTop);\r\n            return;\r\n        }\r\n        const left = arguments[0].left;\r\n        const top = arguments[0].top;\r\n        smoothScroll.call(this, this, typeof left === 'undefined' ? this.scrollLeft : ~~left, typeof top === 'undefined' ? this.scrollTop : ~~top);\r\n    };\r\n    Element.prototype.scrollBy = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            original.elementScroll.call(this, arguments[0].left !== undefined\r\n                ? ~~arguments[0].left + this.scrollLeft\r\n                : ~~arguments[0] + this.scrollLeft, arguments[0].top !== undefined\r\n                ? ~~arguments[0].top + this.scrollTop\r\n                : ~~arguments[1] + this.scrollTop);\r\n            return;\r\n        }\r\n        this.scroll({\r\n            left: ~~arguments[0].left + this.scrollLeft,\r\n            top: ~~arguments[0].top + this.scrollTop,\r\n            behavior: arguments[0].behavior,\r\n        });\r\n    };\r\n    Element.prototype.scrollIntoView = function () {\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            original.scrollIntoView.call(this, arguments[0] === undefined ? true : arguments[0]);\r\n            return;\r\n        }\r\n        const scrollableParent = findScrollableParent(this);\r\n        const parentRects = scrollableParent.getBoundingClientRect();\r\n        const clientRects = this.getBoundingClientRect();\r\n        if (scrollableParent !== d.body) {\r\n            smoothScroll.call(this, scrollableParent, scrollableParent.scrollLeft + clientRects.left - parentRects.left, scrollableParent.scrollTop + clientRects.top - parentRects.top);\r\n            if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\r\n                w.scrollBy({\r\n                    left: parentRects.left,\r\n                    top: parentRects.top,\r\n                    behavior: 'smooth',\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            w.scrollBy({\r\n                left: clientRects.left,\r\n                top: clientRects.top,\r\n                behavior: 'smooth',\r\n            });\r\n        }\r\n    };\r\n}\n\nexport { polyfill };\n","import { EventType, IncrementalSource } from '../../../types/dist/types.js';\n\nclass Timer {\r\n    constructor(actions = [], config) {\r\n        this.timeOffset = 0;\r\n        this.raf = null;\r\n        this.actions = actions;\r\n        this.speed = config.speed;\r\n    }\r\n    addAction(action) {\r\n        const rafWasActive = this.raf === true;\r\n        if (!this.actions.length ||\r\n            this.actions[this.actions.length - 1].delay <= action.delay) {\r\n            this.actions.push(action);\r\n        }\r\n        else {\r\n            const index = this.findActionIndex(action);\r\n            this.actions.splice(index, 0, action);\r\n        }\r\n        if (rafWasActive) {\r\n            this.raf = requestAnimationFrame(this.rafCheck.bind(this));\r\n        }\r\n    }\r\n    start() {\r\n        this.timeOffset = 0;\r\n        this.lastTimestamp = performance.now();\r\n        this.raf = requestAnimationFrame(this.rafCheck.bind(this));\r\n    }\r\n    rafCheck() {\r\n        const time = performance.now();\r\n        this.timeOffset += (time - this.lastTimestamp) * this.speed;\r\n        this.lastTimestamp = time;\r\n        while (this.actions.length) {\r\n            const action = this.actions[0];\r\n            if (this.timeOffset >= action.delay) {\r\n                this.actions.shift();\r\n                action.doAction();\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        if (this.actions.length > 0) {\r\n            this.raf = requestAnimationFrame(this.rafCheck.bind(this));\r\n        }\r\n        else {\r\n            this.raf = true;\r\n        }\r\n    }\r\n    clear() {\r\n        if (this.raf) {\r\n            if (this.raf !== true) {\r\n                cancelAnimationFrame(this.raf);\r\n            }\r\n            this.raf = null;\r\n        }\r\n        this.actions.length = 0;\r\n    }\r\n    setSpeed(speed) {\r\n        this.speed = speed;\r\n    }\r\n    isActive() {\r\n        return this.raf !== null;\r\n    }\r\n    findActionIndex(action) {\r\n        let start = 0;\r\n        let end = this.actions.length - 1;\r\n        while (start <= end) {\r\n            const mid = Math.floor((start + end) / 2);\r\n            if (this.actions[mid].delay < action.delay) {\r\n                start = mid + 1;\r\n            }\r\n            else if (this.actions[mid].delay > action.delay) {\r\n                end = mid - 1;\r\n            }\r\n            else {\r\n                return mid + 1;\r\n            }\r\n        }\r\n        return start;\r\n    }\r\n}\r\nfunction addDelay(event, baselineTime) {\r\n    if (event.type === EventType.IncrementalSnapshot &&\r\n        event.data.source === IncrementalSource.MouseMove &&\r\n        event.data.positions &&\r\n        event.data.positions.length) {\r\n        const firstOffset = event.data.positions[0].timeOffset;\r\n        const firstTimestamp = event.timestamp + firstOffset;\r\n        event.delay = firstTimestamp - baselineTime;\r\n        return firstTimestamp - baselineTime;\r\n    }\r\n    event.delay = event.timestamp - baselineTime;\r\n    return event.delay;\r\n}\n\nexport { Timer, addDelay };\n","/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nfunction t(t,n){var e=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),a=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)a.push(r.value);}catch(t){o={error:t};}finally{try{r&&!r.done&&(e=i.return)&&e.call(i);}finally{if(o)throw o.error}}return a}var n;!function(t){t[t.NotStarted=0]=\"NotStarted\",t[t.Running=1]=\"Running\",t[t.Stopped=2]=\"Stopped\";}(n||(n={}));var e={type:\"xstate.init\"};function r(t){return void 0===t?[]:[].concat(t)}function o(t){return {type:\"xstate.assign\",assignment:t}}function i(t,n){return \"string\"==typeof(t=\"string\"==typeof t&&n&&n[t]?n[t]:t)?{type:t}:\"function\"==typeof t?{type:t.name,exec:t}:t}function a(t){return function(n){return t===n}}function u(t){return \"string\"==typeof t?{type:t}:t}function c(t,n){return {value:t,context:n,actions:[],changed:!1,matches:a(t)}}function f(t,n,e){var r=n,o=!1;return [t.filter((function(t){if(\"xstate.assign\"===t.type){o=!0;var n=Object.assign({},r);return \"function\"==typeof t.assignment?n=t.assignment(r,e):Object.keys(t.assignment).forEach((function(o){n[o]=\"function\"==typeof t.assignment[o]?t.assignment[o](r,e):t.assignment[o];})),r=n,!1}return !0})),r,o]}function s(n,o){void 0===o&&(o={});var s=t(f(r(n.states[n.initial].entry).map((function(t){return i(t,o.actions)})),n.context,e),2),l=s[0],v=s[1],y={config:n,_options:o,initialState:{value:n.initial,actions:l,context:v,matches:a(n.initial)},transition:function(e,o){var s,l,v=\"string\"==typeof e?{value:e,context:n.context}:e,p=v.value,g=v.context,d=u(o),x=n.states[p];if(x.on){var m=r(x.on[d.type]);try{for(var h=function(t){var n=\"function\"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&\"number\"==typeof t.length)return {next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}(m),b=h.next();!b.done;b=h.next()){var S=b.value;if(void 0===S)return c(p,g);var w=\"string\"==typeof S?{target:S}:S,j=w.target,E=w.actions,R=void 0===E?[]:E,N=w.cond,O=void 0===N?function(){return !0}:N,_=void 0===j,k=null!=j?j:p,T=n.states[k];if(O(g,d)){var q=t(f((_?r(R):[].concat(x.exit,R,T.entry).filter((function(t){return t}))).map((function(t){return i(t,y._options.actions)})),g,d),3),z=q[0],A=q[1],B=q[2],C=null!=j?j:p;return {value:C,context:A,actions:z,changed:j!==p||z.length>0||B,matches:a(C)}}}}catch(t){s={error:t};}finally{try{b&&!b.done&&(l=h.return)&&l.call(h);}finally{if(s)throw s.error}}}return c(p,g)}};return y}var l=function(t,n){return t.actions.forEach((function(e){var r=e.exec;return r&&r(t.context,n)}))};function v(t){var r=t.initialState,o=n.NotStarted,i=new Set,c={_machine:t,send:function(e){o===n.Running&&(r=t.transition(r,e),l(r,u(e)),i.forEach((function(t){return t(r)})));},subscribe:function(t){return i.add(t),t(r),{unsubscribe:function(){return i.delete(t)}}},start:function(i){if(i){var u=\"object\"==typeof i?i:{context:t.config.context,value:i};r={value:u.value,actions:[],context:u.context,matches:a(u.value)};}return o=n.Running,l(r,e),c},stop:function(){return o=n.Stopped,i.clear(),c},get state(){return r},get status(){return o}};return c}\n\nexport { n as InterpreterStatus, o as assign, s as createMachine, v as interpret };\n","import { interpret as v, createMachine as s, assign as o } from './../../../../ext/@xstate/fsm/es/index.js';\nimport { EventType, IncrementalSource, ReplayerEvents } from '../../../types/dist/types.js';\nimport { addDelay } from './timer.js';\n\nfunction discardPriorSnapshots(events, baselineTime) {\r\n    for (let idx = events.length - 1; idx >= 0; idx--) {\r\n        const event = events[idx];\r\n        if (event.type === EventType.Meta) {\r\n            if (event.timestamp <= baselineTime) {\r\n                return events.slice(idx);\r\n            }\r\n        }\r\n    }\r\n    return events;\r\n}\r\nfunction createPlayerService(context, { getCastFn, applyEventsSynchronously, emitter }) {\r\n    const playerMachine = s({\r\n        id: 'player',\r\n        context,\r\n        initial: 'paused',\r\n        states: {\r\n            playing: {\r\n                on: {\r\n                    PAUSE: {\r\n                        target: 'paused',\r\n                        actions: ['pause'],\r\n                    },\r\n                    CAST_EVENT: {\r\n                        target: 'playing',\r\n                        actions: 'castEvent',\r\n                    },\r\n                    END: {\r\n                        target: 'paused',\r\n                        actions: ['resetLastPlayedEvent', 'pause'],\r\n                    },\r\n                    ADD_EVENT: {\r\n                        target: 'playing',\r\n                        actions: ['addEvent'],\r\n                    },\r\n                },\r\n            },\r\n            paused: {\r\n                on: {\r\n                    PLAY: {\r\n                        target: 'playing',\r\n                        actions: ['recordTimeOffset', 'play'],\r\n                    },\r\n                    CAST_EVENT: {\r\n                        target: 'paused',\r\n                        actions: 'castEvent',\r\n                    },\r\n                    TO_LIVE: {\r\n                        target: 'live',\r\n                        actions: ['startLive'],\r\n                    },\r\n                    ADD_EVENT: {\r\n                        target: 'paused',\r\n                        actions: ['addEvent'],\r\n                    },\r\n                },\r\n            },\r\n            live: {\r\n                on: {\r\n                    ADD_EVENT: {\r\n                        target: 'live',\r\n                        actions: ['addEvent'],\r\n                    },\r\n                    CAST_EVENT: {\r\n                        target: 'live',\r\n                        actions: ['castEvent'],\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    }, {\r\n        actions: {\r\n            castEvent: o({\r\n                lastPlayedEvent: (ctx, event) => {\r\n                    if (event.type === 'CAST_EVENT') {\r\n                        return event.payload.event;\r\n                    }\r\n                    return ctx.lastPlayedEvent;\r\n                },\r\n            }),\r\n            recordTimeOffset: o((ctx, event) => {\r\n                let timeOffset = ctx.timeOffset;\r\n                if ('payload' in event && 'timeOffset' in event.payload) {\r\n                    timeOffset = event.payload.timeOffset;\r\n                }\r\n                return Object.assign(Object.assign({}, ctx), { timeOffset, baselineTime: ctx.events[0].timestamp + timeOffset });\r\n            }),\r\n            play(ctx) {\r\n                var _a;\r\n                const { timer, events, baselineTime, lastPlayedEvent } = ctx;\r\n                timer.clear();\r\n                for (const event of events) {\r\n                    addDelay(event, baselineTime);\r\n                }\r\n                const neededEvents = discardPriorSnapshots(events, baselineTime);\r\n                let lastPlayedTimestamp = lastPlayedEvent === null || lastPlayedEvent === void 0 ? void 0 : lastPlayedEvent.timestamp;\r\n                if ((lastPlayedEvent === null || lastPlayedEvent === void 0 ? void 0 : lastPlayedEvent.type) === EventType.IncrementalSnapshot &&\r\n                    lastPlayedEvent.data.source === IncrementalSource.MouseMove) {\r\n                    lastPlayedTimestamp =\r\n                        lastPlayedEvent.timestamp +\r\n                            ((_a = lastPlayedEvent.data.positions[0]) === null || _a === void 0 ? void 0 : _a.timeOffset);\r\n                }\r\n                if (baselineTime < (lastPlayedTimestamp || 0)) {\r\n                    emitter.emit(ReplayerEvents.PlayBack);\r\n                }\r\n                const syncEvents = new Array();\r\n                for (const event of neededEvents) {\r\n                    if (lastPlayedTimestamp &&\r\n                        lastPlayedTimestamp < baselineTime &&\r\n                        (event.timestamp <= lastPlayedTimestamp ||\r\n                            event === lastPlayedEvent)) {\r\n                        continue;\r\n                    }\r\n                    if (event.timestamp < baselineTime) {\r\n                        syncEvents.push(event);\r\n                    }\r\n                    else {\r\n                        const castFn = getCastFn(event, false);\r\n                        timer.addAction({\r\n                            doAction: () => {\r\n                                castFn();\r\n                            },\r\n                            delay: event.delay,\r\n                        });\r\n                    }\r\n                }\r\n                applyEventsSynchronously(syncEvents);\r\n                emitter.emit(ReplayerEvents.Flush);\r\n                timer.start();\r\n            },\r\n            pause(ctx) {\r\n                ctx.timer.clear();\r\n            },\r\n            resetLastPlayedEvent: o((ctx) => {\r\n                return Object.assign(Object.assign({}, ctx), { lastPlayedEvent: null });\r\n            }),\r\n            startLive: o({\r\n                baselineTime: (ctx, event) => {\r\n                    ctx.timer.start();\r\n                    if (event.type === 'TO_LIVE' && event.payload.baselineTime) {\r\n                        return event.payload.baselineTime;\r\n                    }\r\n                    return Date.now();\r\n                },\r\n            }),\r\n            addEvent: o((ctx, machineEvent) => {\r\n                const { baselineTime, timer, events } = ctx;\r\n                if (machineEvent.type === 'ADD_EVENT') {\r\n                    const { event } = machineEvent.payload;\r\n                    addDelay(event, baselineTime);\r\n                    let end = events.length - 1;\r\n                    if (!events[end] || events[end].timestamp <= event.timestamp) {\r\n                        events.push(event);\r\n                    }\r\n                    else {\r\n                        let insertionIndex = -1;\r\n                        let start = 0;\r\n                        while (start <= end) {\r\n                            const mid = Math.floor((start + end) / 2);\r\n                            if (events[mid].timestamp <= event.timestamp) {\r\n                                start = mid + 1;\r\n                            }\r\n                            else {\r\n                                end = mid - 1;\r\n                            }\r\n                        }\r\n                        if (insertionIndex === -1) {\r\n                            insertionIndex = start;\r\n                        }\r\n                        events.splice(insertionIndex, 0, event);\r\n                    }\r\n                    const isSync = event.timestamp < baselineTime;\r\n                    const castFn = getCastFn(event, isSync);\r\n                    if (isSync) {\r\n                        castFn();\r\n                    }\r\n                    else if (timer.isActive()) {\r\n                        timer.addAction({\r\n                            doAction: () => {\r\n                                castFn();\r\n                            },\r\n                            delay: event.delay,\r\n                        });\r\n                    }\r\n                }\r\n                return Object.assign(Object.assign({}, ctx), { events });\r\n            }),\r\n        },\r\n    });\r\n    return v(playerMachine);\r\n}\r\nfunction createSpeedService(context) {\r\n    const speedMachine = s({\r\n        id: 'speed',\r\n        context,\r\n        initial: 'normal',\r\n        states: {\r\n            normal: {\r\n                on: {\r\n                    FAST_FORWARD: {\r\n                        target: 'skipping',\r\n                        actions: ['recordSpeed', 'setSpeed'],\r\n                    },\r\n                    SET_SPEED: {\r\n                        target: 'normal',\r\n                        actions: ['setSpeed'],\r\n                    },\r\n                },\r\n            },\r\n            skipping: {\r\n                on: {\r\n                    BACK_TO_NORMAL: {\r\n                        target: 'normal',\r\n                        actions: ['restoreSpeed'],\r\n                    },\r\n                    SET_SPEED: {\r\n                        target: 'normal',\r\n                        actions: ['setSpeed'],\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    }, {\r\n        actions: {\r\n            setSpeed: (ctx, event) => {\r\n                if ('payload' in event) {\r\n                    ctx.timer.setSpeed(event.payload.speed);\r\n                }\r\n            },\r\n            recordSpeed: o({\r\n                normalSpeed: (ctx) => ctx.timer.speed,\r\n            }),\r\n            restoreSpeed: (ctx) => {\r\n                ctx.timer.setSpeed(ctx.normalSpeed);\r\n            },\r\n        },\r\n    });\r\n    return v(speedMachine);\r\n}\n\nexport { createPlayerService, createSpeedService, discardPriorSnapshots };\n","const rules = (blockClass) => [\r\n    `.${blockClass} { background: currentColor }`,\r\n    'noscript { display: none !important; }',\r\n];\n\nexport { rules as default };\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { decode } from './../../../../../ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js';\n\nconst webGLVarMap = new Map();\r\nfunction variableListFor(ctx, ctor) {\r\n    let contextMap = webGLVarMap.get(ctx);\r\n    if (!contextMap) {\r\n        contextMap = new Map();\r\n        webGLVarMap.set(ctx, contextMap);\r\n    }\r\n    if (!contextMap.has(ctor)) {\r\n        contextMap.set(ctor, []);\r\n    }\r\n    return contextMap.get(ctor);\r\n}\r\nfunction deserializeArg(imageMap, ctx, preload) {\r\n    return (arg) => __awaiter(this, void 0, void 0, function* () {\r\n        if (arg && typeof arg === 'object' && 'rr_type' in arg) {\r\n            if (preload)\r\n                preload.isUnchanged = false;\r\n            if (arg.rr_type === 'ImageBitmap' && 'args' in arg) {\r\n                const args = yield deserializeArg(imageMap, ctx, preload)(arg.args);\r\n                return yield createImageBitmap.apply(null, args);\r\n            }\r\n            else if ('index' in arg) {\r\n                if (preload || ctx === null)\r\n                    return arg;\r\n                const { rr_type: name, index } = arg;\r\n                return variableListFor(ctx, name)[index];\r\n            }\r\n            else if ('args' in arg) {\r\n                const { rr_type: name, args } = arg;\r\n                const ctor = window[name];\r\n                return new ctor(...(yield Promise.all(args.map(deserializeArg(imageMap, ctx, preload)))));\r\n            }\r\n            else if ('base64' in arg) {\r\n                return decode(arg.base64);\r\n            }\r\n            else if ('src' in arg) {\r\n                const image = imageMap.get(arg.src);\r\n                if (image) {\r\n                    return image;\r\n                }\r\n                else {\r\n                    const image = new Image();\r\n                    image.src = arg.src;\r\n                    imageMap.set(arg.src, image);\r\n                    return image;\r\n                }\r\n            }\r\n            else if ('data' in arg && arg.rr_type === 'Blob') {\r\n                const blobContents = yield Promise.all(arg.data.map(deserializeArg(imageMap, ctx, preload)));\r\n                const blob = new Blob(blobContents, {\r\n                    type: arg.type,\r\n                });\r\n                return blob;\r\n            }\r\n        }\r\n        else if (Array.isArray(arg)) {\r\n            const result = yield Promise.all(arg.map(deserializeArg(imageMap, ctx, preload)));\r\n            return result;\r\n        }\r\n        return arg;\r\n    });\r\n}\n\nexport { deserializeArg, variableListFor };\n","import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../../types/dist/types.js';\nimport { deserializeArg, variableListFor } from './deserialize-args.js';\n\nfunction getContext(target, type) {\r\n    try {\r\n        if (type === CanvasContext.WebGL) {\r\n            return (target.getContext('webgl') || target.getContext('experimental-webgl'));\r\n        }\r\n        return target.getContext('webgl2');\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\nconst WebGLVariableConstructorsNames = [\r\n    'WebGLActiveInfo',\r\n    'WebGLBuffer',\r\n    'WebGLFramebuffer',\r\n    'WebGLProgram',\r\n    'WebGLRenderbuffer',\r\n    'WebGLShader',\r\n    'WebGLShaderPrecisionFormat',\r\n    'WebGLTexture',\r\n    'WebGLUniformLocation',\r\n    'WebGLVertexArrayObject',\r\n];\r\nfunction saveToWebGLVarMap(ctx, result) {\r\n    if (!(result === null || result === void 0 ? void 0 : result.constructor))\r\n        return;\r\n    const { name } = result.constructor;\r\n    if (!WebGLVariableConstructorsNames.includes(name))\r\n        return;\r\n    const variables = variableListFor(ctx, name);\r\n    if (!variables.includes(result))\r\n        variables.push(result);\r\n}\r\nfunction webglMutation({ mutation, target, type, imageMap, errorHandler, }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const ctx = getContext(target, type);\r\n            if (!ctx)\r\n                return;\r\n            if (mutation.setter) {\r\n                ctx[mutation.property] = mutation.args[0];\r\n                return;\r\n            }\r\n            const original = ctx[mutation.property];\r\n            const args = yield Promise.all(mutation.args.map(deserializeArg(imageMap, ctx)));\r\n            const result = original.apply(ctx, args);\r\n            saveToWebGLVarMap(ctx, result);\r\n            const debugMode = false;\r\n            if (debugMode) ;\r\n        }\r\n        catch (error) {\r\n            errorHandler(mutation, error);\r\n        }\r\n    });\r\n}\n\nexport { webglMutation as default };\n","import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { deserializeArg } from './deserialize-args.js';\n\nfunction canvasMutation({ event, mutations, target, imageMap, errorHandler, }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const ctx = target.getContext('2d');\r\n        if (!ctx) {\r\n            errorHandler(mutations[0], new Error('Canvas context is null'));\r\n            return;\r\n        }\r\n        const mutationArgsPromises = mutations.map((mutation) => __awaiter(this, void 0, void 0, function* () {\r\n            return Promise.all(mutation.args.map(deserializeArg(imageMap, ctx)));\r\n        }));\r\n        const args = yield Promise.all(mutationArgsPromises);\r\n        args.forEach((args, index) => {\r\n            const mutation = mutations[index];\r\n            try {\r\n                if (mutation.setter) {\r\n                    ctx[mutation.property] =\r\n                        mutation.args[0];\r\n                    return;\r\n                }\r\n                const original = ctx[mutation.property];\r\n                if (mutation.property === 'drawImage' &&\r\n                    typeof mutation.args[0] === 'string') {\r\n                    imageMap.get(event);\r\n                    original.apply(ctx, mutation.args);\r\n                }\r\n                else {\r\n                    original.apply(ctx, args);\r\n                }\r\n            }\r\n            catch (error) {\r\n                errorHandler(mutation, error);\r\n            }\r\n            return;\r\n        });\r\n    });\r\n}\n\nexport { canvasMutation as default };\n","import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../../types/dist/types.js';\nimport webglMutation from './webgl.js';\nimport canvasMutation$1 from './2d.js';\n\nfunction canvasMutation({ event, mutation, target, imageMap, canvasEventMap, errorHandler, }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const precomputedMutation = canvasEventMap.get(event) || mutation;\r\n            const commands = 'commands' in precomputedMutation\r\n                ? precomputedMutation.commands\r\n                : [precomputedMutation];\r\n            if ([CanvasContext.WebGL, CanvasContext.WebGL2].includes(mutation.type)) {\r\n                for (let i = 0; i < commands.length; i++) {\r\n                    const command = commands[i];\r\n                    yield webglMutation({\r\n                        mutation: command,\r\n                        type: mutation.type,\r\n                        target,\r\n                        imageMap,\r\n                        errorHandler,\r\n                    });\r\n                }\r\n                return;\r\n            }\r\n            yield canvasMutation$1({\r\n                event,\r\n                mutations: commands,\r\n                target,\r\n                imageMap,\r\n                errorHandler,\r\n            });\r\n        }\r\n        catch (error) {\r\n            errorHandler(mutation, error);\r\n        }\r\n    });\r\n}\n\nexport { canvasMutation as default };\n","import { __awaiter } from './../../../../ext/tslib/tslib.es6.js';\nimport { createCache, createMirror, rebuild, buildNodeWithSN, toLowerCase, NodeType } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { RRDocument, diff, createOrGetNode, getDefaultSN, buildFromDom, buildFromNode } from '../../../rrdom/es/rrdom.js';\nimport * as mitt$1 from './../../../../ext/mitt/dist/mitt.mjs.js';\nimport mitt$2 from './../../../../ext/mitt/dist/mitt.mjs.js';\nimport { polyfill } from './smoothscroll.js';\nimport { Timer } from './timer.js';\nimport { createPlayerService, createSpeedService } from './machine.js';\nimport { EventType, ReplayerEvents, IncrementalSource, MouseInteractions } from '../../../types/dist/types.js';\nimport { StyleSheetMirror, polyfill as polyfill$1, isSerializedIframe, hasShadowRoot, queueToResolveTrees, iterateResolveTree, uniqueTextMutations, getPositionsAndIndex, getNestedRule, getBaseDimension } from '../utils.js';\nimport rules from './styles/inject-style.js';\nimport canvasMutation from './canvas/index.js';\nimport { deserializeArg } from './canvas/deserialize-args.js';\n\nconst SKIP_TIME_THRESHOLD = 10 * 1000;\r\nconst SKIP_TIME_INTERVAL = 5 * 1000;\r\nconst mitt = mitt$2 || mitt$1;\r\nconst REPLAY_CONSOLE_PREFIX = '[replayer]';\r\nconst defaultMouseTailConfig = {\r\n    duration: 500,\r\n    lineCap: 'round',\r\n    lineWidth: 3,\r\n    strokeStyle: 'red',\r\n};\r\nfunction indicatesTouchDevice(e) {\r\n    return (e.type == EventType.IncrementalSnapshot &&\r\n        (e.data.source == IncrementalSource.TouchMove ||\r\n            (e.data.source == IncrementalSource.MouseInteraction &&\r\n                e.data.type == MouseInteractions.TouchStart)));\r\n}\r\nclass Replayer {\r\n    get timer() {\r\n        return this.service.state.context.timer;\r\n    }\r\n    constructor(events, config) {\r\n        this.usingVirtualDom = false;\r\n        this.virtualDom = new RRDocument();\r\n        this.mouseTail = null;\r\n        this.tailPositions = [];\r\n        this.emitter = mitt();\r\n        this.legacy_missingNodeRetryMap = {};\r\n        this.cache = createCache();\r\n        this.imageMap = new Map();\r\n        this.canvasEventMap = new Map();\r\n        this.mirror = createMirror();\r\n        this.styleMirror = new StyleSheetMirror();\r\n        this.firstFullSnapshot = null;\r\n        this.newDocumentQueue = [];\r\n        this.mousePos = null;\r\n        this.touchActive = null;\r\n        this.lastMouseDownEvent = null;\r\n        this.lastSelectionData = null;\r\n        this.constructedStyleMutations = [];\r\n        this.adoptedStyleSheets = [];\r\n        this.handleResize = (dimension) => {\r\n            this.iframe.style.display = 'inherit';\r\n            for (const el of [this.mouseTail, this.iframe]) {\r\n                if (!el) {\r\n                    continue;\r\n                }\r\n                el.setAttribute('width', String(dimension.width));\r\n                el.setAttribute('height', String(dimension.height));\r\n            }\r\n        };\r\n        this.applyEventsSynchronously = (events) => {\r\n            for (const event of events) {\r\n                switch (event.type) {\r\n                    case EventType.DomContentLoaded:\r\n                    case EventType.Load:\r\n                    case EventType.Custom:\r\n                        continue;\r\n                    case EventType.FullSnapshot:\r\n                    case EventType.Meta:\r\n                    case EventType.Plugin:\r\n                    case EventType.IncrementalSnapshot:\r\n                        break;\r\n                }\r\n                const castFn = this.getCastFn(event, true);\r\n                castFn();\r\n            }\r\n        };\r\n        this.getCastFn = (event, isSync = false) => {\r\n            let castFn;\r\n            switch (event.type) {\r\n                case EventType.DomContentLoaded:\r\n                case EventType.Load:\r\n                    break;\r\n                case EventType.Custom:\r\n                    castFn = () => {\r\n                        this.emitter.emit(ReplayerEvents.CustomEvent, event);\r\n                    };\r\n                    break;\r\n                case EventType.Meta:\r\n                    castFn = () => this.emitter.emit(ReplayerEvents.Resize, {\r\n                        width: event.data.width,\r\n                        height: event.data.height,\r\n                    });\r\n                    break;\r\n                case EventType.FullSnapshot:\r\n                    castFn = () => {\r\n                        var _a;\r\n                        if (this.firstFullSnapshot) {\r\n                            if (this.firstFullSnapshot === event) {\r\n                                this.firstFullSnapshot = true;\r\n                                return;\r\n                            }\r\n                        }\r\n                        else {\r\n                            this.firstFullSnapshot = true;\r\n                        }\r\n                        this.rebuildFullSnapshot(event, isSync);\r\n                        (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.scrollTo(event.data.initialOffset);\r\n                        this.styleMirror.reset();\r\n                    };\r\n                    break;\r\n                case EventType.IncrementalSnapshot:\r\n                    castFn = () => {\r\n                        this.applyIncremental(event, isSync);\r\n                        if (isSync) {\r\n                            return;\r\n                        }\r\n                        if (event === this.nextUserInteractionEvent) {\r\n                            this.nextUserInteractionEvent = null;\r\n                            this.backToNormal();\r\n                        }\r\n                        if (this.config.skipInactive && !this.nextUserInteractionEvent) {\r\n                            for (const _event of this.service.state.context.events) {\r\n                                if (_event.timestamp <= event.timestamp) {\r\n                                    continue;\r\n                                }\r\n                                if (this.isUserInteraction(_event)) {\r\n                                    if (_event.delay - event.delay >\r\n                                        SKIP_TIME_THRESHOLD *\r\n                                            this.speedService.state.context.timer.speed) {\r\n                                        this.nextUserInteractionEvent = _event;\r\n                                    }\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (this.nextUserInteractionEvent) {\r\n                                const skipTime = this.nextUserInteractionEvent.delay - event.delay;\r\n                                const payload = {\r\n                                    speed: Math.min(Math.round(skipTime / SKIP_TIME_INTERVAL), this.config.maxSpeed),\r\n                                };\r\n                                this.speedService.send({ type: 'FAST_FORWARD', payload });\r\n                                this.emitter.emit(ReplayerEvents.SkipStart, payload);\r\n                            }\r\n                        }\r\n                    };\r\n                    break;\r\n            }\r\n            const wrappedCastFn = () => {\r\n                if (castFn) {\r\n                    castFn();\r\n                }\r\n                for (const plugin of this.config.plugins || []) {\r\n                    if (plugin.handler)\r\n                        plugin.handler(event, isSync, { replayer: this });\r\n                }\r\n                this.service.send({ type: 'CAST_EVENT', payload: { event } });\r\n                const last_index = this.service.state.context.events.length - 1;\r\n                if (!this.config.liveMode &&\r\n                    event === this.service.state.context.events[last_index]) {\r\n                    const finish = () => {\r\n                        if (last_index < this.service.state.context.events.length - 1) {\r\n                            return;\r\n                        }\r\n                        this.backToNormal();\r\n                        this.service.send('END');\r\n                        this.emitter.emit(ReplayerEvents.Finish);\r\n                    };\r\n                    let finish_buffer = 50;\r\n                    if (event.type === EventType.IncrementalSnapshot &&\r\n                        event.data.source === IncrementalSource.MouseMove &&\r\n                        event.data.positions.length) {\r\n                        finish_buffer += Math.max(0, -event.data.positions[0].timeOffset);\r\n                    }\r\n                    setTimeout(finish, finish_buffer);\r\n                }\r\n                this.emitter.emit(ReplayerEvents.EventCast, event);\r\n            };\r\n            return wrappedCastFn;\r\n        };\r\n        if (!(config === null || config === void 0 ? void 0 : config.liveMode) && events.length < 2) {\r\n            throw new Error('Replayer need at least 2 events.');\r\n        }\r\n        const defaultConfig = {\r\n            speed: 1,\r\n            maxSpeed: 360,\r\n            root: document.body,\r\n            loadTimeout: 0,\r\n            skipInactive: false,\r\n            showWarning: true,\r\n            showDebug: false,\r\n            blockClass: 'rr-block',\r\n            liveMode: false,\r\n            insertStyleRules: [],\r\n            triggerFocus: true,\r\n            UNSAFE_replayCanvas: false,\r\n            pauseAnimation: true,\r\n            mouseTail: defaultMouseTailConfig,\r\n            useVirtualDom: true,\r\n            logger: console,\r\n        };\r\n        this.config = Object.assign({}, defaultConfig, config);\r\n        this.handleResize = this.handleResize.bind(this);\r\n        this.getCastFn = this.getCastFn.bind(this);\r\n        this.applyEventsSynchronously = this.applyEventsSynchronously.bind(this);\r\n        this.emitter.on(ReplayerEvents.Resize, this.handleResize);\r\n        this.setupDom();\r\n        for (const plugin of this.config.plugins || []) {\r\n            if (plugin.getMirror)\r\n                plugin.getMirror({ nodeMirror: this.mirror });\r\n        }\r\n        this.emitter.on(ReplayerEvents.Flush, () => {\r\n            if (this.usingVirtualDom) {\r\n                const replayerHandler = {\r\n                    mirror: this.mirror,\r\n                    applyCanvas: (canvasEvent, canvasMutationData, target) => {\r\n                        void canvasMutation({\r\n                            event: canvasEvent,\r\n                            mutation: canvasMutationData,\r\n                            target,\r\n                            imageMap: this.imageMap,\r\n                            canvasEventMap: this.canvasEventMap,\r\n                            errorHandler: this.warnCanvasMutationFailed.bind(this),\r\n                        });\r\n                    },\r\n                    applyInput: this.applyInput.bind(this),\r\n                    applyScroll: this.applyScroll.bind(this),\r\n                    applyStyleSheetMutation: (data, styleSheet) => {\r\n                        if (data.source === IncrementalSource.StyleSheetRule)\r\n                            this.applyStyleSheetRule(data, styleSheet);\r\n                        else if (data.source === IncrementalSource.StyleDeclaration)\r\n                            this.applyStyleDeclaration(data, styleSheet);\r\n                    },\r\n                    afterAppend: (node, id) => {\r\n                        for (const plugin of this.config.plugins || []) {\r\n                            if (plugin.onBuild)\r\n                                plugin.onBuild(node, { id, replayer: this });\r\n                        }\r\n                    },\r\n                };\r\n                if (this.iframe.contentDocument)\r\n                    try {\r\n                        diff(this.iframe.contentDocument, this.virtualDom, replayerHandler, this.virtualDom.mirror);\r\n                    }\r\n                    catch (e) {\r\n                        console.warn(e);\r\n                    }\r\n                this.virtualDom.destroyTree();\r\n                this.usingVirtualDom = false;\r\n                if (Object.keys(this.legacy_missingNodeRetryMap).length) {\r\n                    for (const key in this.legacy_missingNodeRetryMap) {\r\n                        try {\r\n                            const value = this.legacy_missingNodeRetryMap[key];\r\n                            const realNode = createOrGetNode(value.node, this.mirror, this.virtualDom.mirror);\r\n                            diff(realNode, value.node, replayerHandler, this.virtualDom.mirror);\r\n                            value.node = realNode;\r\n                        }\r\n                        catch (error) {\r\n                            this.warn(error);\r\n                        }\r\n                    }\r\n                }\r\n                this.constructedStyleMutations.forEach((data) => {\r\n                    this.applyStyleSheetMutation(data);\r\n                });\r\n                this.constructedStyleMutations = [];\r\n                this.adoptedStyleSheets.forEach((data) => {\r\n                    this.applyAdoptedStyleSheet(data);\r\n                });\r\n                this.adoptedStyleSheets = [];\r\n            }\r\n            if (this.mousePos) {\r\n                this.moveAndHover(this.mousePos.x, this.mousePos.y, this.mousePos.id, true, this.mousePos.debugData);\r\n                this.mousePos = null;\r\n            }\r\n            if (this.touchActive === true) {\r\n                this.mouse.classList.add('touch-active');\r\n            }\r\n            else if (this.touchActive === false) {\r\n                this.mouse.classList.remove('touch-active');\r\n            }\r\n            this.touchActive = null;\r\n            if (this.lastMouseDownEvent) {\r\n                const [target, event] = this.lastMouseDownEvent;\r\n                target.dispatchEvent(event);\r\n            }\r\n            this.lastMouseDownEvent = null;\r\n            if (this.lastSelectionData) {\r\n                this.applySelection(this.lastSelectionData);\r\n                this.lastSelectionData = null;\r\n            }\r\n        });\r\n        this.emitter.on(ReplayerEvents.PlayBack, () => {\r\n            this.firstFullSnapshot = null;\r\n            this.mirror.reset();\r\n            this.styleMirror.reset();\r\n        });\r\n        const timer = new Timer([], {\r\n            speed: this.config.speed,\r\n        });\r\n        this.service = createPlayerService({\r\n            events: events\r\n                .map((e) => {\r\n                if (config && config.unpackFn) {\r\n                    return config.unpackFn(e);\r\n                }\r\n                return e;\r\n            })\r\n                .sort((a1, a2) => a1.timestamp - a2.timestamp),\r\n            timer,\r\n            timeOffset: 0,\r\n            baselineTime: 0,\r\n            lastPlayedEvent: null,\r\n        }, {\r\n            getCastFn: this.getCastFn,\r\n            applyEventsSynchronously: this.applyEventsSynchronously,\r\n            emitter: this.emitter,\r\n        });\r\n        this.service.start();\r\n        this.service.subscribe((state) => {\r\n            this.emitter.emit(ReplayerEvents.StateChange, {\r\n                player: state,\r\n            });\r\n        });\r\n        this.speedService = createSpeedService({\r\n            normalSpeed: -1,\r\n            timer,\r\n        });\r\n        this.speedService.start();\r\n        this.speedService.subscribe((state) => {\r\n            this.emitter.emit(ReplayerEvents.StateChange, {\r\n                speed: state,\r\n            });\r\n        });\r\n        const firstMeta = this.service.state.context.events.find((e) => e.type === EventType.Meta);\r\n        const firstFullsnapshot = this.service.state.context.events.find((e) => e.type === EventType.FullSnapshot);\r\n        if (firstMeta) {\r\n            const { width, height } = firstMeta.data;\r\n            setTimeout(() => {\r\n                this.emitter.emit(ReplayerEvents.Resize, {\r\n                    width,\r\n                    height,\r\n                });\r\n            }, 0);\r\n        }\r\n        if (firstFullsnapshot) {\r\n            setTimeout(() => {\r\n                var _a;\r\n                if (this.firstFullSnapshot) {\r\n                    return;\r\n                }\r\n                this.firstFullSnapshot = firstFullsnapshot;\r\n                this.rebuildFullSnapshot(firstFullsnapshot);\r\n                (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.scrollTo(firstFullsnapshot.data.initialOffset);\r\n            }, 1);\r\n        }\r\n        if (this.service.state.context.events.find(indicatesTouchDevice)) {\r\n            this.mouse.classList.add('touch-device');\r\n        }\r\n    }\r\n    on(event, handler) {\r\n        this.emitter.on(event, handler);\r\n        return this;\r\n    }\r\n    off(event, handler) {\r\n        this.emitter.off(event, handler);\r\n        return this;\r\n    }\r\n    setConfig(config) {\r\n        Object.keys(config).forEach((key) => {\r\n            config[key];\r\n            this.config[key] = config[key];\r\n        });\r\n        if (!this.config.skipInactive) {\r\n            this.backToNormal();\r\n        }\r\n        if (typeof config.speed !== 'undefined') {\r\n            this.speedService.send({\r\n                type: 'SET_SPEED',\r\n                payload: {\r\n                    speed: config.speed,\r\n                },\r\n            });\r\n        }\r\n        if (typeof config.mouseTail !== 'undefined') {\r\n            if (config.mouseTail === false) {\r\n                if (this.mouseTail) {\r\n                    this.mouseTail.style.display = 'none';\r\n                }\r\n            }\r\n            else {\r\n                if (!this.mouseTail) {\r\n                    this.mouseTail = document.createElement('canvas');\r\n                    this.mouseTail.width = Number.parseFloat(this.iframe.width);\r\n                    this.mouseTail.height = Number.parseFloat(this.iframe.height);\r\n                    this.mouseTail.classList.add('replayer-mouse-tail');\r\n                    this.wrapper.insertBefore(this.mouseTail, this.iframe);\r\n                }\r\n                this.mouseTail.style.display = 'inherit';\r\n            }\r\n        }\r\n    }\r\n    getMetaData() {\r\n        const firstEvent = this.service.state.context.events[0];\r\n        const lastEvent = this.service.state.context.events[this.service.state.context.events.length - 1];\r\n        return {\r\n            startTime: firstEvent.timestamp,\r\n            endTime: lastEvent.timestamp,\r\n            totalTime: lastEvent.timestamp - firstEvent.timestamp,\r\n        };\r\n    }\r\n    getCurrentTime() {\r\n        return this.timer.timeOffset + this.getTimeOffset();\r\n    }\r\n    getTimeOffset() {\r\n        const { baselineTime, events } = this.service.state.context;\r\n        return baselineTime - events[0].timestamp;\r\n    }\r\n    getMirror() {\r\n        return this.mirror;\r\n    }\r\n    play(timeOffset = 0) {\r\n        var _a, _b;\r\n        if (this.service.state.matches('paused')) {\r\n            this.service.send({ type: 'PLAY', payload: { timeOffset } });\r\n        }\r\n        else {\r\n            this.service.send({ type: 'PAUSE' });\r\n            this.service.send({ type: 'PLAY', payload: { timeOffset } });\r\n        }\r\n        (_b = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('html')[0]) === null || _b === void 0 ? void 0 : _b.classList.remove('rrweb-paused');\r\n        this.emitter.emit(ReplayerEvents.Start);\r\n    }\r\n    pause(timeOffset) {\r\n        var _a, _b;\r\n        if (timeOffset === undefined && this.service.state.matches('playing')) {\r\n            this.service.send({ type: 'PAUSE' });\r\n        }\r\n        if (typeof timeOffset === 'number') {\r\n            this.play(timeOffset);\r\n            this.service.send({ type: 'PAUSE' });\r\n        }\r\n        (_b = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('html')[0]) === null || _b === void 0 ? void 0 : _b.classList.add('rrweb-paused');\r\n        this.emitter.emit(ReplayerEvents.Pause);\r\n    }\r\n    resume(timeOffset = 0) {\r\n        this.warn(`The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface.`);\r\n        this.play(timeOffset);\r\n        this.emitter.emit(ReplayerEvents.Resume);\r\n    }\r\n    destroy() {\r\n        this.pause();\r\n        this.config.root.removeChild(this.wrapper);\r\n        this.emitter.emit(ReplayerEvents.Destroy);\r\n    }\r\n    startLive(baselineTime) {\r\n        this.service.send({ type: 'TO_LIVE', payload: { baselineTime } });\r\n    }\r\n    addEvent(rawEvent) {\r\n        const event = this.config.unpackFn\r\n            ? this.config.unpackFn(rawEvent)\r\n            : rawEvent;\r\n        if (indicatesTouchDevice(event)) {\r\n            this.mouse.classList.add('touch-device');\r\n        }\r\n        void Promise.resolve().then(() => this.service.send({ type: 'ADD_EVENT', payload: { event } }));\r\n    }\r\n    enableInteract() {\r\n        this.iframe.setAttribute('scrolling', 'auto');\r\n        this.iframe.style.pointerEvents = 'auto';\r\n    }\r\n    disableInteract() {\r\n        this.iframe.setAttribute('scrolling', 'no');\r\n        this.iframe.style.pointerEvents = 'none';\r\n    }\r\n    resetCache() {\r\n        this.cache = createCache();\r\n    }\r\n    setupDom() {\r\n        this.wrapper = document.createElement('div');\r\n        this.wrapper.classList.add('replayer-wrapper');\r\n        this.config.root.appendChild(this.wrapper);\r\n        this.mouse = document.createElement('div');\r\n        this.mouse.classList.add('replayer-mouse');\r\n        this.wrapper.appendChild(this.mouse);\r\n        if (this.config.mouseTail !== false) {\r\n            this.mouseTail = document.createElement('canvas');\r\n            this.mouseTail.classList.add('replayer-mouse-tail');\r\n            this.mouseTail.style.display = 'inherit';\r\n            this.wrapper.appendChild(this.mouseTail);\r\n        }\r\n        this.iframe = document.createElement('iframe');\r\n        const attributes = ['allow-same-origin'];\r\n        if (this.config.UNSAFE_replayCanvas) {\r\n            attributes.push('allow-scripts');\r\n        }\r\n        this.iframe.style.display = 'none';\r\n        this.iframe.setAttribute('sandbox', attributes.join(' '));\r\n        this.disableInteract();\r\n        this.wrapper.appendChild(this.iframe);\r\n        if (this.iframe.contentWindow && this.iframe.contentDocument) {\r\n            polyfill(this.iframe.contentWindow, this.iframe.contentDocument);\r\n            polyfill$1(this.iframe.contentWindow);\r\n        }\r\n    }\r\n    rebuildFullSnapshot(event, isSync = false) {\r\n        if (!this.iframe.contentDocument) {\r\n            return this.warn('Looks like your replayer has been destroyed.');\r\n        }\r\n        if (Object.keys(this.legacy_missingNodeRetryMap).length) {\r\n            this.warn('Found unresolved missing node map', this.legacy_missingNodeRetryMap);\r\n        }\r\n        this.legacy_missingNodeRetryMap = {};\r\n        const collected = [];\r\n        const afterAppend = (builtNode, id) => {\r\n            this.collectIframeAndAttachDocument(collected, builtNode);\r\n            for (const plugin of this.config.plugins || []) {\r\n                if (plugin.onBuild)\r\n                    plugin.onBuild(builtNode, {\r\n                        id,\r\n                        replayer: this,\r\n                    });\r\n            }\r\n        };\r\n        if (this.usingVirtualDom) {\r\n            this.virtualDom.destroyTree();\r\n            this.usingVirtualDom = false;\r\n        }\r\n        this.mirror.reset();\r\n        rebuild(event.data.node, {\r\n            doc: this.iframe.contentDocument,\r\n            afterAppend,\r\n            cache: this.cache,\r\n            mirror: this.mirror,\r\n        });\r\n        afterAppend(this.iframe.contentDocument, event.data.node.id);\r\n        for (const { mutationInQueue, builtNode } of collected) {\r\n            this.attachDocumentToIframe(mutationInQueue, builtNode);\r\n            this.newDocumentQueue = this.newDocumentQueue.filter((m) => m !== mutationInQueue);\r\n        }\r\n        const { documentElement, head } = this.iframe.contentDocument;\r\n        this.insertStyleRules(documentElement, head);\r\n        if (!this.service.state.matches('playing')) {\r\n            this.iframe.contentDocument\r\n                .getElementsByTagName('html')[0]\r\n                .classList.add('rrweb-paused');\r\n        }\r\n        this.emitter.emit(ReplayerEvents.FullsnapshotRebuilded, event);\r\n        if (!isSync) {\r\n            this.waitForStylesheetLoad();\r\n        }\r\n        if (this.config.UNSAFE_replayCanvas) {\r\n            void this.preloadAllImages();\r\n        }\r\n    }\r\n    insertStyleRules(documentElement, head) {\r\n        var _a;\r\n        const injectStylesRules = rules(this.config.blockClass).concat(this.config.insertStyleRules);\r\n        if (this.config.pauseAnimation) {\r\n            injectStylesRules.push('html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }');\r\n        }\r\n        if (this.usingVirtualDom) {\r\n            const styleEl = this.virtualDom.createElement('style');\r\n            this.virtualDom.mirror.add(styleEl, getDefaultSN(styleEl, this.virtualDom.unserializedId));\r\n            documentElement.insertBefore(styleEl, head);\r\n            styleEl.rules.push({\r\n                source: IncrementalSource.StyleSheetRule,\r\n                adds: injectStylesRules.map((cssText, index) => ({\r\n                    rule: cssText,\r\n                    index,\r\n                })),\r\n            });\r\n        }\r\n        else {\r\n            const styleEl = document.createElement('style');\r\n            documentElement.insertBefore(styleEl, head);\r\n            for (let idx = 0; idx < injectStylesRules.length; idx++) {\r\n                (_a = styleEl.sheet) === null || _a === void 0 ? void 0 : _a.insertRule(injectStylesRules[idx], idx);\r\n            }\r\n        }\r\n    }\r\n    attachDocumentToIframe(mutation, iframeEl) {\r\n        const mirror = this.usingVirtualDom\r\n            ? this.virtualDom.mirror\r\n            : this.mirror;\r\n        const collected = [];\r\n        const afterAppend = (builtNode, id) => {\r\n            this.collectIframeAndAttachDocument(collected, builtNode);\r\n            const sn = mirror.getMeta(builtNode);\r\n            if ((sn === null || sn === void 0 ? void 0 : sn.type) === NodeType.Element &&\r\n                (sn === null || sn === void 0 ? void 0 : sn.tagName.toUpperCase()) === 'HTML') {\r\n                const { documentElement, head } = iframeEl.contentDocument;\r\n                this.insertStyleRules(documentElement, head);\r\n            }\r\n            if (this.usingVirtualDom)\r\n                return;\r\n            for (const plugin of this.config.plugins || []) {\r\n                if (plugin.onBuild)\r\n                    plugin.onBuild(builtNode, {\r\n                        id,\r\n                        replayer: this,\r\n                    });\r\n            }\r\n        };\r\n        buildNodeWithSN(mutation.node, {\r\n            doc: iframeEl.contentDocument,\r\n            mirror: mirror,\r\n            hackCss: true,\r\n            skipChild: false,\r\n            afterAppend,\r\n            cache: this.cache,\r\n        });\r\n        afterAppend(iframeEl.contentDocument, mutation.node.id);\r\n        for (const { mutationInQueue, builtNode } of collected) {\r\n            this.attachDocumentToIframe(mutationInQueue, builtNode);\r\n            this.newDocumentQueue = this.newDocumentQueue.filter((m) => m !== mutationInQueue);\r\n        }\r\n    }\r\n    collectIframeAndAttachDocument(collected, builtNode) {\r\n        if (isSerializedIframe(builtNode, this.mirror)) {\r\n            const mutationInQueue = this.newDocumentQueue.find((m) => m.parentId === this.mirror.getId(builtNode));\r\n            if (mutationInQueue) {\r\n                collected.push({\r\n                    mutationInQueue,\r\n                    builtNode: builtNode,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    waitForStylesheetLoad() {\r\n        var _a;\r\n        const head = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.head;\r\n        if (head) {\r\n            const unloadSheets = new Set();\r\n            let timer;\r\n            let beforeLoadState = this.service.state;\r\n            const stateHandler = () => {\r\n                beforeLoadState = this.service.state;\r\n            };\r\n            this.emitter.on(ReplayerEvents.Start, stateHandler);\r\n            this.emitter.on(ReplayerEvents.Pause, stateHandler);\r\n            const unsubscribe = () => {\r\n                this.emitter.off(ReplayerEvents.Start, stateHandler);\r\n                this.emitter.off(ReplayerEvents.Pause, stateHandler);\r\n            };\r\n            head\r\n                .querySelectorAll('link[rel=\"stylesheet\"]')\r\n                .forEach((css) => {\r\n                if (!css.sheet) {\r\n                    unloadSheets.add(css);\r\n                    css.addEventListener('load', () => {\r\n                        unloadSheets.delete(css);\r\n                        if (unloadSheets.size === 0 && timer !== -1) {\r\n                            if (beforeLoadState.matches('playing')) {\r\n                                this.play(this.getCurrentTime());\r\n                            }\r\n                            this.emitter.emit(ReplayerEvents.LoadStylesheetEnd);\r\n                            if (timer) {\r\n                                clearTimeout(timer);\r\n                            }\r\n                            unsubscribe();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            if (unloadSheets.size > 0) {\r\n                this.service.send({ type: 'PAUSE' });\r\n                this.emitter.emit(ReplayerEvents.LoadStylesheetStart);\r\n                timer = setTimeout(() => {\r\n                    if (beforeLoadState.matches('playing')) {\r\n                        this.play(this.getCurrentTime());\r\n                    }\r\n                    timer = -1;\r\n                    unsubscribe();\r\n                }, this.config.loadTimeout);\r\n            }\r\n        }\r\n    }\r\n    preloadAllImages() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.service.state;\r\n            const stateHandler = () => {\r\n                this.service.state;\r\n            };\r\n            this.emitter.on(ReplayerEvents.Start, stateHandler);\r\n            this.emitter.on(ReplayerEvents.Pause, stateHandler);\r\n            const promises = [];\r\n            for (const event of this.service.state.context.events) {\r\n                if (event.type === EventType.IncrementalSnapshot &&\r\n                    event.data.source === IncrementalSource.CanvasMutation) {\r\n                    promises.push(this.deserializeAndPreloadCanvasEvents(event.data, event));\r\n                    const commands = 'commands' in event.data ? event.data.commands : [event.data];\r\n                    commands.forEach((c) => {\r\n                        this.preloadImages(c, event);\r\n                    });\r\n                }\r\n            }\r\n            return Promise.all(promises);\r\n        });\r\n    }\r\n    preloadImages(data, event) {\r\n        if (data.property === 'drawImage' &&\r\n            typeof data.args[0] === 'string' &&\r\n            !this.imageMap.has(event)) {\r\n            const canvas = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            const imgd = ctx === null || ctx === void 0 ? void 0 : ctx.createImageData(canvas.width, canvas.height);\r\n            imgd === null || imgd === void 0 ? void 0 : imgd.data;\r\n            JSON.parse(data.args[0]);\r\n            ctx === null || ctx === void 0 ? void 0 : ctx.putImageData(imgd, 0, 0);\r\n        }\r\n    }\r\n    deserializeAndPreloadCanvasEvents(data, event) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.canvasEventMap.has(event)) {\r\n                const status = {\r\n                    isUnchanged: true,\r\n                };\r\n                if ('commands' in data) {\r\n                    const commands = yield Promise.all(data.commands.map((c) => __awaiter(this, void 0, void 0, function* () {\r\n                        const args = yield Promise.all(c.args.map(deserializeArg(this.imageMap, null, status)));\r\n                        return Object.assign(Object.assign({}, c), { args });\r\n                    })));\r\n                    if (status.isUnchanged === false)\r\n                        this.canvasEventMap.set(event, Object.assign(Object.assign({}, data), { commands }));\r\n                }\r\n                else {\r\n                    const args = yield Promise.all(data.args.map(deserializeArg(this.imageMap, null, status)));\r\n                    if (status.isUnchanged === false)\r\n                        this.canvasEventMap.set(event, Object.assign(Object.assign({}, data), { args }));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    applyIncremental(e, isSync) {\r\n        var _a, _b, _c;\r\n        const { data: d } = e;\r\n        switch (d.source) {\r\n            case IncrementalSource.Mutation: {\r\n                try {\r\n                    this.applyMutation(d, isSync);\r\n                }\r\n                catch (error) {\r\n                    this.warn(`Exception in mutation ${error.message || error}`, d);\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Drag:\r\n            case IncrementalSource.TouchMove:\r\n            case IncrementalSource.MouseMove:\r\n                if (isSync) {\r\n                    const lastPosition = d.positions[d.positions.length - 1];\r\n                    this.mousePos = {\r\n                        x: lastPosition.x,\r\n                        y: lastPosition.y,\r\n                        id: lastPosition.id,\r\n                        debugData: d,\r\n                    };\r\n                }\r\n                else {\r\n                    d.positions.forEach((p) => {\r\n                        const action = {\r\n                            doAction: () => {\r\n                                this.moveAndHover(p.x, p.y, p.id, isSync, d);\r\n                            },\r\n                            delay: p.timeOffset +\r\n                                e.timestamp -\r\n                                this.service.state.context.baselineTime,\r\n                        };\r\n                        this.timer.addAction(action);\r\n                    });\r\n                    this.timer.addAction({\r\n                        doAction() {\r\n                        },\r\n                        delay: e.delay - ((_a = d.positions[0]) === null || _a === void 0 ? void 0 : _a.timeOffset),\r\n                    });\r\n                }\r\n                break;\r\n            case IncrementalSource.MouseInteraction: {\r\n                if (d.id === -1) {\r\n                    break;\r\n                }\r\n                const event = new Event(toLowerCase(MouseInteractions[d.type]));\r\n                const target = this.mirror.getNode(d.id);\r\n                if (!target) {\r\n                    return this.debugNodeNotFound(d, d.id);\r\n                }\r\n                this.emitter.emit(ReplayerEvents.MouseInteraction, {\r\n                    type: d.type,\r\n                    target,\r\n                });\r\n                const { triggerFocus } = this.config;\r\n                switch (d.type) {\r\n                    case MouseInteractions.Blur:\r\n                        if ('blur' in target) {\r\n                            target.blur();\r\n                        }\r\n                        break;\r\n                    case MouseInteractions.Focus:\r\n                        if (triggerFocus && target.focus) {\r\n                            target.focus({\r\n                                preventScroll: true,\r\n                            });\r\n                        }\r\n                        break;\r\n                    case MouseInteractions.Click:\r\n                    case MouseInteractions.TouchStart:\r\n                    case MouseInteractions.TouchEnd:\r\n                    case MouseInteractions.MouseDown:\r\n                    case MouseInteractions.MouseUp:\r\n                        if (isSync) {\r\n                            if (d.type === MouseInteractions.TouchStart) {\r\n                                this.touchActive = true;\r\n                            }\r\n                            else if (d.type === MouseInteractions.TouchEnd) {\r\n                                this.touchActive = false;\r\n                            }\r\n                            if (d.type === MouseInteractions.MouseDown) {\r\n                                this.lastMouseDownEvent = [target, event];\r\n                            }\r\n                            else if (d.type === MouseInteractions.MouseUp) {\r\n                                this.lastMouseDownEvent = null;\r\n                            }\r\n                            this.mousePos = {\r\n                                x: d.x,\r\n                                y: d.y,\r\n                                id: d.id,\r\n                                debugData: d,\r\n                            };\r\n                        }\r\n                        else {\r\n                            if (d.type === MouseInteractions.TouchStart) {\r\n                                this.tailPositions.length = 0;\r\n                            }\r\n                            this.moveAndHover(d.x, d.y, d.id, isSync, d);\r\n                            if (d.type === MouseInteractions.Click) {\r\n                                this.mouse.classList.remove('active');\r\n                                void this.mouse.offsetWidth;\r\n                                this.mouse.classList.add('active');\r\n                            }\r\n                            else if (d.type === MouseInteractions.TouchStart) {\r\n                                void this.mouse.offsetWidth;\r\n                                this.mouse.classList.add('touch-active');\r\n                            }\r\n                            else if (d.type === MouseInteractions.TouchEnd) {\r\n                                this.mouse.classList.remove('touch-active');\r\n                            }\r\n                            else {\r\n                                target.dispatchEvent(event);\r\n                            }\r\n                        }\r\n                        break;\r\n                    case MouseInteractions.TouchCancel:\r\n                        if (isSync) {\r\n                            this.touchActive = false;\r\n                        }\r\n                        else {\r\n                            this.mouse.classList.remove('touch-active');\r\n                        }\r\n                        break;\r\n                    default:\r\n                        target.dispatchEvent(event);\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Scroll: {\r\n                if (d.id === -1) {\r\n                    break;\r\n                }\r\n                if (this.usingVirtualDom) {\r\n                    const target = this.virtualDom.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    target.scrollData = d;\r\n                    break;\r\n                }\r\n                this.applyScroll(d, isSync);\r\n                break;\r\n            }\r\n            case IncrementalSource.ViewportResize:\r\n                this.emitter.emit(ReplayerEvents.Resize, {\r\n                    width: d.width,\r\n                    height: d.height,\r\n                });\r\n                break;\r\n            case IncrementalSource.Input: {\r\n                if (d.id === -1) {\r\n                    break;\r\n                }\r\n                if (this.usingVirtualDom) {\r\n                    const target = this.virtualDom.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    target.inputData = d;\r\n                    break;\r\n                }\r\n                this.applyInput(d);\r\n                break;\r\n            }\r\n            case IncrementalSource.MediaInteraction: {\r\n                const target = this.usingVirtualDom\r\n                    ? this.virtualDom.mirror.getNode(d.id)\r\n                    : this.mirror.getNode(d.id);\r\n                if (!target) {\r\n                    return this.debugNodeNotFound(d, d.id);\r\n                }\r\n                const mediaEl = target;\r\n                try {\r\n                    if (d.currentTime !== undefined) {\r\n                        mediaEl.currentTime = d.currentTime;\r\n                    }\r\n                    if (d.volume !== undefined) {\r\n                        mediaEl.volume = d.volume;\r\n                    }\r\n                    if (d.muted !== undefined) {\r\n                        mediaEl.muted = d.muted;\r\n                    }\r\n                    if (d.type === 1) {\r\n                        mediaEl.pause();\r\n                    }\r\n                    if (d.type === 0) {\r\n                        void mediaEl.play();\r\n                    }\r\n                    if (d.type === 4) {\r\n                        mediaEl.playbackRate = d.playbackRate;\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    this.warn(`Failed to replay media interactions: ${error.message || error}`);\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.StyleSheetRule:\r\n            case IncrementalSource.StyleDeclaration: {\r\n                if (this.usingVirtualDom) {\r\n                    if (d.styleId)\r\n                        this.constructedStyleMutations.push(d);\r\n                    else if (d.id)\r\n                        (_b = this.virtualDom.mirror.getNode(d.id)) === null || _b === void 0 ? void 0 : _b.rules.push(d);\r\n                }\r\n                else\r\n                    this.applyStyleSheetMutation(d);\r\n                break;\r\n            }\r\n            case IncrementalSource.CanvasMutation: {\r\n                if (!this.config.UNSAFE_replayCanvas) {\r\n                    return;\r\n                }\r\n                if (this.usingVirtualDom) {\r\n                    const target = this.virtualDom.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    target.canvasMutations.push({\r\n                        event: e,\r\n                        mutation: d,\r\n                    });\r\n                }\r\n                else {\r\n                    const target = this.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    void canvasMutation({\r\n                        event: e,\r\n                        mutation: d,\r\n                        target: target,\r\n                        imageMap: this.imageMap,\r\n                        canvasEventMap: this.canvasEventMap,\r\n                        errorHandler: this.warnCanvasMutationFailed.bind(this),\r\n                    });\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Font: {\r\n                try {\r\n                    const fontFace = new FontFace(d.family, d.buffer\r\n                        ? new Uint8Array(JSON.parse(d.fontSource))\r\n                        : d.fontSource, d.descriptors);\r\n                    (_c = this.iframe.contentDocument) === null || _c === void 0 ? void 0 : _c.fonts.add(fontFace);\r\n                }\r\n                catch (error) {\r\n                    this.warn(error);\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Selection: {\r\n                if (isSync) {\r\n                    this.lastSelectionData = d;\r\n                    break;\r\n                }\r\n                this.applySelection(d);\r\n                break;\r\n            }\r\n            case IncrementalSource.AdoptedStyleSheet: {\r\n                if (this.usingVirtualDom)\r\n                    this.adoptedStyleSheets.push(d);\r\n                else\r\n                    this.applyAdoptedStyleSheet(d);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    applyMutation(d, isSync) {\r\n        if (this.config.useVirtualDom && !this.usingVirtualDom && isSync) {\r\n            this.usingVirtualDom = true;\r\n            buildFromDom(this.iframe.contentDocument, this.mirror, this.virtualDom);\r\n            if (Object.keys(this.legacy_missingNodeRetryMap).length) {\r\n                for (const key in this.legacy_missingNodeRetryMap) {\r\n                    try {\r\n                        const value = this.legacy_missingNodeRetryMap[key];\r\n                        const virtualNode = buildFromNode(value.node, this.virtualDom, this.mirror);\r\n                        if (virtualNode)\r\n                            value.node = virtualNode;\r\n                    }\r\n                    catch (error) {\r\n                        this.warn(error);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        const mirror = this.usingVirtualDom ? this.virtualDom.mirror : this.mirror;\r\n        d.removes = d.removes.filter((mutation) => {\r\n            if (!mirror.getNode(mutation.id)) {\r\n                this.warnNodeNotFound(d, mutation.id);\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        d.removes.forEach((mutation) => {\r\n            var _a;\r\n            const target = mirror.getNode(mutation.id);\r\n            if (!target) {\r\n                return;\r\n            }\r\n            let parent = mirror.getNode(mutation.parentId);\r\n            if (!parent) {\r\n                return this.warnNodeNotFound(d, mutation.parentId);\r\n            }\r\n            if (mutation.isShadow && hasShadowRoot(parent)) {\r\n                parent = parent.shadowRoot;\r\n            }\r\n            mirror.removeNodeFromMap(target);\r\n            if (parent)\r\n                try {\r\n                    parent.removeChild(target);\r\n                    if (this.usingVirtualDom &&\r\n                        target.nodeName === '#text' &&\r\n                        parent.nodeName === 'STYLE' &&\r\n                        ((_a = parent.rules) === null || _a === void 0 ? void 0 : _a.length) > 0)\r\n                        parent.rules = [];\r\n                }\r\n                catch (error) {\r\n                    if (error instanceof DOMException) {\r\n                        this.warn('parent could not remove child in mutation', parent, target, d);\r\n                    }\r\n                    else {\r\n                        throw error;\r\n                    }\r\n                }\r\n        });\r\n        const legacy_missingNodeMap = Object.assign({}, this.legacy_missingNodeRetryMap);\r\n        const queue = [];\r\n        const nextNotInDOM = (mutation) => {\r\n            let next = null;\r\n            if (mutation.nextId) {\r\n                next = mirror.getNode(mutation.nextId);\r\n            }\r\n            if (mutation.nextId !== null &&\r\n                mutation.nextId !== undefined &&\r\n                mutation.nextId !== -1 &&\r\n                !next) {\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        const appendNode = (mutation) => {\r\n            var _a, _b;\r\n            if (!this.iframe.contentDocument) {\r\n                return this.warn('Looks like your replayer has been destroyed.');\r\n            }\r\n            let parent = mirror.getNode(mutation.parentId);\r\n            if (!parent) {\r\n                if (mutation.node.type === NodeType.Document) {\r\n                    return this.newDocumentQueue.push(mutation);\r\n                }\r\n                return queue.push(mutation);\r\n            }\r\n            if (mutation.node.isShadow) {\r\n                if (!hasShadowRoot(parent)) {\r\n                    parent.attachShadow({ mode: 'open' });\r\n                    parent = parent.shadowRoot;\r\n                }\r\n                else\r\n                    parent = parent.shadowRoot;\r\n            }\r\n            let previous = null;\r\n            let next = null;\r\n            if (mutation.previousId) {\r\n                previous = mirror.getNode(mutation.previousId);\r\n            }\r\n            if (mutation.nextId) {\r\n                next = mirror.getNode(mutation.nextId);\r\n            }\r\n            if (nextNotInDOM(mutation)) {\r\n                return queue.push(mutation);\r\n            }\r\n            if (mutation.node.rootId && !mirror.getNode(mutation.node.rootId)) {\r\n                return;\r\n            }\r\n            const targetDoc = mutation.node.rootId\r\n                ? mirror.getNode(mutation.node.rootId)\r\n                : this.usingVirtualDom\r\n                    ? this.virtualDom\r\n                    : this.iframe.contentDocument;\r\n            if (isSerializedIframe(parent, mirror)) {\r\n                this.attachDocumentToIframe(mutation, parent);\r\n                return;\r\n            }\r\n            const afterAppend = (node, id) => {\r\n                if (this.usingVirtualDom)\r\n                    return;\r\n                for (const plugin of this.config.plugins || []) {\r\n                    if (plugin.onBuild)\r\n                        plugin.onBuild(node, { id, replayer: this });\r\n                }\r\n            };\r\n            const target = buildNodeWithSN(mutation.node, {\r\n                doc: targetDoc,\r\n                mirror: mirror,\r\n                skipChild: true,\r\n                hackCss: true,\r\n                cache: this.cache,\r\n                afterAppend,\r\n            });\r\n            if (mutation.previousId === -1 || mutation.nextId === -1) {\r\n                legacy_missingNodeMap[mutation.node.id] = {\r\n                    node: target,\r\n                    mutation,\r\n                };\r\n                return;\r\n            }\r\n            const parentSn = mirror.getMeta(parent);\r\n            if (parentSn &&\r\n                parentSn.type === NodeType.Element &&\r\n                parentSn.tagName === 'textarea' &&\r\n                mutation.node.type === NodeType.Text) {\r\n                const childNodeArray = Array.isArray(parent.childNodes)\r\n                    ? parent.childNodes\r\n                    : Array.from(parent.childNodes);\r\n                for (const c of childNodeArray) {\r\n                    if (c.nodeType === parent.TEXT_NODE) {\r\n                        parent.removeChild(c);\r\n                    }\r\n                }\r\n            }\r\n            else if ((parentSn === null || parentSn === void 0 ? void 0 : parentSn.type) === NodeType.Document) {\r\n                const parentDoc = parent;\r\n                if (mutation.node.type === NodeType.DocumentType &&\r\n                    ((_a = parentDoc.childNodes[0]) === null || _a === void 0 ? void 0 : _a.nodeType) === Node.DOCUMENT_TYPE_NODE)\r\n                    parentDoc.removeChild(parentDoc.childNodes[0]);\r\n                if (target.nodeName === 'HTML' && parentDoc.documentElement)\r\n                    parentDoc.removeChild(parentDoc.documentElement);\r\n            }\r\n            if (previous && previous.nextSibling && previous.nextSibling.parentNode) {\r\n                parent.insertBefore(target, previous.nextSibling);\r\n            }\r\n            else if (next && next.parentNode) {\r\n                parent.contains(next)\r\n                    ? parent.insertBefore(target, next)\r\n                    : parent.insertBefore(target, null);\r\n            }\r\n            else {\r\n                parent.appendChild(target);\r\n            }\r\n            afterAppend(target, mutation.node.id);\r\n            if (this.usingVirtualDom &&\r\n                target.nodeName === '#text' &&\r\n                parent.nodeName === 'STYLE' &&\r\n                ((_b = parent.rules) === null || _b === void 0 ? void 0 : _b.length) > 0)\r\n                parent.rules = [];\r\n            if (isSerializedIframe(target, this.mirror)) {\r\n                const targetId = this.mirror.getId(target);\r\n                const mutationInQueue = this.newDocumentQueue.find((m) => m.parentId === targetId);\r\n                if (mutationInQueue) {\r\n                    this.attachDocumentToIframe(mutationInQueue, target);\r\n                    this.newDocumentQueue = this.newDocumentQueue.filter((m) => m !== mutationInQueue);\r\n                }\r\n            }\r\n            if (mutation.previousId || mutation.nextId) {\r\n                this.legacy_resolveMissingNode(legacy_missingNodeMap, parent, target, mutation);\r\n            }\r\n        };\r\n        d.adds.forEach((mutation) => {\r\n            appendNode(mutation);\r\n        });\r\n        const startTime = Date.now();\r\n        while (queue.length) {\r\n            const resolveTrees = queueToResolveTrees(queue);\r\n            queue.length = 0;\r\n            if (Date.now() - startTime > 500) {\r\n                this.warn('Timeout in the loop, please check the resolve tree data:', resolveTrees);\r\n                break;\r\n            }\r\n            for (const tree of resolveTrees) {\r\n                const parent = mirror.getNode(tree.value.parentId);\r\n                if (!parent) {\r\n                    this.debug('Drop resolve tree since there is no parent for the root node.', tree);\r\n                }\r\n                else {\r\n                    iterateResolveTree(tree, (mutation) => {\r\n                        appendNode(mutation);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        if (Object.keys(legacy_missingNodeMap).length) {\r\n            Object.assign(this.legacy_missingNodeRetryMap, legacy_missingNodeMap);\r\n        }\r\n        uniqueTextMutations(d.texts).forEach((mutation) => {\r\n            var _a;\r\n            const target = mirror.getNode(mutation.id);\r\n            if (!target) {\r\n                if (d.removes.find((r) => r.id === mutation.id)) {\r\n                    return;\r\n                }\r\n                return this.warnNodeNotFound(d, mutation.id);\r\n            }\r\n            target.textContent = mutation.value;\r\n            if (this.usingVirtualDom) {\r\n                const parent = target.parentNode;\r\n                if (((_a = parent === null || parent === void 0 ? void 0 : parent.rules) === null || _a === void 0 ? void 0 : _a.length) > 0)\r\n                    parent.rules = [];\r\n            }\r\n        });\r\n        d.attributes.forEach((mutation) => {\r\n            const target = mirror.getNode(mutation.id);\r\n            if (!target) {\r\n                if (d.removes.find((r) => r.id === mutation.id)) {\r\n                    return;\r\n                }\r\n                return this.warnNodeNotFound(d, mutation.id);\r\n            }\r\n            for (const attributeName in mutation.attributes) {\r\n                if (typeof attributeName === 'string') {\r\n                    const value = mutation.attributes[attributeName];\r\n                    if (value === null) {\r\n                        target.removeAttribute(attributeName);\r\n                    }\r\n                    else if (typeof value === 'string') {\r\n                        try {\r\n                            if (attributeName === '_cssText' &&\r\n                                (target.nodeName === 'LINK' || target.nodeName === 'STYLE')) {\r\n                                try {\r\n                                    const newSn = mirror.getMeta(target);\r\n                                    Object.assign(newSn.attributes, mutation.attributes);\r\n                                    const newNode = buildNodeWithSN(newSn, {\r\n                                        doc: target.ownerDocument,\r\n                                        mirror: mirror,\r\n                                        skipChild: true,\r\n                                        hackCss: true,\r\n                                        cache: this.cache,\r\n                                    });\r\n                                    const siblingNode = target.nextSibling;\r\n                                    const parentNode = target.parentNode;\r\n                                    if (newNode && parentNode) {\r\n                                        parentNode.removeChild(target);\r\n                                        parentNode.insertBefore(newNode, siblingNode);\r\n                                        mirror.replace(mutation.id, newNode);\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                catch (e) {\r\n                                }\r\n                            }\r\n                            target.setAttribute(attributeName, value);\r\n                        }\r\n                        catch (error) {\r\n                            this.warn('An error occurred may due to the checkout feature.', error);\r\n                        }\r\n                    }\r\n                    else if (attributeName === 'style') {\r\n                        const styleValues = value;\r\n                        const targetEl = target;\r\n                        for (const s in styleValues) {\r\n                            if (styleValues[s] === false) {\r\n                                targetEl.style.removeProperty(s);\r\n                            }\r\n                            else if (styleValues[s] instanceof Array) {\r\n                                const svp = styleValues[s];\r\n                                targetEl.style.setProperty(s, svp[0], svp[1]);\r\n                            }\r\n                            else {\r\n                                const svs = styleValues[s];\r\n                                targetEl.style.setProperty(s, svs);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    applyScroll(d, isSync) {\r\n        var _a, _b;\r\n        const target = this.mirror.getNode(d.id);\r\n        if (!target) {\r\n            return this.debugNodeNotFound(d, d.id);\r\n        }\r\n        const sn = this.mirror.getMeta(target);\r\n        if (target === this.iframe.contentDocument) {\r\n            (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.scrollTo({\r\n                top: d.y,\r\n                left: d.x,\r\n                behavior: isSync ? 'auto' : 'smooth',\r\n            });\r\n        }\r\n        else if ((sn === null || sn === void 0 ? void 0 : sn.type) === NodeType.Document) {\r\n            (_b = target.defaultView) === null || _b === void 0 ? void 0 : _b.scrollTo({\r\n                top: d.y,\r\n                left: d.x,\r\n                behavior: isSync ? 'auto' : 'smooth',\r\n            });\r\n        }\r\n        else {\r\n            try {\r\n                target.scrollTo({\r\n                    top: d.y,\r\n                    left: d.x,\r\n                    behavior: isSync ? 'auto' : 'smooth',\r\n                });\r\n            }\r\n            catch (error) {\r\n            }\r\n        }\r\n    }\r\n    applyInput(d) {\r\n        const target = this.mirror.getNode(d.id);\r\n        if (!target) {\r\n            return this.debugNodeNotFound(d, d.id);\r\n        }\r\n        try {\r\n            target.checked = d.isChecked;\r\n            target.value = d.text;\r\n        }\r\n        catch (error) {\r\n        }\r\n    }\r\n    applySelection(d) {\r\n        try {\r\n            const selectionSet = new Set();\r\n            const ranges = d.ranges.map(({ start, startOffset, end, endOffset }) => {\r\n                const startContainer = this.mirror.getNode(start);\r\n                const endContainer = this.mirror.getNode(end);\r\n                if (!startContainer || !endContainer)\r\n                    return;\r\n                const result = new Range();\r\n                result.setStart(startContainer, startOffset);\r\n                result.setEnd(endContainer, endOffset);\r\n                const doc = startContainer.ownerDocument;\r\n                const selection = doc === null || doc === void 0 ? void 0 : doc.getSelection();\r\n                selection && selectionSet.add(selection);\r\n                return {\r\n                    range: result,\r\n                    selection,\r\n                };\r\n            });\r\n            selectionSet.forEach((s) => s.removeAllRanges());\r\n            ranges.forEach((r) => { var _a; return r && ((_a = r.selection) === null || _a === void 0 ? void 0 : _a.addRange(r.range)); });\r\n        }\r\n        catch (error) {\r\n        }\r\n    }\r\n    applyStyleSheetMutation(data) {\r\n        var _a;\r\n        let styleSheet = null;\r\n        if (data.styleId)\r\n            styleSheet = this.styleMirror.getStyle(data.styleId);\r\n        else if (data.id)\r\n            styleSheet =\r\n                ((_a = this.mirror.getNode(data.id)) === null || _a === void 0 ? void 0 : _a.sheet) || null;\r\n        if (!styleSheet)\r\n            return;\r\n        if (data.source === IncrementalSource.StyleSheetRule)\r\n            this.applyStyleSheetRule(data, styleSheet);\r\n        else if (data.source === IncrementalSource.StyleDeclaration)\r\n            this.applyStyleDeclaration(data, styleSheet);\r\n    }\r\n    applyStyleSheetRule(data, styleSheet) {\r\n        var _a, _b, _c, _d;\r\n        (_a = data.adds) === null || _a === void 0 ? void 0 : _a.forEach(({ rule, index: nestedIndex }) => {\r\n            try {\r\n                if (Array.isArray(nestedIndex)) {\r\n                    const { positions, index } = getPositionsAndIndex(nestedIndex);\r\n                    const nestedRule = getNestedRule(styleSheet.cssRules, positions);\r\n                    nestedRule.insertRule(rule, index);\r\n                }\r\n                else {\r\n                    const index = nestedIndex === undefined\r\n                        ? undefined\r\n                        : Math.min(nestedIndex, styleSheet.cssRules.length);\r\n                    styleSheet === null || styleSheet === void 0 ? void 0 : styleSheet.insertRule(rule, index);\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        (_b = data.removes) === null || _b === void 0 ? void 0 : _b.forEach(({ index: nestedIndex }) => {\r\n            try {\r\n                if (Array.isArray(nestedIndex)) {\r\n                    const { positions, index } = getPositionsAndIndex(nestedIndex);\r\n                    const nestedRule = getNestedRule(styleSheet.cssRules, positions);\r\n                    nestedRule.deleteRule(index || 0);\r\n                }\r\n                else {\r\n                    styleSheet === null || styleSheet === void 0 ? void 0 : styleSheet.deleteRule(nestedIndex);\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        if (data.replace)\r\n            try {\r\n                void ((_c = styleSheet.replace) === null || _c === void 0 ? void 0 : _c.call(styleSheet, data.replace));\r\n            }\r\n            catch (e) {\r\n            }\r\n        if (data.replaceSync)\r\n            try {\r\n                (_d = styleSheet.replaceSync) === null || _d === void 0 ? void 0 : _d.call(styleSheet, data.replaceSync);\r\n            }\r\n            catch (e) {\r\n            }\r\n    }\r\n    applyStyleDeclaration(data, styleSheet) {\r\n        if (data.set) {\r\n            const rule = getNestedRule(styleSheet.rules, data.index);\r\n            rule.style.setProperty(data.set.property, data.set.value, data.set.priority);\r\n        }\r\n        if (data.remove) {\r\n            const rule = getNestedRule(styleSheet.rules, data.index);\r\n            rule.style.removeProperty(data.remove.property);\r\n        }\r\n    }\r\n    applyAdoptedStyleSheet(data) {\r\n        var _a;\r\n        const targetHost = this.mirror.getNode(data.id);\r\n        if (!targetHost)\r\n            return;\r\n        (_a = data.styles) === null || _a === void 0 ? void 0 : _a.forEach((style) => {\r\n            var _a;\r\n            let newStyleSheet = null;\r\n            let hostWindow = null;\r\n            if (hasShadowRoot(targetHost))\r\n                hostWindow = ((_a = targetHost.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) || null;\r\n            else if (targetHost.nodeName === '#document')\r\n                hostWindow = targetHost.defaultView;\r\n            if (!hostWindow)\r\n                return;\r\n            try {\r\n                newStyleSheet = new hostWindow.CSSStyleSheet();\r\n                this.styleMirror.add(newStyleSheet, style.styleId);\r\n                this.applyStyleSheetRule({\r\n                    source: IncrementalSource.StyleSheetRule,\r\n                    adds: style.rules,\r\n                }, newStyleSheet);\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        const MAX_RETRY_TIME = 10;\r\n        let count = 0;\r\n        const adoptStyleSheets = (targetHost, styleIds) => {\r\n            const stylesToAdopt = styleIds\r\n                .map((styleId) => this.styleMirror.getStyle(styleId))\r\n                .filter((style) => style !== null);\r\n            if (hasShadowRoot(targetHost))\r\n                targetHost.shadowRoot.adoptedStyleSheets =\r\n                    stylesToAdopt;\r\n            else if (targetHost.nodeName === '#document')\r\n                targetHost.adoptedStyleSheets = stylesToAdopt;\r\n            if (stylesToAdopt.length !== styleIds.length && count < MAX_RETRY_TIME) {\r\n                setTimeout(() => adoptStyleSheets(targetHost, styleIds), 0 + 100 * count);\r\n                count++;\r\n            }\r\n        };\r\n        adoptStyleSheets(targetHost, data.styleIds);\r\n    }\r\n    legacy_resolveMissingNode(map, parent, target, targetMutation) {\r\n        const { previousId, nextId } = targetMutation;\r\n        const previousInMap = previousId && map[previousId];\r\n        const nextInMap = nextId && map[nextId];\r\n        if (previousInMap) {\r\n            const { node, mutation } = previousInMap;\r\n            parent.insertBefore(node, target);\r\n            delete map[mutation.node.id];\r\n            delete this.legacy_missingNodeRetryMap[mutation.node.id];\r\n            if (mutation.previousId || mutation.nextId) {\r\n                this.legacy_resolveMissingNode(map, parent, node, mutation);\r\n            }\r\n        }\r\n        if (nextInMap) {\r\n            const { node, mutation } = nextInMap;\r\n            parent.insertBefore(node, target.nextSibling);\r\n            delete map[mutation.node.id];\r\n            delete this.legacy_missingNodeRetryMap[mutation.node.id];\r\n            if (mutation.previousId || mutation.nextId) {\r\n                this.legacy_resolveMissingNode(map, parent, node, mutation);\r\n            }\r\n        }\r\n    }\r\n    moveAndHover(x, y, id, isSync, debugData) {\r\n        const target = this.mirror.getNode(id);\r\n        if (!target) {\r\n            return this.debugNodeNotFound(debugData, id);\r\n        }\r\n        const base = getBaseDimension(target, this.iframe);\r\n        const _x = x * base.absoluteScale + base.x;\r\n        const _y = y * base.absoluteScale + base.y;\r\n        this.mouse.style.left = `${_x}px`;\r\n        this.mouse.style.top = `${_y}px`;\r\n        if (!isSync) {\r\n            this.drawMouseTail({ x: _x, y: _y });\r\n        }\r\n        this.hoverElements(target);\r\n    }\r\n    drawMouseTail(position) {\r\n        if (!this.mouseTail) {\r\n            return;\r\n        }\r\n        const { lineCap, lineWidth, strokeStyle, duration } = this.config.mouseTail === true\r\n            ? defaultMouseTailConfig\r\n            : Object.assign({}, defaultMouseTailConfig, this.config.mouseTail);\r\n        const draw = () => {\r\n            if (!this.mouseTail) {\r\n                return;\r\n            }\r\n            const ctx = this.mouseTail.getContext('2d');\r\n            if (!ctx || !this.tailPositions.length) {\r\n                return;\r\n            }\r\n            ctx.clearRect(0, 0, this.mouseTail.width, this.mouseTail.height);\r\n            ctx.beginPath();\r\n            ctx.lineWidth = lineWidth;\r\n            ctx.lineCap = lineCap;\r\n            ctx.strokeStyle = strokeStyle;\r\n            ctx.moveTo(this.tailPositions[0].x, this.tailPositions[0].y);\r\n            this.tailPositions.forEach((p) => ctx.lineTo(p.x, p.y));\r\n            ctx.stroke();\r\n        };\r\n        this.tailPositions.push(position);\r\n        draw();\r\n        setTimeout(() => {\r\n            this.tailPositions = this.tailPositions.filter((p) => p !== position);\r\n            draw();\r\n        }, duration / this.speedService.state.context.timer.speed);\r\n    }\r\n    hoverElements(el) {\r\n        var _a;\r\n        (_a = (this.lastHoveredRootNode || this.iframe.contentDocument)) === null || _a === void 0 ? void 0 : _a.querySelectorAll('.\\\\:hover').forEach((hoveredEl) => {\r\n            hoveredEl.classList.remove(':hover');\r\n        });\r\n        this.lastHoveredRootNode = el.getRootNode();\r\n        let currentEl = el;\r\n        while (currentEl) {\r\n            if (currentEl.classList) {\r\n                currentEl.classList.add(':hover');\r\n            }\r\n            currentEl = currentEl.parentElement;\r\n        }\r\n    }\r\n    isUserInteraction(event) {\r\n        if (event.type !== EventType.IncrementalSnapshot) {\r\n            return false;\r\n        }\r\n        return (event.data.source > IncrementalSource.Mutation &&\r\n            event.data.source <= IncrementalSource.Input);\r\n    }\r\n    backToNormal() {\r\n        this.nextUserInteractionEvent = null;\r\n        if (this.speedService.state.matches('normal')) {\r\n            return;\r\n        }\r\n        this.speedService.send({ type: 'BACK_TO_NORMAL' });\r\n        this.emitter.emit(ReplayerEvents.SkipEnd, {\r\n            speed: this.speedService.state.context.normalSpeed,\r\n        });\r\n    }\r\n    warnNodeNotFound(d, id) {\r\n        this.warn(`Node with id '${id}' not found. `, d);\r\n    }\r\n    warnCanvasMutationFailed(d, error) {\r\n        this.warn(`Has error on canvas update`, error, 'canvas mutation:', d);\r\n    }\r\n    debugNodeNotFound(d, id) {\r\n        this.debug(`Node with id '${id}' not found. `, d);\r\n    }\r\n    warn(...args) {\r\n        if (!this.config.showWarning) {\r\n            return;\r\n        }\r\n        this.config.logger.warn(REPLAY_CONSOLE_PREFIX, ...args);\r\n    }\r\n    debug(...args) {\r\n        if (!this.config.showDebug) {\r\n            return;\r\n        }\r\n        this.config.logger.log(REPLAY_CONSOLE_PREFIX, ...args);\r\n    }\r\n}\n\nexport { Replayer };\n"],"names":["NodeType","isElement","n","nodeType","ELEMENT_NODE","isShadowRoot","host","Boolean","shadowRoot","isNativeShadowDom","Object","prototype","toString","call","stringifyStylesheet","s","rules","cssRules","cssText","Array","from","map","stringifyRule","join","includes","replace","error","rule","importStringified","isCSSImportRule","styleSheet","split","length","statement","concat","JSON","stringify","href","layerName","push","supportsText","media","mediaText","escapeImportStatement","cssStringified","regex","validateStringifiedCssRule","Mirror","this","idNodeMap","Map","nodeMetaMap","WeakMap","getId","_a","id","getMeta","getNode","get","getIds","keys","removeNodeFromMap","_this","childNodes","forEach","childNode","has","hasNode","node","add","meta","set","oldNode","reset","createMirror","maskInputValue","element","maskInputOptions","tagName","type","value","maskInputFn","text","actualType","toLowerCase","repeat","str","ORIGINAL_ATTRIBUTE_NAME","getInputType","hasAttribute","canvasService","canvasCtx","_id","tagNameRegex","RegExp","IGNORED_NODE","genId","URL_IN_CSS_REF","URL_PROTOCOL_MATCH","URL_WWW_MATCH","DATA_URI","absoluteToStylesheet","origin","quote1","path1","quote2","path2","path3","url","filePath","maybeQuote","test","indexOf","slice","stack","parts","pop","_i","parts_1","part","SRCSET_NOT_SPACES","SRCSET_COMMAS_OR_SPACES","absoluteToDoc","doc","attributeValue","trim","a","createElement","isSVGElement","el","ownerSVGElement","getHref","document","transformAttribute","name","pos","collectCharacters","regEx","chars","match","exec","substring","output","descriptorsStr","inParens","c","charAt","getAbsoluteSrcsetString","ignoreAttribute","_value","classMatchesRegex","checkAncestors","parentNode","eIndex","classList","className","needMaskingText","maskTextClass","maskTextSelector","parentElement","contains","closest","matches","e","serializeNode","options","mirror","blockClass","blockSelector","inlineStylesheet","maskTextFn","_b","dataURLOptions","inlineImages","recordCanvas","keepIframeSrcFn","_c","newlyAddedElement","rootId","docId","undefined","getRootId","DOCUMENT_NODE","compatMode","Document","DOCUMENT_TYPE_NODE","DocumentType","publicId","systemId","needBlock","_isBlockedElement","HTMLFormElement","processedTagName","getValidTagName","attributes","len","i","attr","stylesheet","styleSheets","find","rel","_cssText","sheet","innerText","textContent","checked","selected","__context","canvas","ctx","getContext","x","width","y","height","getImageData","originalGetImageData","Uint32Array","Math","min","data","buffer","some","pixel","is2DCanvasBlank","rr_dataURL","toDataURL","quality","canvasDataURL","blankCanvas","image_1","oldValue_1","crossOrigin","recordInlineImage_1","removeEventListener","naturalWidth","naturalHeight","drawImage","err","console","warn","currentSrc","removeAttribute","complete","addEventListener","rr_mediaState","paused","rr_mediaCurrentTime","currentTime","scrollLeft","rr_scrollLeft","scrollTop","rr_scrollTop","_d","getBoundingClientRect","rr_width","rr_height","src","contentDocument","rr_src","Element","isSVG","serializeElementNode","TEXT_NODE","parentTagName","isStyle","isScript","nextSibling","previousSibling","Text","serializeTextNode","CDATA_SECTION_NODE","CDATA","COMMENT_NODE","Comment","lowerIfExists","maybeAttr","serializeNodeWithId","skipChild","slimDOMOptions","_e","_f","onSerialize","onIframeLoad","_g","iframeLoadTimeout","onStylesheetLoad","_h","stylesheetLoadTimeout","_j","_k","_l","preserveWhiteSpace","_serializedNode","sn","comment","script","as","endsWith","headFavicon","headMetaDescKeywords","headMetaSocial","property","headMetaRobots","headMetaHttpEquiv","headMetaAuthorship","headMetaVerification","slimDOMExcluded","serializedNode","assign","recordChild","isShadowHost","headWhitespace","bypassOptions","_m","serializedChildNode","_o","_p","isShadow","iframeEl","listener","win","contentWindow","readyState","fired","blankUrl","location","setTimeout","timer_1","clearTimeout","onceIframeLoaded","iframeDoc","serializedIframeNode","link","styleSheetLoadTimeout","styleSheetLoaded","timer","onceStylesheetLoaded","serializedLinkNode","commentre","parse","css","lineno","column","updatePosition","lines","lastIndexOf","position","start","line","Position","whitespace","end","source","content","errorsList","msg","Error","reason","filename","silent","open","close","comments","atrule","re","m","selector","declaration","propMatch","prop","val","ret","declarations","decl","decls","keyframe","vals","values","atimport","_compileAtrule","atcharset","atnamespace","vendor","frame","frames","keyframes","atkeyframes","style","atmedia","atcustommedia","supports","atsupports","atdocument","sel","selectors","atpage","athost","atfontface","addParent","rulesList","parsingErrors","obj","parent","isNode","childParent","isArray","v","defineProperty","configurable","writable","enumerable","tagMap","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","clippath","feblend","fecolormatrix","fecomponenttransfer","fecomposite","feconvolvematrix","fediffuselighting","fedisplacementmap","fedistantlight","fedropshadow","feflood","fefunca","fefuncb","fefuncg","fefuncr","fegaussianblur","feimage","femerge","femergenode","femorphology","feoffset","fepointlight","fespecularlighting","fespotlight","fetile","feturbulence","foreignobject","glyphref","lineargradient","radialgradient","HOVER_SELECTOR","HOVER_SELECTOR_GLOBAL","addHoverClass","cache","cachedStyle","stylesWithHoverClass","ast","selectorMatcher","filter","index","sort","b","result","newSelector","createCache","buildNode","hackCss","implementation","createDocument","createDocumentType","node_1","getTagName","createElementNS","specialAttributes","name_1","hasOwnProperty","startsWith","isTextarea","isRemoteOrDynamicCss","setAttributeNS","setAttribute","srcset","child","createTextNode","removeChild","appendChild","_loop_1","name_2","onload","RRNodeType","image","play","pause","firstChild","attachShadow","mode","createCDATASection","createComment","buildNodeWithSN","afterAppend","nodeInMirror","isNodeMetaEqual","xmlns","write","_loop_2","childN","htmlElement","body_1","nodeName","rebuild","onVisit","visit","visitedNode","name_3","handleScroll","on","fn","target","arguments","capture","passive","DEPARTED_MIRROR_ACCESS_WARNING","_mirror","throttle","func","wait","timeout","previous","_len","args","_key","now","Date","leading","remaining","context","apply","trailing","hookSetter","key","d","isRevoked","window","original","getOwnPropertyDescriptor","patch","replacement","wrapped","defineProperties","__rrweb_original__","Proxy","Reflect","receiver","nowTimestamp","getWindowScroll","left","scrollingElement","pageXOffset","documentElement","body","top","pageYOffset","getWindowHeight","innerHeight","clientHeight","getWindowWidth","innerWidth","clientWidth","isBlocked","isSerialized","isIgnored","isAncestorRemoved","legacy_isTouchEvent","event","changedTouches","polyfill","_this2","NodeList","DOMTokenList","Node","_len2","_key2","TypeError","queueToResolveTrees","queue","_step","queueNodeMap","putIntoMap","nodeInTree","children","queueNodeTrees","_iterator","_createForOfIteratorHelper","done","mutation","nextId","parentId","nextInTree","idx","splice","parentInTree","f","iterateResolveTree","tree","cb","isSerializedIframe","isSerializedStylesheet","getAttribute","getBaseDimension","rootIframe","frameElement","ownerDocument","defaultView","relativeScale","absoluteScale","frameDimension","frameBaseDimension","hasShadowRoot","getNestedRule","getPositionsAndIndex","nestedIndex","positions","_toConsumableArray","uniqueTextMutations","mutations","idSet","Set","uniqueMutations","getTime","StyleSheetMirror","_classCallCheck","styleIDMap","idStyleMap","_createClass","newId","getShadowHost","shadowHost","getRootNode","DOCUMENT_FRAGMENT_NODE","getRootShadowHost","rootShadowHost","shadowHostInDom","inDom","EventType","EventType2","IncrementalSource","IncrementalSource2","MouseInteractions","MouseInteractions2","PointerTypes","PointerTypes2","CanvasContext","CanvasContext2","ReplayerEvents","ReplayerEvents2","isNodeInLinkedList","errorHandler","DoubleLinkedList","head","tail","current","next","__ln","moveKey","MutationBuffer","frozen","locked","texts","removes","mapRemoves","movedMap","addedSet","movedSet","droppedSet","processMutations","processMutation","emit","adds","addedIds","addList","getNextId","ns","pushAdd","addNode","currentN","iframeManager","addIframe","stylesheetManager","trackLinkElement","shadowDomManager","addShadowRoot","iframe","childSn","attachIframe","observeAttachShadow","attachLinkElement","shift","isParentRemoved","_step2","_iterator2","isAncestorInSet","candidate","tailNode","_node","unhandledNode","removeNode","payload","attribute","diffAsStr","styleDiff","unchangedAsStr","_unchangedStyles","mutationCb","unattachedDoc","createHTMLDocument","oldValue","attributeName","item","old","_Array$from","pname","newValue","getPropertyValue","newPriority","getPropertyPriority","_i2","_Array$from2","addedNodes","genAdds","removedNodes","nodeId","deepDelete","processedNodeManager","inOtherBuffer","targetId","delete","canvasManager","freeze","unfreeze","lock","unlock","addsSet","_isParentRemoved","r","size","_isAncestorInSet","registerErrorHandler","handler","unregisterErrorHandler","callbackWrapper","mutationBuffers","getEventTarget","path","composedPath","initMutationObserver","rootEl","mutationBuffer","init","mutationObserverCtor","MutationObserver","__rrMutationObserver","angularZoneSymbol","Zone","__symbol__","observer","bind","observe","attributeOldValue","characterData","characterDataOldValue","childList","subtree","initMouseInteractionObserver","_ref3","mouseInteractionCb","sampling","mouseInteraction","disableMap","handlers","currentPointerType","Number","isNaN","eventKey","eventName","pointerType","thisEventKey","Mouse","Touch","Pen","MouseDown","MouseUp","Click","clientX","clientY","getHandler","PointerEvent","TouchStart","TouchEnd","h","initScrollObserver","_ref4","scrollCb","evt","scrollLeftTop","scroll","wrapEventWithUserTriggeredFlag","enable","userTriggered","INPUT_TAGS","lastInputValueMap","getNestedCSSRulePositions","childRule","hasNestedCSSRule","parentRule","CSSGroupingRule","CSSMediaRule","CSSSupportsRule","CSSConditionRule","unshift","parentStyleSheet","recurse","getIdAndStyleId","styleMirror","styleId","ownerNode","initAdoptedStyleSheetObserver","_ref14","hostId","patchTarget","ShadowRoot","originalPropertyDescriptor","sheets","adoptStyleSheets","initObservers","o","hooks","currentWindow","mousemoveCb","viewportResizeCb","inputCb","mediaInteractionCb","styleSheetRuleCb","styleDeclarationCb","canvasMutationCb","fontCb","selectionCb","mousemove","viewportResize","input","mediaInteaction","styleSheetRule","styleDeclaration","canvasMutation","font","selection","mergeHooks","mutationObserver","mousemoveHandler","_ref","timeBaseline","threshold","callbackThreshold","mousemoveCallback","wrappedCb","totalOffset","p","timeOffset","_ref2","DragEvent","Drag","MouseEvent","MouseMove","TouchMove","initMoveObserver","mouseInteractionHandler","scrollHandler","viewportResizeHandler","_ref5","_ref6","lastH","lastW","initViewportResizeObserver","inputHandler","_ref7","ignoreClass","ignoreSelector","userTriggeredOnInput","eventHandler","isTrusted","isChecked","cbWithDedup","querySelectorAll","lastInputValue","propertyDescriptor","HTMLInputElement","hookProperties","HTMLSelectElement","HTMLTextAreaElement","HTMLOptionElement","initInputObserver","mediaInteractionHandler","_ref17","volume","muted","playbackRate","initMediaInteractionObserver","styleSheetObserver","_ref8","_ref9","CSSStyleSheet","insertRule","thisArg","argumentsList","_argumentsList","_slicedToArray","_getIdAndStyleId","replaceSync","deleteRule","_getIdAndStyleId2","_getIdAndStyleId3","_getIdAndStyleId4","supportedNestedCSSRuleTypes","canMonkeyPatchNestedCSSRule","unmodifiedFunctions","entries","_ref10","_ref11","typeKey","_argumentsList5","_getIdAndStyleId5","_getIdAndStyleId6","_ref12","_ref13","initStyleSheetObserver","adoptedStyleSheetObserver","styleDeclarationObserver","_ref15","_ref16","ignoreCSSAttributes","setProperty","CSSStyleDeclaration","_argumentsList7","priority","_getIdAndStyleId7","removeProperty","_getIdAndStyleId8","remove","initStyleDeclarationObserver","fontObserver","collectFonts","_ref18","fontMap","originalFontFace","FontFace","family","descriptors","fontFace","fontSource","Uint8Array","restoreHandler","fonts","initFontObserver","selectionObserver","param","collapsed","updateSelection","getSelection","isCollapsed","ranges","count","rangeCount","range","getRangeAt","startContainer","startOffset","endContainer","endOffset","initSelectionObserver","pluginHandlers","plugins","plugin","callback","disconnect","CrossOriginIframeMirror","generateIdFn","iframeIdToRemoteIdMap","iframeRemoteIdToIdMap","remoteId","idToRemoteMap","remoteToIdMap","idToRemoteIdMap","getIdToRemoteIdMap","remoteIdToIdMap","getRemoteIdToIdMap","ids","getRemoteId","IframeManager","iframes","crossOriginIframeMap","crossOriginIframeMirror","crossOriginIframeRootIdMap","wrappedEmit","recordCrossOriginIframes","crossOriginIframeStyleMirror","generateId","handleMessage","loadListener","isAttachIframe","adoptedStyleSheets","message","crossOriginMessageEvent","transformedEvent","transformCrossOriginEvent","isCheckout","FullSnapshot","replaceIdOnNode","patchRootIdOnNode","timestamp","IncrementalSnapshot","Mutation","Meta","Load","DomContentLoaded","Plugin","Custom","replaceIds","ViewportResize","MediaInteraction","MouseInteraction","Scroll","CanvasMutation","Input","StyleSheetRule","StyleDeclaration","replaceStyleIds","Font","Selection","AdoptedStyleSheet","styles","iframeMirror","_this3","ShadowDomManager","shadowDoms","WeakSet","restoreHandlers","patchAttachShadow","iframeElement","manager","option","__awaiter","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","then","lookup","charCodeAt","decode","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","arraybuffer","ArrayBuffer","bytes","canvasVarMap","saveWebGLVar","isInstanceOfWebGLObject","list","ctor","contextMap","variableListFor","constructor","serializeArg","arg","Float32Array","Float64Array","Int32Array","Uint16Array","Int16Array","Int8Array","Uint8ClampedArray","rr_type","encode","DataView","byteOffset","byteLength","HTMLImageElement","HTMLCanvasElement","ImageData","serializeArgs","supportedWebGLConstructorNames","initCanvasContextObserver","setPreserveDrawingBufferToTrue","contextType","ctxName","getNormalizedContextName","contextAttributes","preserveDrawingBuffer","patchGLPrototype","props","getOwnPropertyNames","_loop","recordArgs","hookHandler","setter","createURL","sourcemapArg","enableUnicodeArg","sourcemap","enableUnicode","binaryString","atob","binaryView","String","fromCharCode","decodeBase64","blob","Blob","URL","createObjectURL","takeFullSnapshot","WorkerFactory","Worker","createBase64WorkerFactory","CanvasManager","pendingCanvasMutations","rafStamps","latestId","invokeId","_options$sampling","initCanvasMutationObserver","initCanvasFPSObserver","clear","resetObservers","fps","canvasContextReset","snapshotInProgressMap","worker","onmessage","_e$data","commands","rafId","timeBetweenSnapshots","lastSnapshotTime","requestAnimationFrame","takeCanvasSnapshots","matchedCanvas","getCanvas","_regeneratorRuntime","mark","_callee","bitmap","wrap","_context","prev","abrupt","getContextAttributes","COLOR_BUFFER_BIT","createImageBitmap","sent","postMessage","stop","cancelAnimationFrame","startRAFTimestamping","startPendingCanvasMutationFlusher","canvas2DReset","props2D","CanvasRenderingContext2D","initCanvas2DMutationObserver","canvasWebGL1and2Reset","WebGLRenderingContext","WebGL","WebGL2RenderingContext","WebGL2","initCanvasWebGLMutationObserver","flushPendingCanvasMutations","_this4","setLatestRAFTimestamp","_this5","flushPendingCanvasMutationFor","valuesWithType","rest","t","getOwnPropertySymbols","propertyIsEnumerable","__rest","StylesheetManager","trackedLinkElements","adoptedStyleSheetCb","linkEl","trackStylesheetInLinkElement","adoptedStyleSheetData","styleIds","CSSRule","ProcessedNodeManager","nodeMap","loop","periodicallyClear","thisBuffer","buffers","wrapEvent","recording","record","checkoutEveryNms","checkoutEveryNth","_options$blockClass","_options$blockSelecto","_options$ignoreClass","_options$ignoreSelect","_options$maskTextClas","_options$maskTextSele","_options$inlineStyles","maskAllInputs","_maskInputOptions","_slimDOMOptions","packFn","_options$dataURLOptio","mousemoveWait","_options$recordCanvas","_options$recordCrossO","_options$recordAfter","recordAfter","_options$userTriggere","_options$collectFonts","_options$inlineImages","_options$keepIframeSr","_options$ignoreCSSAtt","inEmittingFrame","passEmitsToParent","lastFullSnapshotEvent","color","date","email","month","number","search","tel","time","week","textarea","select","password","incrementalSnapshotCount","eventProcessor","isFrozen","buf","exceedCount","exceedTime","wrappedMutationEmit","wrappedScrollEmit","wrappedCanvasMutationEmit","getMirror","nodeMirror","slimDOM","snapshot","initialOffset","addLoadListener","destroy","addCustomEvent","tag","freezePage","u8","u16","u32","fleb","fdeb","clim","freb","eb","j","fl","revfl","fd","revfd","rev","hMap","cd","mb","l","co","le","rvb","sv","r_1","flt","fdt","flm","flrm","fdm","fdrm","max","bits","bits16","shft","slc","subarray","wbits","wbits16","hTree","t2","i0","i1","i2","maxSym","tr","mbt","ln","dt","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","w","clen","cf","wfblk","out","dat","wblk","final","syms","lf","df","li","bs","bl","dlt","mlb","ddt","mdb","lclt","nlc","lcdt","ndc","lcfreq","lct","mlcb","nlcc","lm","ll","dm","dl","flen","ftlen","dtlen","llm","lcts","it","clct","dst","deo","et","dopt","opt","pre","post","st","lvl","plvl","lst","floor","msk_1","bs1_1","ceil","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","maxd","ml","nl","mmd","md","ti","lin","din","dflt","level","mem","log","zlibSync","opts","adler","lv","zlh","wbytes","unzlibSync","sl","noBuf","noSt","cbuf","nbuf","bt","lbt","dbt","tbts","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","lms","dms","mxa","sym","dsym","inflt","zlv","strToU8","latin1","TextEncoder","ar","ai","strFromU8","TextDecoder","MARK","pack","unpack","raw","StackFrame","fileName","functionName","lineNumber","columnNumber","FIREFOX_SAFARI_STACK_REGEXP","CHROME_IE_STACK_REGEXP","SAFARI_NATIVE_CODE_REGEXP","ErrorStackParser","stacktrace","parseOpera","parseV8OrIE","parseFFOrSafari","extractLocation","urlLike","sanitizedLine","tokens","locationParts","functionNameRegex","parseOpera9","parseOpera11","parseOpera10","lineRE","parseFloat","pathToSelector","outerHTML","localName","domSiblings","sibling","isObject","isObjTooDeep","limit","_keys","stringifyOptions","numOfKeysLimit","depthOfLimit","thisPos","Infinity","_obj","shouldIgnore","stringLengthLimit","Event","eventResult","eventValue","HTMLElement","defaultLogOptions","lengthThreshold","logger","initLogObserver","logOptions","loggerType","logCount","inStack","cancelHandlers","trace","stackFrame","unhandledrejectionHandler","levelType","_logger","PLUGIN_NAME","getRecordConsolePlugin","defaultLogConfig","replayLogger","LogReplayPlugin","config","formatMessage","stackPrefix","getReplayConsolePlugin","getConsoleLogger","_isSync","logData","Log","replayer","showWarning","_get","base","object","getPrototypeOf","desc","NodeType$1","Mirror$1","toCSSText","properties","normalizedName","hyphenate","camelizeRE","CUSTOM_PROPERTY_REGEX","camelize","_","toUpperCase","hyphenateRE","BaseRRNode","lastChild","childIterator","_newChild","_refChild","BaseRRDocumentTypeImpl","RRNodeClass","_RRNodeClass2","_inherits","BaseRRDocumentType","_super2","_createSuper","qualifiedName","BaseRRElementImpl","_RRNodeClass3","BaseRRElement","_super3","ClassList","class","newClassName","_this6","res","propertyDelimiter","tmp","parseCSSText","_namespace","newChild","refChild","insertBefore","_init","_event","attributeString","BaseRRTextImpl","_RRNodeClass4","BaseRRText","_super5","_this7","BaseRRCommentImpl","_RRNodeClass5","BaseRRComment","_super6","_this8","BaseRRCDATASectionImpl","_RRNodeClass6","BaseRRCDATASection","_super7","_this9","classText","onChange","_this10","classes","classNames","_classNames","_len3","_key3","_this$classes","NAMESPACES","svg","SVGTagMap","createdNodeSet","diff","oldTree","newTree","rrnodeMirror","sameNodeType","calibratedOldTree","createOrGetNode","replaceChild","nodeMatching","newMeta","oldElement","newRRElement","oldContentDocument","diffChildren","diffBeforeUpdatingChildren","scrollData","applyScroll","oldAttributes","newAttributes","diffProps","inputData","applyInput","oldMediaElement","newMediaRRElement","rrCanvasElement","canvasMutations","applyCanvas","applyStyleSheetMutation","diffAfterUpdatingChildren","oldChildren","newChildren","oldStartIndex","oldEndIndex","newStartIndex","newEndIndex","oldStartNode","oldEndNode","newStartNode","newEndNode","oldIdToIndex","indexInOld","oldChild","nodeToMove","newNode","referenceRRNode","referenceNode","rrNode","domMirror","node1","node2","rrdomMirror","node1Id","node2Id","RRDocument","_BaseRRDocumentImpl","_super8","_this11","UNSERIALIZED_STARTING_ID","_unserializedId","_qualifiedName","_doctype","documentTypeNode","RRDocumentType","upperTagName","RRMediaElement","RRIFrameElement","RRCanvasElement","RRStyleElement","RRElement","commentNode","RRComment","sectionNode","RRCDATASection","textNode","RRText","_getPrototypeOf","_RRNodeClass","BaseRRDocument","_super","_assertThisInitialized","doctype","_namespaceURI","CDATASection","_BaseRRElementImpl","_super9","_this12","_BaseRRMediaElementIm","_super10","_RRElementClass","BaseRRMediaElement","_super4","_RRElement","_super11","_this13","_RRElement2","_super12","_this14","_RRElement3","_super13","_this15","buildFromNode","rrdom","parentRRNode","documentType","elementNode","rrElement","_i3","_Array$from2$_i","getDefaultSN","unserializedId","buildFromDom","dom","walk","_this16","mitt","all","off","__forceSmoothScrollPolyfill__","userAgent","SCROLL_TIME","scrollTo","scrollBy","elementScroll","scrollElement","scrollIntoView","performance","ROUNDING_TOLERANCE","navigator","shouldBailOut","smoothScroll","scrollX","scrollY","SyntaxError","behavior","scrollableParent","isScrollable","findScrollableParent","parentRects","clientRects","getComputedStyle","firstArg","hasScrollableSpace","axis","scrollHeight","scrollWidth","canOverflow","overflowValue","isScrollableY","isScrollableX","currentX","currentY","k","elapsed","startTime","cos","PI","startX","startY","method","scrollable","Timer","actions","raf","speed","action","rafWasActive","delay","findActionIndex","rafCheck","lastTimestamp","doAction","mid","addDelay","baselineTime","firstOffset","firstTimestamp","Symbol","iterator","return","NotStarted","Running","Stopped","assignment","u","changed","states","initial","entry","_options","initialState","transition","g","S","E","R","N","cond","O","T","q","exit","z","A","B","C","_machine","send","subscribe","unsubscribe","state","status","createPlayerService","getCastFn","applyEventsSynchronously","emitter","playerMachine","playing","PAUSE","CAST_EVENT","END","ADD_EVENT","PLAY","TO_LIVE","live","castEvent","lastPlayedEvent","recordTimeOffset","events","neededEvents","discardPriorSnapshots","lastPlayedTimestamp","PlayBack","syncEvents","castFn","addAction","Flush","resetLastPlayedEvent","startLive","addEvent","machineEvent","insertionIndex","isSync","isActive","_construct","Parent","Class","isNativeReflectConstruct","construct","instance","Function","setPrototypeOf","webGLVarMap","deserializeArg","imageMap","preload","_name","_args","_image","blobContents","isUnchanged","t0","t1","t3","t4","Image","WebGLVariableConstructorsNames","saveToWebGLVarMap","variables","webglMutation","_callee2","mutationArgsPromises","_context2","canvasEventMap","precomputedMutation","command","canvasMutation$1","mitt$2","mitt$1","REPLAY_CONSOLE_PREFIX","defaultMouseTailConfig","duration","lineCap","lineWidth","strokeStyle","indicatesTouchDevice","Replayer","usingVirtualDom","virtualDom","mouseTail","tailPositions","legacy_missingNodeRetryMap","firstFullSnapshot","newDocumentQueue","mousePos","touchActive","lastMouseDownEvent","lastSelectionData","constructedStyleMutations","handleResize","dimension","display","_arr","CustomEvent","Resize","rebuildFullSnapshot","applyIncremental","nextUserInteractionEvent","backToNormal","skipInactive","service","isUserInteraction","speedService","skipTime","round","maxSpeed","SkipStart","_step3","_iterator3","last_index","liveMode","finish_buffer","Finish","EventCast","defaultConfig","root","loadTimeout","showDebug","insertStyleRules","triggerFocus","UNSAFE_replayCanvas","pauseAnimation","useVirtualDom","setupDom","_step4","_iterator4","replayerHandler","canvasEvent","canvasMutationData","warnCanvasMutationFailed","applyStyleSheetRule","applyStyleDeclaration","_step5","_iterator5","onBuild","destroyTree","realNode","applyAdoptedStyleSheet","moveAndHover","debugData","mouse","_this$lastMouseDownEv","dispatchEvent","applySelection","unpackFn","a1","a2","StateChange","player","normalSpeed","normal","FAST_FORWARD","SET_SPEED","skipping","BACK_TO_NORMAL","setSpeed","recordSpeed","restoreSpeed","firstMeta","firstFullsnapshot","_firstMeta$data","wrapper","firstEvent","lastEvent","endTime","totalTime","getTimeOffset","_this$service$state$c","getElementsByTagName","Start","Pause","Resume","Destroy","rawEvent","pointerEvents","disableInteract","polyfill$1","collected","builtNode","collectIframeAndAttachDocument","_step6","_iterator6","_collected$_i","_collected","mutationInQueue","attachDocumentToIframe","_this$iframe$contentD","FullsnapshotRebuilded","waitForStylesheetLoad","preloadAllImages","injectStylesRules","styleEl","_iframeEl$contentDocu","_step7","_iterator7","_loop2","_collected2$_i","_collected2","unloadSheets","beforeLoadState","stateHandler","getCurrentTime","LoadStylesheetEnd","LoadStylesheetStart","promises","_iterator8","_step8","_loop3","deserializeAndPreloadCanvasEvents","preloadImages","delegateYield","finish","imgd","createImageData","putImageData","_callee3","_context4","_context3","applyMutation","lastPosition","debugNodeNotFound","Blur","blur","Focus","focus","preventScroll","offsetWidth","TouchCancel","mediaEl","virtualNode","warnNodeNotFound","DOMException","legacy_missingNodeMap","appendNode","previousId","nextNotInDOM","targetDoc","_step9","_iterator9","parentSn","_step10","childNodeArray","_iterator10","parentDoc","legacy_resolveMissingNode","resolveTrees","_step11","_iterator11","debug","newSn","siblingNode","styleValues","targetEl","svp","svs","selectionSet","Range","setStart","setEnd","removeAllRanges","addRange","getStyle","_getPositionsAndIndex","_getPositionsAndIndex2","targetHost","newStyleSheet","hostWindow","stylesToAdopt","targetMutation","previousInMap","nextInMap","_x","_y","drawMouseTail","hoverElements","draw","clearRect","beginPath","moveTo","lineTo","stroke","lastHoveredRootNode","hoveredEl","currentEl","SkipEnd","_this$config$logger","_this$config$logger2"],"sourceRoot":""}